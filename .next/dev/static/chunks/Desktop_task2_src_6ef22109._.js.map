{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/hooks/useCreatePost.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '@/store'\nimport { API_CONFIG, getApiUrl, getAuthenticatedHeaders } from '@/lib/config'\nimport { CreatePostModalProps, PostData } from '@/types/post-types'\n\nexport const useCreatePost = ({ \n  isOpen, \n  onClose, \n  onPost, \n  selectedAccounts, \n  video \n}: CreatePostModalProps) => {\n  console.log(\"video\", JSON?.stringify(video))\n  const [date, setDate] = useState('')\n  const [time, setTime] = useState('')\n  const [caption] = useState('')\n  const [selectedAccountIds, setSelectedAccountIds] = useState<number[]>([])\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [apiResponse, setApiResponse] = useState<any>(null)\n  const [showResponse, setShowResponse] = useState(false)\n  const [validationErrors, setValidationErrors] = useState<string[]>([])\n  const [timeAdjustmentMessage, setTimeAdjustmentMessage] = useState<string | null>(null)\n\n  // Get user ID from Redux store\n  const userId = useSelector((state: RootState) => state.user.user?.id)\n\n  // Get current date and time for restrictions\n  const getCurrentDateTime = useCallback(() => {\n    const now = new Date()\n    const year = now.getFullYear()\n    const month = String(now.getMonth() + 1).padStart(2, '0')\n    const day = String(now.getDate()).padStart(2, '0')\n    const hours = String(now.getHours()).padStart(2, '0')\n    const minutes = String(now.getMinutes()).padStart(2, '0')\n    \n    return {\n      date: `${year}-${month}-${day}`,\n      time: `${hours}:${minutes}`\n    }\n  }, [])\n\n  const { date: minDate, time: minTime } = getCurrentDateTime()\n\n  // Get minimum time for today (current time + 3 minutes)\n  const getMinTimeForToday = useCallback(() => {\n    const now = new Date()\n    const minTime = new Date(now.getTime() + 3 * 60 * 1000) // Add 3 minutes\n    return minTime.toTimeString().slice(0, 5)\n  }, [])\n\n  const minTimeForToday = getMinTimeForToday()\n\n  // Initialize selected accounts when modal opens\n  useEffect(() => {\n    if (isOpen && selectedAccounts.length > 0) {\n      setSelectedAccountIds(selectedAccounts.map(account => account.id))\n    }\n  }, [isOpen, selectedAccounts])\n\n  // Match selectedAccountIds with selectedAccounts and get complete account objects\n  const matchedSelectedAccounts = selectedAccounts.filter(account => \n    selectedAccountIds.includes(account.id)\n  )\n\n  const handleAccountToggle = useCallback((accountId: number) => {\n    setSelectedAccountIds(prev => \n      prev.includes(accountId) \n        ? prev.filter(id => id !== accountId)\n        : [...prev, accountId]\n    )\n  }, [])\n\n  // Handle date change with automatic time adjustment\n  const handleDateChange = useCallback((newDate: string) => {\n    const selectedDate = new Date(newDate)\n    const today = new Date()\n    const isToday = selectedDate.toDateString() === today.toDateString()\n    \n    if (isToday && time) {\n      const currentTime = new Date()\n      const minTime = new Date(currentTime.getTime() + 3 * 60 * 1000) // Add 3 minutes\n      const selectedTime = new Date(`${newDate}T${time}:00`)\n      const minTimeForToday = new Date(`${newDate}T${minTime.toTimeString().slice(0, 5)}:00`)\n      \n      if (selectedTime < minTimeForToday) {\n        const adjustedTime = minTime.toTimeString().slice(0, 5)\n        setTimeAdjustmentMessage(`Time automatically adjusted to ${adjustedTime} (3 minutes from now)`)\n        setTime(adjustedTime)\n        setTimeout(() => setTimeAdjustmentMessage(null), 5000)\n      }\n    }\n    \n    setDate(newDate)\n  }, [time])\n\n  // Handle time change with validation\n  const handleTimeChange = useCallback((newTime: string) => {\n    const selectedDate = new Date(date)\n    const today = new Date()\n    const isToday = selectedDate.toDateString() === today.toDateString()\n    \n    if (isToday) {\n      const currentTime = new Date()\n      const minTime = new Date(currentTime.getTime() + 3 * 60 * 1000) // Add 3 minutes\n      const selectedTime = new Date(`${date}T${newTime}:00`)\n      const minTimeForToday = new Date(`${date}T${minTime.toTimeString().slice(0, 5)}:00`)\n      \n      if (selectedTime < minTimeForToday) {\n        const adjustedTime = minTime.toTimeString().slice(0, 5)\n        setTimeAdjustmentMessage(`Time automatically adjusted to ${adjustedTime} (3 minutes from now)`)\n        setTime(adjustedTime)\n        setTimeout(() => setTimeAdjustmentMessage(null), 5000)\n        return\n      }\n    }\n    \n    setTime(newTime)\n  }, [date])\n\n  const validateForm = useCallback(() => {\n    const errors: string[] = []\n\n    // Validate date\n    if (!date || date.trim() === '') {\n      errors.push('Date is required')\n    } else if (date < minDate) {\n      errors.push('Cannot select a past date')\n    }\n\n    // Validate time\n    if (!time || time.trim() === '') {\n      errors.push('Time is required')\n    } else if (date === minDate) {\n      // Check if selected time is at least 3 minutes from current time in user's timezone\n      const formattedTime = time.includes(':') && time.split(':').length === 2 \n        ? `${time}:00` \n        : time;\n      \n      // Create selected date-time in user's local timezone\n      const [hours, minutes, seconds = 0] = formattedTime.split(':').map(Number)\n      const [year, month, day] = date.split('-').map(Number)\n      const selectedDateTime = new Date(year, month - 1, day, hours, minutes, seconds)\n      \n      // Get current time in user's local timezone\n      const now = new Date()\n      \n      // Calculate time difference in minutes\n      const timeDifference = selectedDateTime.getTime() - now.getTime()\n      const minutesDifference = timeDifference / (60 * 1000)\n      \n      // Require at least 3 minutes difference\n      if (minutesDifference < 2) {\n        const minTime = new Date(now.getTime() + 3 * 60 * 1000)\n        const minTimeString = minTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n        errors.push(`Please select a time at least 3 minutes from now. Minimum time should be ${minTimeString}`)\n      }\n    }\n\n    // Caption validation removed - using empty string\n\n    // Validate video data\n    if (!video || !video.title || video.title.trim() === '') {\n      errors.push('Video title is required')\n    }\n\n    if (!video || (!video.url && !video.videoUrl) || (video.url && video.url.trim() === '') || (video.videoUrl && video.videoUrl.trim() === '')) {\n      errors.push('Video URL is required')\n    }\n\n    // Validate account selection\n    if (selectedAccountIds.length === 0) {\n      errors.push('Please select at least one account to post to')\n    }\n\n    return errors\n  }, [date, time, selectedAccountIds, video, minDate])\n\n  // Real-time validation\n  useEffect(() => {\n    const errors = validateForm()\n    setValidationErrors(errors)\n  }, [validateForm])\n\n  const handleSubmit = useCallback(async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    // Re-validate before submission to check current time in user's timezone\n    const errors = validateForm()\n    \n    // Additional validation: Check if selected time is at least 3 minutes from now (for today only)\n    if (date === minDate && time) {\n      const formattedTime = time.includes(':') && time.split(':').length === 2 \n        ? `${time}:00` \n        : time;\n      \n      // Create selected date-time in user's local timezone\n      const [hours, minutes, seconds = 0] = formattedTime.split(':').map(Number)\n      const [year, month, day] = date.split('-').map(Number)\n      const selectedDateTime = new Date(year, month - 1, day, hours, minutes, seconds)\n      \n      // Get current time in user's local timezone\n      const now = new Date()\n      \n      // Calculate time difference in minutes\n      const timeDifference = selectedDateTime.getTime() - now.getTime()\n      const minutesDifference = timeDifference / (60 * 1000)\n      \n      // If less than 3 minutes, add error\n      if (minutesDifference < 2) {\n        const minTime = new Date(now.getTime() + 3 * 60 * 1000)\n        const minTimeString = minTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n        const errorMsg = `Please select a time at least 3 minutes from now. Minimum time should be ${minTimeString}`\n        if (!errors.includes(errorMsg)) {\n          errors.push(errorMsg)\n        }\n      }\n    }\n    \n    // Update validation errors state\n    setValidationErrors(errors)\n    \n    // Check if there are any validation errors\n    if (errors.length > 0) {\n      return // Don't submit if there are validation errors\n    }\n\n    setIsSubmitting(true)\n    setApiResponse(null)\n    setShowResponse(false)\n\n    try {\n      // Format time to include seconds\n      const formattedTime = time.includes(':') && time.split(':').length === 2 \n        ? `${time}:00` \n        : time;\n      \n      // Create local date-time from selected date and time\n      // Format: YYYY-MM-DDTHH:mm:ss (local timezone)\n      const localDateTime = `${date}T${formattedTime}`;\n      const localDate = new Date(localDateTime);\n      \n      // Convert to UTC ISO string\n      const utcTime = localDate.toISOString();\n      \n      // Extract UTC date and time (date might have changed if timezone offset moves to previous day)\n      // e.g., if local is Nov 1 4:30 AM and timezone is UTC+5, UTC will be Oct 31 11:30 PM\n      const utcDate = utcTime.split('T')[0]; // YYYY-MM-DD format\n      const timeOnly = utcTime.split('T')[1].split('.')[0];\n      \n      const requestBody = {\n        accountIds: selectedAccountIds,\n        name: video.title || '',\n        videoUrl: video.videoUrl || video.url || '',\n        date: utcDate, // Use UTC date which may have shifted\n        time: timeOnly,\n        caption: 'Caption',\n        userId: userId,\n        selectedAccounts: selectedAccounts.filter(account => selectedAccountIds.includes(account.id)),\n        instagram_caption: video.socialMediaCaptions?.instagram_caption || '',\n        facebook_caption: video.socialMediaCaptions?.facebook_caption || '',\n        linkedin_caption: video.socialMediaCaptions?.linkedin_caption || '',\n        twitter_caption: video.socialMediaCaptions?.twitter_caption || '',\n        tiktok_caption: video.socialMediaCaptions?.tiktok_caption || '',\n        youtube_caption: video.socialMediaCaptions?.youtube_caption || ''\n      }\n\n      const response = await fetch(getApiUrl(API_CONFIG.ENDPOINTS.SOCIALBU.MEDIA_CREATE_POST), {\n        method: 'POST',\n        headers: getAuthenticatedHeaders(),\n        body: JSON.stringify(requestBody)\n      })\n\n      const responseData = await response.json()\n      \n      setApiResponse(responseData)\n      setShowResponse(true)\n\n      if (response.ok && responseData.success) {\n        // Show success notification\n        if ((window as any).showNotification) {\n          (window as any).showNotification({\n            type: 'success',\n            title: 'Post Created Successfully',\n            message: 'Your post has been scheduled successfully!',\n            duration: 5000\n          })\n        }\n\n        // Call the original onPost callback for any additional handling\n        const selectedAccountsForPost = selectedAccounts.filter(account => \n          selectedAccountIds.includes(account.id)\n        )\n        const postData: PostData = {\n          date,\n          time,\n          caption: '',\n          accounts: selectedAccountsForPost,\n          video\n        }\n        onPost(postData)\n\n        // Clear form data after successful submission\n        setDate('')\n        setTime('')\n        setSelectedAccountIds([])\n        setValidationErrors([])\n      } else {\n        // Handle API error response\n        console.error('API Error:', responseData)\n        const errorMessage = responseData.error || responseData.message || 'Failed to create post'\n        \n        setApiResponse({\n          success: false,\n          error: errorMessage,\n          message: responseData.message || 'An error occurred while creating the post'\n        })\n        setShowResponse(true)\n\n        // Show notification\n        if ((window as any).showNotification) {\n          (window as any).showNotification({\n            type: 'error',\n            title: 'Post Failed',\n            message: errorMessage,\n            duration: 8000\n          })\n        }\n      }\n    } catch (error) {\n      console.error('Error creating post:', error)\n      const errorMessage = 'Failed to create post. Please try again.'\n      \n      setApiResponse({\n        success: false,\n        error: errorMessage,\n        message: errorMessage\n      })\n      setShowResponse(true)\n\n      // Show notification for network/other errors\n      if ((window as any).showNotification) {\n        (window as any).showNotification({\n          type: 'error',\n          title: 'Network Error',\n          message: errorMessage,\n          duration: 8000\n        })\n      }\n    } finally {\n      setIsSubmitting(false)\n    }\n  }, [validateForm, date, time, selectedAccountIds, video, caption, userId, selectedAccounts, onPost, minDate])\n\n  const handleClose = useCallback(() => {\n    setDate('')\n    setTime('')\n    setSelectedAccountIds([])\n    setIsSubmitting(false)\n    setApiResponse(null)\n    setShowResponse(false)\n    setValidationErrors([])\n    onClose()\n  }, [onClose])\n\n  return {\n    // State\n    date,\n    setDate: handleDateChange,\n    time,\n    setTime: handleTimeChange,\n    selectedAccountIds,\n    matchedSelectedAccounts,\n    isSubmitting,\n    apiResponse,\n    showResponse,\n    validationErrors,\n    minDate,\n    minTime: minTimeForToday,\n    timeAdjustmentMessage,\n    \n    // Handlers\n    handleAccountToggle,\n    handleSubmit,\n    handleClose,\n    validateForm\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/edit-caption-modal.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect } from 'react'\nimport { X } from 'lucide-react'\nimport { ConnectedAccount } from '@/types/post-types'\n\ninterface EditCaptionModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSave: (caption: string) => void\n  account: ConnectedAccount | null\n  initialCaption: string\n}\n\nexport default function EditCaptionModal({\n  isOpen,\n  onClose,\n  onSave,\n  account,\n  initialCaption\n}: EditCaptionModalProps) {\n  const [caption, setCaption] = useState(initialCaption)\n\n  useEffect(() => {\n    if (isOpen) {\n      setCaption(initialCaption)\n    }\n  }, [isOpen, initialCaption])\n\n  if (!isOpen || !account) return null\n\n  const handleSave = () => {\n    onSave(caption)\n    onClose()\n  }\n\n  const handleCancel = () => {\n    setCaption(initialCaption)\n    onClose()\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[70] p-4\">\n      <div className=\"bg-white rounded-xl max-w-md w-full\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-bold text-black\">Edit Caption</h2>\n          <button\n            type=\"button\"\n            onClick={handleCancel}\n            className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors duration-200\"\n          >\n            <X className=\"w-5 h-5 text-black\" />\n          </button>\n        </div>\n        \n        <div className=\"p-6 space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Account: <span className=\"font-semibold\">{account.name}</span>\n            </label>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Caption <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              value={caption}\n              onChange={(e) => setCaption(e.target.value)}\n              placeholder=\"Enter caption for this account...\"\n              rows={6}\n              maxLength={account.post_maxlength || 2200}\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5046E5] resize-none text-sm text-black\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              {caption.length} / {account.post_maxlength || 2200} characters\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-200\">\n          <button\n            type=\"button\"\n            onClick={handleCancel}\n            className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 font-medium\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleSave}\n            className=\"px-6 py-2 bg-[#5046E5] text-white rounded-lg hover:bg-[#4338CA] transition-colors duration-200 font-medium\"\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAce,SAAS,iBAAiB,EACvC,MAAM,EACN,OAAO,EACP,MAAM,EACN,OAAO,EACP,cAAc,EACQ;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6LAAQ,EAAC;IAEvC,IAAA,8LAAS;sCAAC;YACR,IAAI,QAAQ;gBACV,WAAW;YACb;QACF;qCAAG;QAAC;QAAQ;KAAe;IAE3B,IAAI,CAAC,UAAU,CAAC,SAAS,OAAO;IAEhC,MAAM,aAAa;QACjB,OAAO;QACP;IACF;IAEA,MAAM,eAAe;QACnB,WAAW;QACX;IACF;IAEA,qBACE,iNAAC;QAAI,WAAU;kBACb,cAAA,iNAAC;YAAI,WAAU;;8BACb,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BAAG,WAAU;sCAA+B;;;;;;sCAC7C,iNAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAU;sCAEV,cAAA,iNAAC,wNAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIjB,iNAAC;oBAAI,WAAU;8BACb,cAAA,iNAAC;;0CACC,iNAAC;gCAAM,WAAU;;oCAA+C;kDACrD,iNAAC;wCAAK,WAAU;kDAAiB,QAAQ,IAAI;;;;;;;;;;;;0CAExD,iNAAC;gCAAM,WAAU;;oCAA+C;kDACtD,iNAAC;wCAAK,WAAU;kDAAe;;;;;;;;;;;;0CAEzC,iNAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gCAC1C,aAAY;gCACZ,MAAM;gCACN,WAAW,QAAQ,cAAc,IAAI;gCACrC,WAAU;;;;;;0CAEZ,iNAAC;gCAAE,WAAU;;oCACV,QAAQ,MAAM;oCAAC;oCAAI,QAAQ,cAAc,IAAI;oCAAK;;;;;;;;;;;;;;;;;;8BAKzD,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,iNAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAlFwB;KAAA"}},
    {"offset": {"line": 609, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/account-selection.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState } from 'react'\nimport { Edit2 } from 'lucide-react'\nimport { getAccountTypeIcon } from '@/utils/socialMediaIcons'\nimport { ConnectedAccount } from '@/types/post-types'\nimport EditCaptionModal from './edit-caption-modal'\n\ninterface AccountSelectionProps {\n  selectedAccounts: ConnectedAccount[]\n  selectedAccountIds: number[]\n  isSubmitting: boolean\n  onAccountToggle: (accountId: number) => void\n  accountCaptions?: Record<number, string>\n  onCaptionUpdate?: (accountId: number, caption: string) => void\n}\n\nexport default function AccountSelection({\n  selectedAccounts,\n  selectedAccountIds,\n  isSubmitting,\n  onAccountToggle,\n  accountCaptions = {},\n  onCaptionUpdate\n}: AccountSelectionProps) {\n  const [editingAccount, setEditingAccount] = useState<ConnectedAccount | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n\n  if (selectedAccounts.length === 0) {\n    return null\n  }\n\n  const handleEditClick = (e: React.MouseEvent, account: ConnectedAccount) => {\n    e.stopPropagation()\n    if (!isSubmitting) {\n      setEditingAccount(account)\n      setIsModalOpen(true)\n    }\n  }\n\n  const handleSaveCaption = (caption: string) => {\n    if (editingAccount && onCaptionUpdate) {\n      onCaptionUpdate(editingAccount.id, caption)\n    }\n  }\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false)\n    setEditingAccount(null)\n  }\n\n  const getAccountCaption = (account: ConnectedAccount): string => {\n    return accountCaptions[account.id] || ''\n  }\n\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n        Select accounts to post to <span className=\"text-red-500\">*</span> ({selectedAccountIds.length} selected)\n      </label>\n      <div className=\"space-y-2\">\n        {selectedAccounts.map((account) => {\n          const caption = getAccountCaption(account)\n          const isSelected = selectedAccountIds.includes(account.id)\n          \n          return (\n            <div key={account.id}>\n              <div \n                className={`flex items-start gap-3 p-3 rounded-lg border-2 transition-colors ${\n                  isSubmitting \n                    ? 'cursor-not-allowed opacity-50'\n                    : 'cursor-pointer'\n                } ${\n                  isSelected\n                    ? 'border-[#5046E5] bg-blue-50'\n                    : 'border-gray-200 bg-gray-50 hover:border-gray-300'\n                }`}\n                onClick={() => !isSubmitting && onAccountToggle(account.id)}\n              >\n                {/* Social Media Icon */}\n                {getAccountTypeIcon(account.type)}\n                \n                {/* Account Info */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center justify-between gap-2 mb-1\">\n                    <p className=\"text-sm font-medium text-gray-800\">{account.name}</p>\n                    {isSelected && onCaptionUpdate && (\n                      <button\n                        type=\"button\"\n                        onClick={(e) => handleEditClick(e, account)}\n                        className=\"flex-shrink-0 p-1 hover:bg-blue-100 rounded transition-colors\"\n                        title=\"Edit caption\"\n                      >\n                        <Edit2 className=\"w-4 h-4 text-[#5046E5]\" />\n                      </button>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-gray-500 mb-1\">{account._type}</p>\n                  {isSelected && caption && (\n                    <div className=\"mt-2 p-2 bg-white rounded border border-gray-200\">\n                      <p className=\"text-xs text-gray-600 line-clamp-2\">{caption}</p>\n                    </div>\n                  )}\n                  {isSelected && !caption && (\n                    <p className=\"text-xs text-gray-400 italic mt-1\">No caption set</p>\n                  )}\n                </div>\n                \n                {/* Checkbox */}\n                <div className={`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 mt-1 ${\n                  isSelected\n                    ? 'border-[#5046E5] bg-[#5046E5]'\n                    : 'border-gray-300'\n                }`}>\n                  {isSelected && (\n                    <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                    </svg>\n                  )}\n                </div>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n\n      {/* Edit Caption Modal */}\n      {editingAccount && (\n        <EditCaptionModal\n          isOpen={isModalOpen}\n          onClose={handleCloseModal}\n          onSave={handleSaveCaption}\n          account={editingAccount}\n          initialCaption={getAccountCaption(editingAccount)}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;;;AANA;;;;;AAiBe,SAAS,iBAAiB,EACvC,gBAAgB,EAChB,kBAAkB,EAClB,YAAY,EACZ,eAAe,EACf,kBAAkB,CAAC,CAAC,EACpB,eAAe,EACO;;IACtB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,6LAAQ,EAA0B;IAC9E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6LAAQ,EAAC;IAE/C,IAAI,iBAAiB,MAAM,KAAK,GAAG;QACjC,OAAO;IACT;IAEA,MAAM,kBAAkB,CAAC,GAAqB;QAC5C,EAAE,eAAe;QACjB,IAAI,CAAC,cAAc;YACjB,kBAAkB;YAClB,eAAe;QACjB;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,IAAI,kBAAkB,iBAAiB;YACrC,gBAAgB,eAAe,EAAE,EAAE;QACrC;IACF;IAEA,MAAM,mBAAmB;QACvB,eAAe;QACf,kBAAkB;IACpB;IAEA,MAAM,oBAAoB,CAAC;QACzB,OAAO,eAAe,CAAC,QAAQ,EAAE,CAAC,IAAI;IACxC;IAEA,qBACE,iNAAC;;0BACC,iNAAC;gBAAM,WAAU;;oBAA+C;kCACnC,iNAAC;wBAAK,WAAU;kCAAe;;;;;;oBAAQ;oBAAG,mBAAmB,MAAM;oBAAC;;;;;;;0BAEjG,iNAAC;gBAAI,WAAU;0BACZ,iBAAiB,GAAG,CAAC,CAAC;oBACrB,MAAM,UAAU,kBAAkB;oBAClC,MAAM,aAAa,mBAAmB,QAAQ,CAAC,QAAQ,EAAE;oBAEzD,qBACE,iNAAC;kCACC,cAAA,iNAAC;4BACC,WAAW,CAAC,iEAAiE,EAC3E,eACI,kCACA,iBACL,CAAC,EACA,aACI,gCACA,oDACJ;4BACF,SAAS,IAAM,CAAC,gBAAgB,gBAAgB,QAAQ,EAAE;;gCAGzD,IAAA,8KAAkB,EAAC,QAAQ,IAAI;8CAGhC,iNAAC;oCAAI,WAAU;;sDACb,iNAAC;4CAAI,WAAU;;8DACb,iNAAC;oDAAE,WAAU;8DAAqC,QAAQ,IAAI;;;;;;gDAC7D,cAAc,iCACb,iNAAC;oDACC,MAAK;oDACL,SAAS,CAAC,IAAM,gBAAgB,GAAG;oDACnC,WAAU;oDACV,OAAM;8DAEN,cAAA,iNAAC,kOAAK;wDAAC,WAAU;;;;;;;;;;;;;;;;;sDAIvB,iNAAC;4CAAE,WAAU;sDAA8B,QAAQ,KAAK;;;;;;wCACvD,cAAc,yBACb,iNAAC;4CAAI,WAAU;sDACb,cAAA,iNAAC;gDAAE,WAAU;0DAAsC;;;;;;;;;;;wCAGtD,cAAc,CAAC,yBACd,iNAAC;4CAAE,WAAU;sDAAoC;;;;;;;;;;;;8CAKrD,iNAAC;oCAAI,WAAW,CAAC,6EAA6E,EAC5F,aACI,kCACA,mBACJ;8CACC,4BACC,iNAAC;wCAAI,WAAU;wCAAqB,MAAK;wCAAe,SAAQ;kDAC9D,cAAA,iNAAC;4CAAK,UAAS;4CAAU,GAAE;4CAAqH,UAAS;;;;;;;;;;;;;;;;;;;;;;uBAlDzJ,QAAQ,EAAE;;;;;gBAyDxB;;;;;;YAID,gCACC,iNAAC,sLAAgB;gBACf,QAAQ;gBACR,SAAS;gBACT,QAAQ;gBACR,SAAS;gBACT,gBAAgB,kBAAkB;;;;;;;;;;;;AAK5C;GAzHwB;KAAA"}},
    {"offset": {"line": 830, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/scheduled-post/DatePicker.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from \"react\";\nimport { DatePicker as MuiDatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { LocalizationProvider } from \"@mui/x-date-pickers/LocalizationProvider\";\nimport { AdapterDayjs } from \"@mui/x-date-pickers/AdapterDayjs\";\nimport dayjs, { Dayjs } from \"dayjs\";\n\ninterface DatePickerProps {\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  minDate?: string;\n}\n\nexport default function DatePicker({ value, onChange, placeholder = \"Select Day\", disabled = false, minDate }: DatePickerProps) {\n  const [open, setOpen] = useState(false);\n\n  const handleChange = (newValue: Dayjs | null) => {\n    if (newValue) {\n      onChange(newValue.format('YYYY-MM-DD'));\n    } else {\n      onChange('');\n    }\n  };\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDayjs}>\n      <MuiDatePicker\n        value={value ? dayjs(value) : null}\n        onChange={handleChange}\n        open={open}\n        onOpen={() => setOpen(true)}\n        onClose={() => setOpen(false)}\n        disabled={disabled}\n        minDate={minDate ? dayjs(minDate) : undefined}\n        slotProps={{\n          textField: {\n            placeholder: placeholder,\n            fullWidth: true,\n            onClick: () => setOpen(true),\n            sx: {\n              backgroundColor: '#EEEEEE',\n              borderRadius: '8px',\n              '& .MuiOutlinedInput-notchedOutline': {\n                border: 'none',\n              },\n              '&:hover .MuiOutlinedInput-notchedOutline': {\n                border: 'none',\n              },\n              '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n                border: '2px solid #5046E5',\n              },\n              '& input': {\n                padding: '10px 16px',\n                fontSize: '18px',\n                color: '#11101066',\n                cursor: 'pointer',\n                '&::placeholder': {\n                  color: '#11101066',\n                  opacity: 1,\n                }\n              }\n            }\n          }\n        }}\n        sx={{\n          '& .MuiInputAdornment-root': {\n            color: '#11101066',\n          },\n          '& .MuiIconButton-root': {\n            color: '#11101066',\n          }\n        }}\n      />\n    </LocalizationProvider>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAee,SAAS,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,cAAc,YAAY,EAAE,WAAW,KAAK,EAAE,OAAO,EAAmB;;IAC5H,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6LAAQ,EAAC;IAEjC,MAAM,eAAe,CAAC;QACpB,IAAI,UAAU;YACZ,SAAS,SAAS,MAAM,CAAC;QAC3B,OAAO;YACL,SAAS;QACX;IACF;IAEA,qBACE,iNAAC,mPAAoB;QAAC,aAAa,2NAAY;kBAC7C,cAAA,iNAAC,qNAAa;YACZ,OAAO,QAAQ,IAAA,uKAAK,EAAC,SAAS;YAC9B,UAAU;YACV,MAAM;YACN,QAAQ,IAAM,QAAQ;YACtB,SAAS,IAAM,QAAQ;YACvB,UAAU;YACV,SAAS,UAAU,IAAA,uKAAK,EAAC,WAAW;YACpC,WAAW;gBACT,WAAW;oBACT,aAAa;oBACb,WAAW;oBACX,SAAS,IAAM,QAAQ;oBACvB,IAAI;wBACF,iBAAiB;wBACjB,cAAc;wBACd,sCAAsC;4BACpC,QAAQ;wBACV;wBACA,4CAA4C;4BAC1C,QAAQ;wBACV;wBACA,kDAAkD;4BAChD,QAAQ;wBACV;wBACA,WAAW;4BACT,SAAS;4BACT,UAAU;4BACV,OAAO;4BACP,QAAQ;4BACR,kBAAkB;gCAChB,OAAO;gCACP,SAAS;4BACX;wBACF;oBACF;gBACF;YACF;YACA,IAAI;gBACF,6BAA6B;oBAC3B,OAAO;gBACT;gBACA,yBAAyB;oBACvB,OAAO;gBACT;YACF;;;;;;;;;;;AAIR;GA9DwB;KAAA"}},
    {"offset": {"line": 928, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/post-confirmation-modal.tsx"],"sourcesContent":["'use client'\n\nimport React from 'react'\nimport { X, CheckCircle } from 'lucide-react'\nimport { useModalScrollLock } from '@/hooks/useModalScrollLock'\n\ninterface PostConfirmationModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onConfirm: () => void\n  isSubmitting?: boolean\n  selectedAccountsCount?: number\n  videoTitle?: string\n  date?: string\n  time?: string\n  postNow?: boolean\n}\n\nexport default function PostConfirmationModal({ \n  isOpen, \n  onClose, \n  onConfirm, \n  isSubmitting = false,\n  selectedAccountsCount,\n  videoTitle,\n  date,\n  time,\n  postNow = false\n}: PostConfirmationModalProps) {\n  useModalScrollLock(isOpen)\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-[70] p-4\">\n      <div className=\"bg-white rounded-xl p-6 max-w-md w-full mx-4 relative\">\n        <button\n          onClick={onClose}\n          disabled={isSubmitting}\n          className=\"absolute top-4 right-4 text-black hover:text-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          <X className=\"w-6 h-6\" />\n        </button>\n\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <CheckCircle className=\"w-8 h-8 text-blue-600\" />\n          </div>\n\n          <h2 className=\"text-xl font-semibold text-[#282828] mb-2\">{postNow ? 'Confirm Post' : 'Confirm Schedule'}</h2>\n\n          <div className=\"text-[#5F5F5F] mb-6 space-y-2\">\n            <p>{postNow ? 'Are you sure you want to post this right now?' : 'Are you sure you want to schedule this post?'}</p>\n            {selectedAccountsCount !== undefined && selectedAccountsCount > 0 && (\n              <p className=\"text-sm\">\n                This will published to {selectedAccountsCount} account{selectedAccountsCount > 1 ? 's' : ''}.\n              </p>\n            )}\n            {videoTitle && (\n              <p className=\"font-medium text-[#282828]\">\n                Video: &quot;{videoTitle}&quot;\n              </p>\n            )}\n            {!postNow && date && time && (\n              <p className=\"text-sm\">\n                Scheduled for: {date} at {time}\n              </p>\n            )}\n            <p className=\"text-sm text-red-500\">\n              <span className=\"font-bold\">Note:</span> After confirmation, the description and time will no longer be editable.\n            </p>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={isSubmitting}\n              className=\"flex-1 px-4 py-2 border-2 border-[#5F5F5F] text-[#5F5F5F] rounded-full font-semibold text-base transition-all duration-300 hover:bg-[#F5F5F5] disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              onClick={onConfirm}\n              disabled={isSubmitting}\n              className=\"flex-1 px-4 py-2 bg-[#5046E5] text-white rounded-full font-semibold text-base transition-all duration-300 hover:bg-[#4338CA] focus:outline-none focus:ring-4 focus:ring-[#5046E5]/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n            >\n              {isSubmitting && (\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              )}\n              {isSubmitting ? 'Posting...' : 'Confirm'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;;;AAJA;;;AAkBe,SAAS,sBAAsB,EAC5C,MAAM,EACN,OAAO,EACP,SAAS,EACT,eAAe,KAAK,EACpB,qBAAqB,EACrB,UAAU,EACV,IAAI,EACJ,IAAI,EACJ,UAAU,KAAK,EACY;;IAC3B,IAAA,+KAAkB,EAAC;IAEnB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,iNAAC;QAAI,WAAU;kBACb,cAAA,iNAAC;YAAI,WAAU;;8BACb,iNAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAU;8BAEV,cAAA,iNAAC,wNAAC;wBAAC,WAAU;;;;;;;;;;;8BAGf,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BAAI,WAAU;sCACb,cAAA,iNAAC,iQAAW;gCAAC,WAAU;;;;;;;;;;;sCAGzB,iNAAC;4BAAG,WAAU;sCAA6C,UAAU,iBAAiB;;;;;;sCAEtF,iNAAC;4BAAI,WAAU;;8CACb,iNAAC;8CAAG,UAAU,kDAAkD;;;;;;gCAC/D,0BAA0B,aAAa,wBAAwB,mBAC9D,iNAAC;oCAAE,WAAU;;wCAAU;wCACG;wCAAsB;wCAAS,wBAAwB,IAAI,MAAM;wCAAG;;;;;;;gCAG/F,4BACC,iNAAC;oCAAE,WAAU;;wCAA6B;wCAC1B;wCAAW;;;;;;;gCAG5B,CAAC,WAAW,QAAQ,sBACnB,iNAAC;oCAAE,WAAU;;wCAAU;wCACL;wCAAK;wCAAK;;;;;;;8CAG9B,iNAAC;oCAAE,WAAU;;sDACX,iNAAC;4CAAK,WAAU;sDAAY;;;;;;wCAAY;;;;;;;;;;;;;sCAI5C,iNAAC;4BAAI,WAAU;;8CACb,iNAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU;oCACV,WAAU;8CACX;;;;;;8CAGD,iNAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU;oCACV,WAAU;;wCAET,8BACC,iNAAC;4CAAI,WAAU;;;;;;wCAEhB,eAAe,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7C;GAhFwB;;QAWtB,+KAAkB;;;KAXI"}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/create-post-modal.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState, useEffect, useCallback } from 'react'\nimport { X } from 'lucide-react'\nimport { CreatePostModalProps } from '@/types/post-types'\nimport { useCreatePost } from '@/hooks/useCreatePost'\nimport AccountSelection from './account-selection'\nimport DatePicker from '../scheduled-post/DatePicker'\nimport PostConfirmationModal from './post-confirmation-modal'\nimport { API_CONFIG, getApiUrl, getAuthenticatedHeaders } from '@/lib/config'\nimport { useSelector } from 'react-redux'\nimport { RootState } from '@/store'\n\n// Helper function to map account type to caption field name\nconst getCaptionFieldName = (accountType: string): 'instagram_caption' | 'facebook_caption' | 'linkedin_caption' | 'twitter_caption' | 'tiktok_caption' | 'youtube_caption' | null => {\n  const typeMap: Record<string, 'instagram_caption' | 'facebook_caption' | 'linkedin_caption' | 'twitter_caption' | 'tiktok_caption' | 'youtube_caption'> = {\n    'instagram.api': 'instagram_caption',\n    'facebook.page': 'facebook_caption',\n    'linkedin.profile': 'linkedin_caption',\n    'twitter.profile': 'twitter_caption',\n    'tiktok.profile': 'tiktok_caption',\n    'google.youtube': 'youtube_caption'\n  }\n  return typeMap[accountType] || null\n}\n\nexport default function CreatePostModal({ \n  isOpen, \n  onClose, \n  onPost, \n  selectedAccounts, \n  video \n}: CreatePostModalProps) {\n  // State to manage captions per account (by account ID)\n  const [accountCaptions, setAccountCaptions] = useState<Record<number, string>>({})\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false)\n  const [postNow, setPostNow] = useState(false)\n  const [isPostingNow, setIsPostingNow] = useState(false) // Loading state for \"Post now!\" mode\n  \n  // Get user ID from Redux store for direct API call\n  const userId = useSelector((state: RootState) => state.user.user?.id)\n\n  // Initialize captions from video's socialMediaCaptions\n  useEffect(() => {\n    if (video?.socialMediaCaptions && selectedAccounts.length > 0) {\n      const initialCaptions: Record<number, string> = {}\n      \n      selectedAccounts.forEach((account) => {\n        const captionField = getCaptionFieldName(account.type)\n        if (captionField && video.socialMediaCaptions?.[captionField]) {\n          initialCaptions[account.id] = video.socialMediaCaptions[captionField] || ''\n        }\n      })\n      \n      setAccountCaptions(initialCaptions)\n    }\n  }, [video?.socialMediaCaptions, selectedAccounts])\n\n  // Handle caption update\n  const handleCaptionUpdate = useCallback((accountId: number, caption: string) => {\n    setAccountCaptions((prev) => ({\n      ...prev,\n      [accountId]: caption\n    }))\n\n    // Also update the video's socialMediaCaptions if video prop is mutable\n    if (video) {\n      const account = selectedAccounts.find((acc) => acc.id === accountId)\n      if (account) {\n        const captionField = getCaptionFieldName(account.type)\n        if (captionField && video.socialMediaCaptions) {\n          // Update the caption in video's socialMediaCaptions\n          (video.socialMediaCaptions as any)[captionField] = caption\n        }\n      }\n    }\n  }, [video, selectedAccounts])\n\n  const {\n    date,\n    setDate,\n    time,\n    setTime,\n    selectedAccountIds,\n    matchedSelectedAccounts,\n    isSubmitting,\n    validationErrors,\n    minDate,\n    minTime,\n    timeAdjustmentMessage,\n    handleAccountToggle,\n    handleSubmit,\n    handleClose,\n    validateForm\n  } = useCreatePost({ isOpen, onClose, onPost, selectedAccounts, video })\n\n  const handleFormSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    // If \"Post now!\" is enabled, skip validation and go directly to confirmation\n    // Time will be calculated fresh when user clicks Confirm\n    if (postNow) {\n      setIsConfirmModalOpen(true)\n      return\n    }\n    \n    // Normal flow - check validation errors for manually selected date/time\n    if (validationErrors.length > 0) {\n      return\n    }\n    setIsConfirmModalOpen(true)\n  }\n\n  const handleConfirmPost = async () => {\n    setIsConfirmModalOpen(false)\n    \n    // If \"Post now!\" is enabled, calculate fresh current time + 3 minutes and call API directly\n    // This bypasses validation and ensures immediate posting with current time\n    if (postNow) {\n      // Set loading state\n      setIsPostingNow(true)\n      \n      try {\n        // Calculate fresh time at the moment of confirmation\n        const now = new Date()\n        const futureTime = new Date(now.getTime() + 3 * 60 * 1000) // Current time + 3 minutes\n        \n        // Format local date as YYYY-MM-DD\n        const year = futureTime.getFullYear()\n        const month = String(futureTime.getMonth() + 1).padStart(2, '0')\n        const day = String(futureTime.getDate()).padStart(2, '0')\n        const localDateString = `${year}-${month}-${day}`\n        \n        // Format local time as HH:mm\n        const hours = String(futureTime.getHours()).padStart(2, '0')\n        const minutes = String(futureTime.getMinutes()).padStart(2, '0')\n        const localTimeString = `${hours}:${minutes}`\n        \n        // Create local date-time from calculated date and time\n        const formattedTime = `${localTimeString}:00`\n        const localDateTime = `${localDateString}T${formattedTime}`\n        const localDate = new Date(localDateTime)\n        \n        // Convert to UTC ISO string\n        const utcTime = localDate.toISOString()\n        const utcDate = utcTime.split('T')[0] // YYYY-MM-DD format\n        const timeOnly = utcTime.split('T')[1].split('.')[0]\n        \n        // Prepare request body with calculated UTC time\n        const requestBody = {\n          accountIds: selectedAccountIds,\n          name: video?.title || '',\n          videoUrl: video?.videoUrl || video?.url || '',\n          date: utcDate,\n          time: timeOnly,\n          caption: 'Caption',\n          userId: userId,\n          selectedAccounts: selectedAccounts.filter(account => selectedAccountIds.includes(account.id)),\n          instagram_caption: accountCaptions[selectedAccounts.find(acc => acc.type === 'instagram.api')?.id || 0] || video?.socialMediaCaptions?.instagram_caption || '',\n          facebook_caption: accountCaptions[selectedAccounts.find(acc => acc.type === 'facebook.page')?.id || 0] || video?.socialMediaCaptions?.facebook_caption || '',\n          linkedin_caption: accountCaptions[selectedAccounts.find(acc => acc.type === 'linkedin.profile')?.id || 0] || video?.socialMediaCaptions?.linkedin_caption || '',\n          twitter_caption: accountCaptions[selectedAccounts.find(acc => acc.type === 'twitter.profile')?.id || 0] || video?.socialMediaCaptions?.twitter_caption || '',\n          tiktok_caption: accountCaptions[selectedAccounts.find(acc => acc.type === 'tiktok.profile')?.id || 0] || video?.socialMediaCaptions?.tiktok_caption || '',\n          youtube_caption: accountCaptions[selectedAccounts.find(acc => acc.type === 'google.youtube')?.id || 0] || video?.socialMediaCaptions?.youtube_caption || ''\n        }\n        \n        // Call API directly, bypassing validation\n        const response = await fetch(getApiUrl(API_CONFIG.ENDPOINTS.SOCIALBU.MEDIA_CREATE_POST), {\n          method: 'POST',\n          headers: getAuthenticatedHeaders(),\n          body: JSON.stringify(requestBody)\n        })\n        \n        const responseData = await response.json()\n        \n        if (response.ok && responseData.success) {\n          // Show success notification\n          if ((window as any).showNotification) {\n            (window as any).showNotification({\n              type: 'success',\n              title: 'Post Created Successfully',\n              message: 'Your post has been scheduled successfully!',\n              duration: 5000\n            })\n          }\n          \n          // Call the original onPost callback\n          const selectedAccountsForPost = selectedAccounts.filter(account => \n            selectedAccountIds.includes(account.id)\n          )\n          const postData = {\n            date: localDateString,\n            time: localTimeString,\n            caption: '',\n            accounts: selectedAccountsForPost,\n            video\n          }\n          onPost(postData)\n          \n          // Close modal\n          handleClose()\n        } else {\n          // Handle API error\n          const errorMessage = responseData.error || responseData.message || 'Failed to create post'\n          if ((window as any).showNotification) {\n            (window as any).showNotification({\n              type: 'error',\n              title: 'Post Failed',\n              message: errorMessage,\n              duration: 8000\n            })\n          }\n        }\n      } catch (error) {\n        console.error('Error creating post:', error)\n        const errorMessage = 'Failed to create post. Please try again.'\n        if ((window as any).showNotification) {\n          (window as any).showNotification({\n            type: 'error',\n            title: 'Network Error',\n            message: errorMessage,\n            duration: 8000\n          })\n        }\n      } finally {\n        // Always reset loading state\n        setIsPostingNow(false)\n      }\n    } else {\n      // MANUAL MODE - Original logic preserved exactly as before\n      // Uses the hook's handleSubmit which includes all validation, time conversion, etc.\n      // This flow is completely unchanged from the original implementation\n      const syntheticEvent = {\n        preventDefault: () => {}\n      } as React.FormEvent\n      handleSubmit(syntheticEvent)\n    }\n  }\n\n  const handleCancelPost = () => {\n    setIsConfirmModalOpen(false)\n  }\n\n  // Helper function to calculate and set current time + 3 minutes\n  const calculateAndSetPostNowTime = useCallback(() => {\n    // Get current local time\n    const now = new Date()\n    const futureTime = new Date(now.getTime() + 3 * 60 * 1000) // Add 3 minutes\n    \n    // Format local date as YYYY-MM-DD\n    const year = futureTime.getFullYear()\n    const month = String(futureTime.getMonth() + 1).padStart(2, '0')\n    const day = String(futureTime.getDate()).padStart(2, '0')\n    const localDateString = `${year}-${month}-${day}`\n    \n    // Format local time as HH:mm\n    const hours = String(futureTime.getHours()).padStart(2, '0')\n    const minutes = String(futureTime.getMinutes()).padStart(2, '0')\n    const localTimeString = `${hours}:${minutes}`\n    \n    // Set the date and time (will be converted to UTC in handleSubmit)\n    setDate(localDateString)\n    setTime(localTimeString)\n  }, [setDate, setTime])\n\n  // Handle \"Post now!\" toggle\n  const handlePostNowToggle = useCallback((enabled: boolean) => {\n    setPostNow(enabled)\n    \n    // When toggled ON, set initial date/time for validation\n    // This ensures validation passes, but we'll recalculate fresh time on Post click\n    if (enabled) {\n      calculateAndSetPostNowTime()\n    }\n  }, [calculateAndSetPostNowTime])\n\n  // Reset postNow when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      setPostNow(false)\n    }\n  }, [isOpen])\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4\">\n      <div className=\"bg-white rounded-xl max-w-md w-full max-h-[600px] h-full overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-2xl font-bold text-black\">Create Post</h2>\n          <button\n            onClick={handleClose}\n            className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors duration-200\"\n          >\n            <X className=\"w-5 h-5 text-black\" />\n          </button>\n        </div>\n        <form onSubmit={handleFormSubmit} className=\"p-6 space-y-6\">\n          {/* Post Now Toggle */}\n          <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200\">\n            <label className=\"flex items-center gap-3 cursor-pointer\">\n              <span className=\"text-sm font-bold text-gray-700\">Post now!</span>\n            </label>\n            <button\n              type=\"button\"\n              onClick={() => handlePostNowToggle(!postNow)}\n              className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[#5046E5] focus:ring-offset-2 ${\n                postNow ? 'bg-[#5046E5]' : 'bg-gray-300'\n              }`}\n              disabled={isSubmitting}\n            >\n              <span\n                className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ease-in-out ${\n                  postNow ? 'translate-x-6' : 'translate-x-1'\n                }`}\n              />\n            </button>\n          </div>\n\n          {/* Date and Time inputs - hidden when Post now! is enabled */}\n          {!postNow && (\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Date <span className=\"text-red-500\">*</span>\n                </label>\n                <DatePicker\n                  value={date}\n                  onChange={setDate}\n                  placeholder=\"Select Date\"\n                  disabled={isSubmitting}\n                  minDate={minDate}\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Time <span className=\"text-red-500\">*</span>\n                </label>\n                <div>\n                  <input\n                    type=\"time\"\n                    value={time}\n                    onChange={(e) => setTime(e.target.value)}\n                    onClick={(e) => e.currentTarget.showPicker && e.currentTarget.showPicker()}\n                    min={date === minDate ? minTime : undefined}\n                    disabled={isSubmitting}\n                    className=\"w-full px-4 py-3 border-none rounded-md focus:outline-none focus:ring-2 focus:ring-[#5046E5] bg-[#EEEEEE] text-black disabled:opacity-50 disabled:cursor-not-allowed text-md\"\n                    placeholder=\"Select Time\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Time Adjustment Message */}\n          {!postNow && timeAdjustmentMessage && (\n            <div className=\"w-full max-w-md p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n              <div className=\"flex items-start gap-2\">\n                <div className=\"w-4 h-4 bg-blue-500 rounded-full flex-shrink-0 mt-0.5\"></div>\n                <p className=\"text-sm text-blue-700\">{timeAdjustmentMessage}</p>\n              </div>\n            </div>\n          )}\n          <AccountSelection\n            selectedAccounts={selectedAccounts}\n            selectedAccountIds={matchedSelectedAccounts?.map(account => account.id) || selectedAccountIds}\n            isSubmitting={isSubmitting}\n            onAccountToggle={handleAccountToggle}\n            accountCaptions={accountCaptions}\n            onCaptionUpdate={handleCaptionUpdate}\n          />\n          {video && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Video\n              </label>\n              <div className=\"p-3 bg-gray-50 rounded-lg\">\n                <p className=\"text-sm font-medium text-gray-800\">{video.title}</p>\n                <p className=\"text-xs text-gray-500\">Status: {video.status}</p>\n              </div>\n            </div>\n          )}\n          {/* Only show validation errors when postNow is disabled */}\n          {!postNow && validationErrors.length > 0 && (\n            <div className=\"p-4 rounded-lg border-2 border-red-200 bg-red-50\">\n              <h3 className=\"font-semibold text-red-800 mb-2\">Please fix the following errors:</h3>\n              <ul className=\"text-sm text-red-700 space-y-1\">\n                {validationErrors.map((error, index) => (\n                  <li key={index} className=\"flex items-start gap-2\">\n                    <span className=\"text-red-500 mt-0.5\"></span>\n                    <span>{error}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n          <button\n            type=\"submit\"\n            disabled={(isSubmitting || isPostingNow) || selectedAccountIds.length === 0 || (!postNow && validationErrors.length > 0)}\n            className=\"w-full bg-[#5046E5] text-white py-3 px-6 rounded-full font-semibold text-lg hover:bg-[#4338CA] transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {(isSubmitting || isPostingNow) ? (\n              <>\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                {postNow ? 'Posting...' : 'Scheduling...'}\n              </>\n            ) : (!postNow && validationErrors.length > 0) ? (\n              'Continue'\n            ) : (\n              'Post'\n            )}\n          </button>\n        </form>\n      </div>\n\n      <PostConfirmationModal\n        isOpen={isConfirmModalOpen}\n        onClose={handleCancelPost}\n        onConfirm={handleConfirmPost}\n        isSubmitting={isSubmitting}\n        selectedAccountsCount={matchedSelectedAccounts?.length || selectedAccountIds.length}\n        videoTitle={video?.title}\n        date={date}\n        time={time}\n        postNow={postNow}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;AAaA,4DAA4D;AAC5D,MAAM,sBAAsB,CAAC;IAC3B,MAAM,UAAoJ;QACxJ,iBAAiB;QACjB,iBAAiB;QACjB,oBAAoB;QACpB,mBAAmB;QACnB,kBAAkB;QAClB,kBAAkB;IACpB;IACA,OAAO,OAAO,CAAC,YAAY,IAAI;AACjC;AAEe,SAAS,gBAAgB,EACtC,MAAM,EACN,OAAO,EACP,MAAM,EACN,gBAAgB,EAChB,KAAK,EACgB;;IACrB,uDAAuD;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,6LAAQ,EAAyB,CAAC;IAChF,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,6LAAQ,EAAC;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6LAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,6LAAQ,EAAC,OAAO,qCAAqC;;IAE7F,mDAAmD;IACnD,MAAM,SAAS,IAAA,+LAAW;+CAAC,CAAC,QAAqB,MAAM,IAAI,CAAC,IAAI,EAAE;;IAElE,uDAAuD;IACvD,IAAA,8LAAS;qCAAC;YACR,IAAI,OAAO,uBAAuB,iBAAiB,MAAM,GAAG,GAAG;gBAC7D,MAAM,kBAA0C,CAAC;gBAEjD,iBAAiB,OAAO;iDAAC,CAAC;wBACxB,MAAM,eAAe,oBAAoB,QAAQ,IAAI;wBACrD,IAAI,gBAAgB,MAAM,mBAAmB,EAAE,CAAC,aAAa,EAAE;4BAC7D,eAAe,CAAC,QAAQ,EAAE,CAAC,GAAG,MAAM,mBAAmB,CAAC,aAAa,IAAI;wBAC3E;oBACF;;gBAEA,mBAAmB;YACrB;QACF;oCAAG;QAAC,OAAO;QAAqB;KAAiB;IAEjD,wBAAwB;IACxB,MAAM,sBAAsB,IAAA,gMAAW;4DAAC,CAAC,WAAmB;YAC1D;oEAAmB,CAAC,OAAS,CAAC;wBAC5B,GAAG,IAAI;wBACP,CAAC,UAAU,EAAE;oBACf,CAAC;;YAED,uEAAuE;YACvE,IAAI,OAAO;gBACT,MAAM,UAAU,iBAAiB,IAAI;gFAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;;gBAC1D,IAAI,SAAS;oBACX,MAAM,eAAe,oBAAoB,QAAQ,IAAI;oBACrD,IAAI,gBAAgB,MAAM,mBAAmB,EAAE;wBAC7C,oDAAoD;wBACnD,MAAM,mBAAmB,AAAQ,CAAC,aAAa,GAAG;oBACrD;gBACF;YACF;QACF;2DAAG;QAAC;QAAO;KAAiB;IAE5B,MAAM,EACJ,IAAI,EACJ,OAAO,EACP,IAAI,EACJ,OAAO,EACP,kBAAkB,EAClB,uBAAuB,EACvB,YAAY,EACZ,gBAAgB,EAChB,OAAO,EACP,OAAO,EACP,qBAAqB,EACrB,mBAAmB,EACnB,YAAY,EACZ,WAAW,EACX,YAAY,EACb,GAAG,IAAA,qKAAa,EAAC;QAAE;QAAQ;QAAS;QAAQ;QAAkB;IAAM;IAErE,MAAM,mBAAmB,CAAC;QACxB,EAAE,cAAc;QAEhB,6EAA6E;QAC7E,yDAAyD;QACzD,IAAI,SAAS;YACX,sBAAsB;YACtB;QACF;QAEA,wEAAwE;QACxE,IAAI,iBAAiB,MAAM,GAAG,GAAG;YAC/B;QACF;QACA,sBAAsB;IACxB;IAEA,MAAM,oBAAoB;QACxB,sBAAsB;QAEtB,4FAA4F;QAC5F,2EAA2E;QAC3E,IAAI,SAAS;YACX,oBAAoB;YACpB,gBAAgB;YAEhB,IAAI;gBACF,qDAAqD;gBACrD,MAAM,MAAM,IAAI;gBAChB,MAAM,aAAa,IAAI,KAAK,IAAI,OAAO,KAAK,IAAI,KAAK,MAAM,2BAA2B;;gBAEtF,kCAAkC;gBAClC,MAAM,OAAO,WAAW,WAAW;gBACnC,MAAM,QAAQ,OAAO,WAAW,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;gBAC5D,MAAM,MAAM,OAAO,WAAW,OAAO,IAAI,QAAQ,CAAC,GAAG;gBACrD,MAAM,kBAAkB,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;gBAEjD,6BAA6B;gBAC7B,MAAM,QAAQ,OAAO,WAAW,QAAQ,IAAI,QAAQ,CAAC,GAAG;gBACxD,MAAM,UAAU,OAAO,WAAW,UAAU,IAAI,QAAQ,CAAC,GAAG;gBAC5D,MAAM,kBAAkB,GAAG,MAAM,CAAC,EAAE,SAAS;gBAE7C,uDAAuD;gBACvD,MAAM,gBAAgB,GAAG,gBAAgB,GAAG,CAAC;gBAC7C,MAAM,gBAAgB,GAAG,gBAAgB,CAAC,EAAE,eAAe;gBAC3D,MAAM,YAAY,IAAI,KAAK;gBAE3B,4BAA4B;gBAC5B,MAAM,UAAU,UAAU,WAAW;gBACrC,MAAM,UAAU,QAAQ,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,oBAAoB;;gBAC1D,MAAM,WAAW,QAAQ,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBAEpD,gDAAgD;gBAChD,MAAM,cAAc;oBAClB,YAAY;oBACZ,MAAM,OAAO,SAAS;oBACtB,UAAU,OAAO,YAAY,OAAO,OAAO;oBAC3C,MAAM;oBACN,MAAM;oBACN,SAAS;oBACT,QAAQ;oBACR,kBAAkB,iBAAiB,MAAM,CAAC,CAAA,UAAW,mBAAmB,QAAQ,CAAC,QAAQ,EAAE;oBAC3F,mBAAmB,eAAe,CAAC,iBAAiB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,kBAAkB,MAAM,EAAE,IAAI,OAAO,qBAAqB,qBAAqB;oBAC5J,kBAAkB,eAAe,CAAC,iBAAiB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,kBAAkB,MAAM,EAAE,IAAI,OAAO,qBAAqB,oBAAoB;oBAC1J,kBAAkB,eAAe,CAAC,iBAAiB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,qBAAqB,MAAM,EAAE,IAAI,OAAO,qBAAqB,oBAAoB;oBAC7J,iBAAiB,eAAe,CAAC,iBAAiB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,oBAAoB,MAAM,EAAE,IAAI,OAAO,qBAAqB,mBAAmB;oBAC1J,gBAAgB,eAAe,CAAC,iBAAiB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,mBAAmB,MAAM,EAAE,IAAI,OAAO,qBAAqB,kBAAkB;oBACvJ,iBAAiB,eAAe,CAAC,iBAAiB,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,mBAAmB,MAAM,EAAE,IAAI,OAAO,qBAAqB,mBAAmB;gBAC3J;gBAEA,0CAA0C;gBAC1C,MAAM,WAAW,MAAM,MAAM,IAAA,wJAAS,EAAC,yJAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,GAAG;oBACvF,QAAQ;oBACR,SAAS,IAAA,sKAAuB;oBAChC,MAAM,KAAK,SAAS,CAAC;gBACvB;gBAEA,MAAM,eAAe,MAAM,SAAS,IAAI;gBAExC,IAAI,SAAS,EAAE,IAAI,aAAa,OAAO,EAAE;oBACvC,4BAA4B;oBAC5B,IAAI,AAAC,OAAe,gBAAgB,EAAE;wBACnC,OAAe,gBAAgB,CAAC;4BAC/B,MAAM;4BACN,OAAO;4BACP,SAAS;4BACT,UAAU;wBACZ;oBACF;oBAEA,oCAAoC;oBACpC,MAAM,0BAA0B,iBAAiB,MAAM,CAAC,CAAA,UACtD,mBAAmB,QAAQ,CAAC,QAAQ,EAAE;oBAExC,MAAM,WAAW;wBACf,MAAM;wBACN,MAAM;wBACN,SAAS;wBACT,UAAU;wBACV;oBACF;oBACA,OAAO;oBAEP,cAAc;oBACd;gBACF,OAAO;oBACL,mBAAmB;oBACnB,MAAM,eAAe,aAAa,KAAK,IAAI,aAAa,OAAO,IAAI;oBACnE,IAAI,AAAC,OAAe,gBAAgB,EAAE;wBACnC,OAAe,gBAAgB,CAAC;4BAC/B,MAAM;4BACN,OAAO;4BACP,SAAS;4BACT,UAAU;wBACZ;oBACF;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,MAAM,eAAe;gBACrB,IAAI,AAAC,OAAe,gBAAgB,EAAE;oBACnC,OAAe,gBAAgB,CAAC;wBAC/B,MAAM;wBACN,OAAO;wBACP,SAAS;wBACT,UAAU;oBACZ;gBACF;YACF,SAAU;gBACR,6BAA6B;gBAC7B,gBAAgB;YAClB;QACF,OAAO;YACL,2DAA2D;YAC3D,oFAAoF;YACpF,qEAAqE;YACrE,MAAM,iBAAiB;gBACrB,gBAAgB,KAAO;YACzB;YACA,aAAa;QACf;IACF;IAEA,MAAM,mBAAmB;QACvB,sBAAsB;IACxB;IAEA,gEAAgE;IAChE,MAAM,6BAA6B,IAAA,gMAAW;mEAAC;YAC7C,yBAAyB;YACzB,MAAM,MAAM,IAAI;YAChB,MAAM,aAAa,IAAI,KAAK,IAAI,OAAO,KAAK,IAAI,KAAK,MAAM,gBAAgB;;YAE3E,kCAAkC;YAClC,MAAM,OAAO,WAAW,WAAW;YACnC,MAAM,QAAQ,OAAO,WAAW,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;YAC5D,MAAM,MAAM,OAAO,WAAW,OAAO,IAAI,QAAQ,CAAC,GAAG;YACrD,MAAM,kBAAkB,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;YAEjD,6BAA6B;YAC7B,MAAM,QAAQ,OAAO,WAAW,QAAQ,IAAI,QAAQ,CAAC,GAAG;YACxD,MAAM,UAAU,OAAO,WAAW,UAAU,IAAI,QAAQ,CAAC,GAAG;YAC5D,MAAM,kBAAkB,GAAG,MAAM,CAAC,EAAE,SAAS;YAE7C,mEAAmE;YACnE,QAAQ;YACR,QAAQ;QACV;kEAAG;QAAC;QAAS;KAAQ;IAErB,4BAA4B;IAC5B,MAAM,sBAAsB,IAAA,gMAAW;4DAAC,CAAC;YACvC,WAAW;YAEX,wDAAwD;YACxD,iFAAiF;YACjF,IAAI,SAAS;gBACX;YACF;QACF;2DAAG;QAAC;KAA2B;IAE/B,kCAAkC;IAClC,IAAA,8LAAS;qCAAC;YACR,IAAI,CAAC,QAAQ;gBACX,WAAW;YACb;QACF;oCAAG;QAAC;KAAO;IAEX,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,iNAAC;QAAI,WAAU;;0BACb,iNAAC;gBAAI,WAAU;;kCACb,iNAAC;wBAAI,WAAU;;0CACb,iNAAC;gCAAG,WAAU;0CAAgC;;;;;;0CAC9C,iNAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,iNAAC,wNAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAGjB,iNAAC;wBAAK,UAAU;wBAAkB,WAAU;;0CAE1C,iNAAC;gCAAI,WAAU;;kDACb,iNAAC;wCAAM,WAAU;kDACf,cAAA,iNAAC;4CAAK,WAAU;sDAAkC;;;;;;;;;;;kDAEpD,iNAAC;wCACC,MAAK;wCACL,SAAS,IAAM,oBAAoB,CAAC;wCACpC,WAAW,CAAC,4KAA4K,EACtL,UAAU,iBAAiB,eAC3B;wCACF,UAAU;kDAEV,cAAA,iNAAC;4CACC,WAAW,CAAC,mGAAmG,EAC7G,UAAU,kBAAkB,iBAC5B;;;;;;;;;;;;;;;;;4BAMP,CAAC,yBACA,iNAAC;gCAAI,WAAU;;kDACb,iNAAC;;0DACC,iNAAC;gDAAM,WAAU;;oDAA+C;kEACzD,iNAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAEtC,iNAAC,uLAAU;gDACT,OAAO;gDACP,UAAU;gDACV,aAAY;gDACZ,UAAU;gDACV,SAAS;;;;;;;;;;;;kDAGb,iNAAC;;0DACC,iNAAC;gDAAM,WAAU;;oDAA+C;kEACzD,iNAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAEtC,iNAAC;0DACC,cAAA,iNAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oDACvC,SAAS,CAAC,IAAM,EAAE,aAAa,CAAC,UAAU,IAAI,EAAE,aAAa,CAAC,UAAU;oDACxE,KAAK,SAAS,UAAU,UAAU;oDAClC,UAAU;oDACV,WAAU;oDACV,aAAY;;;;;;;;;;;;;;;;;;;;;;;4BAQrB,CAAC,WAAW,uCACX,iNAAC;gCAAI,WAAU;0CACb,cAAA,iNAAC;oCAAI,WAAU;;sDACb,iNAAC;4CAAI,WAAU;;;;;;sDACf,iNAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;;;;;;0CAI5C,iNAAC,kLAAgB;gCACf,kBAAkB;gCAClB,oBAAoB,yBAAyB,IAAI,CAAA,UAAW,QAAQ,EAAE,KAAK;gCAC3E,cAAc;gCACd,iBAAiB;gCACjB,iBAAiB;gCACjB,iBAAiB;;;;;;4BAElB,uBACC,iNAAC;;kDACC,iNAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,iNAAC;wCAAI,WAAU;;0DACb,iNAAC;gDAAE,WAAU;0DAAqC,MAAM,KAAK;;;;;;0DAC7D,iNAAC;gDAAE,WAAU;;oDAAwB;oDAAS,MAAM,MAAM;;;;;;;;;;;;;;;;;;;4BAK/D,CAAC,WAAW,iBAAiB,MAAM,GAAG,mBACrC,iNAAC;gCAAI,WAAU;;kDACb,iNAAC;wCAAG,WAAU;kDAAkC;;;;;;kDAChD,iNAAC;wCAAG,WAAU;kDACX,iBAAiB,GAAG,CAAC,CAAC,OAAO,sBAC5B,iNAAC;gDAAe,WAAU;;kEACxB,iNAAC;wDAAK,WAAU;kEAAsB;;;;;;kEACtC,iNAAC;kEAAM;;;;;;;+CAFA;;;;;;;;;;;;;;;;0CAQjB,iNAAC;gCACC,MAAK;gCACL,UAAU,AAAC,gBAAgB,gBAAiB,mBAAmB,MAAM,KAAK,KAAM,CAAC,WAAW,iBAAiB,MAAM,GAAG;gCACtH,WAAU;0CAET,AAAC,gBAAgB,6BAChB;;sDACE,iNAAC;4CAAI,WAAU;;;;;;wCACd,UAAU,eAAe;;mDAE1B,AAAC,CAAC,WAAW,iBAAiB,MAAM,GAAG,IACzC,aAEA;;;;;;;;;;;;;;;;;;0BAMR,iNAAC,2LAAqB;gBACpB,QAAQ;gBACR,SAAS;gBACT,WAAW;gBACX,cAAc;gBACd,uBAAuB,yBAAyB,UAAU,mBAAmB,MAAM;gBACnF,YAAY,OAAO;gBACnB,MAAM;gBACN,MAAM;gBACN,SAAS;;;;;;;;;;;;AAIjB;GAlZwB;;QAcP,+LAAW;QAsDtB,qKAAa;;;KApEK"}},
    {"offset": {"line": 1798, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/delete-video-confirmation-modal.tsx"],"sourcesContent":["'use client'\n\nimport React from 'react'\nimport { X, Trash2 } from 'lucide-react'\nimport { useModalScrollLock } from '@/hooks/useModalScrollLock'\n\ninterface DeleteVideoConfirmationModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onConfirm: () => void\n  videoTitle?: string\n  isDeleting?: boolean\n}\n\nexport default function DeleteVideoConfirmationModal({ \n  isOpen, \n  onClose, \n  onConfirm, \n  videoTitle,\n  isDeleting = false \n}: DeleteVideoConfirmationModalProps) {\n  useModalScrollLock(isOpen)\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl p-6 max-w-md w-full mx-4 relative\">\n        <button\n          onClick={onClose}\n          disabled={isDeleting}\n          className=\"absolute top-4 right-4 text-black hover:text-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          <X className=\"w-6 h-6\" />\n        </button>\n\n        <div className=\"text-center\">\n          <div className=\"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Trash2 className=\"w-6 h-6 text-red-600\" />\n          </div>\n\n          <h2 className=\"text-xl font-semibold text-[#282828] mb-2\">Delete Video</h2>\n\n          <div className=\"text-[#5F5F5F] mb-6 space-y-2\">\n            {videoTitle && (\n              <p className=\"font-medium text-[#282828]\">\n                &quot;{videoTitle}&quot;\n              </p>\n            )}\n            <p>Are you sure you want to delete this video?</p>\n            <p className=\"text-sm\">This action cannot be undone.</p>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={isDeleting}\n              className=\"flex-1 px-4 py-2 border-2 border-[#5F5F5F] text-[#5F5F5F] rounded-full font-semibold text-base transition-all duration-300 hover:bg-[#F5F5F5] disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"button\"\n              onClick={onConfirm}\n              disabled={isDeleting}\n              className=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-full font-semibold text-base transition-all duration-300 hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-500/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n            >\n              {isDeleting && (\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              )}\n              {isDeleting ? 'Deleting...' : 'Delete'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;;;AAJA;;;AAce,SAAS,6BAA6B,EACnD,MAAM,EACN,OAAO,EACP,SAAS,EACT,UAAU,EACV,aAAa,KAAK,EACgB;;IAClC,IAAA,+KAAkB,EAAC;IAEnB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,iNAAC;QAAI,WAAU;kBACb,cAAA,iNAAC;YAAI,WAAU;;8BACb,iNAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAU;8BAEV,cAAA,iNAAC,wNAAC;wBAAC,WAAU;;;;;;;;;;;8BAGf,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BAAI,WAAU;sCACb,cAAA,iNAAC,2OAAM;gCAAC,WAAU;;;;;;;;;;;sCAGpB,iNAAC;4BAAG,WAAU;sCAA4C;;;;;;sCAE1D,iNAAC;4BAAI,WAAU;;gCACZ,4BACC,iNAAC;oCAAE,WAAU;;wCAA6B;wCACjC;wCAAW;;;;;;;8CAGtB,iNAAC;8CAAE;;;;;;8CACH,iNAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;sCAGzB,iNAAC;4BAAI,WAAU;;8CACb,iNAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU;oCACV,WAAU;8CACX;;;;;;8CAGD,iNAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU;oCACV,WAAU;;wCAET,4BACC,iNAAC;4CAAI,WAAU;;;;;;wCAEhB,aAAa,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5C;GAhEwB;;QAOtB,+KAAkB;;;KAPI"}},
    {"offset": {"line": 1970, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/previous-videos-gallery.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useMemo, useEffect, useCallback, useRef } from 'react'\nimport CreateVideoModal from './create-video-modal'\nimport ConnectAccountsModal from './connect-accounts-modal'\nimport CreatePostModal from './create-post-modal'\nimport DeleteVideoConfirmationModal from './delete-video-confirmation-modal'\nimport { IoMdArrowDropdown } from \"react-icons/io\";\nimport { X, NotebookPen, AlertCircle, PencilLine } from 'lucide-react'\nimport { useSelector } from 'react-redux';\nimport { RootState } from '@/store';\nimport { apiService } from '@/lib/api-service';\nimport { useUnifiedSocketContext } from '@/components/providers/UnifiedSocketProvider';\nimport { useNotificationStore } from './global-notification';\n\ntype SortOrder = 'newest' | 'oldest'\n\ntype VideoCard = {\n  id: string\n  videoId: string\n  title: string\n  status: 'processing' | 'ready' | 'completed' | 'success' | 'failed'\n  createdAt: string\n  updatedAt: string\n  videoUrl?: string\n  downloadUrl?: string | null\n  autoGenerated?: boolean\n  metadata?: {\n    duration?: number\n    size?: number\n    format?: string\n  }\n  error?: string\n  socialMediaCaptions?: {\n    instagram_caption?: string\n    facebook_caption?: string\n    linkedin_caption?: string\n    twitter_caption?: string\n    tiktok_caption?: string\n    youtube_caption?: string\n  }\n}\n\ninterface PreviousVideosGalleryProps {\n  className?: string\n}\n\nexport default function PreviousVideosGallery({ className }: PreviousVideosGalleryProps) {\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)\n  const [isConnectAccountsModalOpen, setIsConnectAccountsModalOpen] = useState(false)\n  const [isCreatePostModalOpen, setIsCreatePostModalOpen] = useState(false)\n  const [selectedAccountsForPost, setSelectedAccountsForPost] = useState<any[]>([])\n  const [selectedVideoForCreation, setSelectedVideoForCreation] = useState<string>('')\n  const [isDeleteVideoModalOpen, setIsDeleteVideoModalOpen] = useState(false)\n  const [videoToDelete, setVideoToDelete] = useState<VideoCard | null>(null)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [selectedVideoData, setSelectedVideoData] = useState<{\n    title: string; youtubeUrl: string; thumbnail: string, videoUrl: string, socialMediaCaptions: {\n      instagram_caption?: string\n      facebook_caption?: string\n      linkedin_caption?: string\n      twitter_caption?: string\n      tiktok_caption?: string\n      youtube_caption?: string\n    }\n  } | null>(null)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [debouncedSearchQuery, setDebouncedSearchQuery] = useState('')\n  const [sortOrder, setSortOrder] = useState<SortOrder>('newest')\n  const [isSortDropdownOpen, setIsSortDropdownOpen] = useState(false)\n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1)\n  const [limit] = useState(10) // Fixed limit, can be made configurable later\n  const [totalPages, setTotalPages] = useState(1)\n  const [totalCount, setTotalCount] = useState(0)\n  // State for API data\n  const [videos, setVideos] = useState<VideoCard[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [loadingVideos, setLoadingVideos] = useState<Set<string>>(new Set())\n  // Note feature state\n  const [videoNotes, setVideoNotes] = useState<Record<string, string>>({})\n  const [isNoteModalOpen, setIsNoteModalOpen] = useState(false)\n  const [selectedVideoForNote, setSelectedVideoForNote] = useState<VideoCard | null>(null)\n  const [currentNoteText, setCurrentNoteText] = useState('')\n  const [noteError, setNoteError] = useState<string>('')\n\n  // Notification hook\n  const { showNotification } = useNotificationStore()\n\n  // Get access token and user from Redux store\n  const accessToken = useSelector((state: RootState) => state.user.accessToken)\n  const currentUser = useSelector((state: RootState) => state.user.user)\n\n  // Get unified socket context\n  const {\n    latestVideoUpdate,\n    pendingVideos\n  } = useUnifiedSocketContext()\n\n  // Store fetchVideos in ref to avoid dependency issues\n  const fetchVideosRef = useRef<(() => Promise<void>) | null>(null)\n\n  // Fetch videos from API with pagination, search, and sort\n  const fetchVideos = useCallback(async () => {\n    if (!accessToken) {\n      setError('Authentication required')\n      setLoading(false)\n      return\n    }\n\n    try {\n      setLoading(true)\n      setError(null)\n\n      const result = await apiService.getVideoGallery({\n        page: currentPage,\n        limit: limit,\n        sort: sortOrder,\n        search: debouncedSearchQuery || undefined\n      })\n\n      if (result.success && result.data) {\n        // Type assertion for API response structure\n        const apiData = result.data as {\n          videos: any[];\n          pagination?: {\n            page: number;\n            limit: number;\n            total: number;\n            totalPages: number;\n          };\n          stats?: {\n            totalCount: number;\n            readyCount: number;\n            processingCount: number;\n            failedCount: number;\n          };\n          // Legacy fields for backward compatibility\n          totalCount?: number;\n          totalPages?: number;\n        };\n        \n        // Map API response to VideoCard format, preserving original videoUrl\n        const mappedVideos = apiData.videos\n          .map((video: any) => {\n            return {\n              ...video,\n              // Keep the original videoUrl from API, don't override with downloadUrl\n              videoUrl: video.videoUrl || video.downloadUrl || ''\n            }\n          })\n        setVideos(mappedVideos)\n        \n        if (apiData.stats?.totalCount !== undefined) {\n          setTotalCount(apiData.stats.totalCount)\n        }\n        if (apiData.pagination?.totalPages !== undefined) {\n          setTotalPages(apiData.pagination.totalPages)\n        } else if (apiData.pagination?.total !== undefined) {\n          setTotalPages(Math.ceil(apiData.pagination.total / limit))\n        } else if (apiData.stats?.totalCount !== undefined) {\n          setTotalPages(Math.ceil(apiData.stats.totalCount / limit))\n        }\n        \n        const notesFromAPI: Record<string, string> = {}\n        apiData.videos.forEach((video: any) => {\n          const videoId = video.videoId || video.id\n          if (videoId && video.note) {\n            notesFromAPI[videoId] = video.note\n          }\n        })\n        setVideoNotes(notesFromAPI)\n      } else {\n        throw new Error(result.message || 'Failed to fetch videos')\n      }\n    } catch (err: any) {\n      const errorMessage = err.message || 'Failed to fetch videos'\n      setError(errorMessage)\n    } finally {\n      setLoading(false)\n    }\n  }, [accessToken, currentPage, limit, sortOrder, debouncedSearchQuery])\n\n  // Debounce search query to avoid excessive API calls\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchQuery(searchQuery)\n      // Reset to page 1 when search changes\n      setCurrentPage(1)\n    }, 500) // 500ms debounce delay\n\n    return () => clearTimeout(timer)\n  }, [searchQuery])\n\n  // Reset to page 1 when sort order changes\n  useEffect(() => {\n    setCurrentPage(1)\n  }, [sortOrder])\n\n  // Update ref when fetchVideos changes\n  useEffect(() => {\n    fetchVideosRef.current = fetchVideos\n  }, [fetchVideos])\n\n  // Fetch videos on component mount and when dependencies change\n  useEffect(() => {\n    fetchVideosRef.current?.()\n  }, [accessToken, currentPage, sortOrder, debouncedSearchQuery]) // Trigger on pagination, sort, and search changes\n\n  // No need for cleanup effects since we're using derived state from socket updates\n\n  // Handle video completion - refresh gallery when video is done\n  useEffect(() => {\n    if (!currentUser || !latestVideoUpdate) return\n\n    const { status } = latestVideoUpdate\n    console.log(' Gallery received video update:', { status, message: latestVideoUpdate.message })\n\n    if (status === 'completed' || status === 'success') {\n      console.log(' Video completed successfully, refreshing gallery...')\n      // Use a ref to avoid dependency on fetchVideos\n      const timeoutId = setTimeout(() => {\n        fetchVideosRef.current?.()\n      }, 1000)\n\n      return () => clearTimeout(timeoutId)\n    }\n  }, [latestVideoUpdate, currentUser])\n\n  const handleViewVideo = (video: VideoCard) => {\n    console.log('firstvideo', video)\n    console.log('handleViewVideo', video)\n    if (video.status !== 'ready') {\n      return\n    }\n\n    if (!video.downloadUrl) {\n      return\n    }\n\n    setSelectedVideoForCreation(video.title)\n    setSelectedVideoData({\n      title: video.title,\n      videoUrl: video.videoUrl || '',\n      youtubeUrl: video.downloadUrl, // Use the S3 download URL for viewing\n      thumbnail: '' ,// No thumbnail needed\n      socialMediaCaptions:\n        typeof video.socialMediaCaptions === 'string'\n          ? JSON.parse(video.socialMediaCaptions)\n          : video.socialMediaCaptions || {}\n    })\n    setIsCreateModalOpen(true)\n  }\n\n  const handlePostVideo = (video: VideoCard) => {\n    console.log('handlePostVideo', video)\n    if (video.status !== 'ready') {\n      return\n    }\n\n    setSelectedVideoForCreation(video.title)\n    setSelectedVideoData({\n      title: video.title,\n      videoUrl: video.videoUrl || '',\n      youtubeUrl: video.downloadUrl || '',\n      thumbnail: '',\n      socialMediaCaptions:\n        typeof video.socialMediaCaptions === 'string'\n          ? JSON.parse(video.socialMediaCaptions)\n          : video.socialMediaCaptions || {}\n    })\n    setIsConnectAccountsModalOpen(true)\n  }\n\n  const handleCreatePost = (accounts: any[]) => {\n    setSelectedAccountsForPost(accounts)\n    setIsConnectAccountsModalOpen(false)\n    setIsCreatePostModalOpen(true)\n  }\n\n  const handlePostSubmit = (postData: {\n    date: string\n    time: string\n    caption: string\n    accounts: any[]\n    video: any\n  }) => {\n    console.log('Post submitted:', postData)\n    // Here you would typically call an API to create the post\n    setIsCreatePostModalOpen(false)\n    setSelectedAccountsForPost([])\n  }\n\n  const handleDeleteVideo = (video: VideoCard) => {\n    setVideoToDelete(video)\n    setIsDeleteVideoModalOpen(true)\n  }\n\n  const handleConfirmDelete = async () => {\n    if (!videoToDelete) return\n\n    const videoId = videoToDelete.videoId || videoToDelete.id\n    if (!videoId) {\n      showNotification('Video ID not found', 'error')\n      return\n    }\n\n    try {\n      setIsDeleting(true)\n      const result = await apiService.deleteVideo(videoId)\n\n      if (result.success) {\n        setVideos(prev => prev.filter(video => \n          (video.videoId || video.id) !== videoId\n        ))\n        showNotification('Video deleted successfully', 'success')\n        setIsDeleteVideoModalOpen(false)\n        setVideoToDelete(null)\n      } else {\n        throw new Error(result.message || 'Failed to delete video')\n      }\n    } catch (err: any) {\n      console.error('Failed to delete video:', err)\n      showNotification(err.message || 'Failed to delete video', 'error')\n    } finally {\n      setIsDeleting(false)\n    }\n  }\n\n  const handleCancelDelete = () => {\n    setIsDeleteVideoModalOpen(false)\n    setVideoToDelete(null)\n  }\n\n  const validateNote = (note: string): string => {\n    const trimmedNote = note.trim()\n    if (trimmedNote.length === 0) {\n      return 'Note is required'\n    }\n    const words = trimmedNote.split(/\\s+/).filter(word => word.length > 0)\n    if (words.length === 0) {\n      return 'Note must contain at least one word'\n    }\n    return ''\n  }\n\n  // Note feature handlers\n  const handleOpenNoteModal = (video: VideoCard) => {\n    const videoId = video.videoId || video.id\n    setSelectedVideoForNote(video)\n    setCurrentNoteText(videoNotes[videoId] || '')\n    setNoteError('')\n    setIsNoteModalOpen(true)\n  }\n\n  const handleSaveNote = async () => {\n    if (!selectedVideoForNote) return\n    \n    const videoId = selectedVideoForNote.videoId || selectedVideoForNote.id\n    if (!videoId) {\n      showNotification('Video ID not found', 'error')\n      return\n    }\n\n    // Validate note before saving\n    const validationError = validateNote(currentNoteText)\n    if (validationError) {\n      setNoteError(validationError)\n      return\n    }\n\n    try {\n      const noteText = currentNoteText.trim()\n      const result = await apiService.updateVideoNote(videoId, noteText)\n      \n      if (result.success) {\n        setVideoNotes(prev => ({\n          ...prev,\n          [videoId]: noteText\n        }))\n        showNotification('Note saved successfully', 'success')\n        // Close modal\n        setIsNoteModalOpen(false)\n        setSelectedVideoForNote(null)\n        setCurrentNoteText('')\n        setNoteError('')\n      } else {\n        showNotification(result.message || 'Failed to save note', 'error')\n      }\n    } catch (error: any) {\n      const errorMessage = error.message || 'Failed to save note'\n      showNotification(errorMessage, 'error')\n    }\n  }\n\n  const handleCancelNote = () => {\n    setIsNoteModalOpen(false)\n    setSelectedVideoForNote(null)\n    setCurrentNoteText('')\n    setNoteError('')\n  }\n\n  const handleNoteTextChange = (value: string) => {\n    setCurrentNoteText(value)\n    // Validate and update error state\n    const error = validateNote(value)\n    setNoteError(error)\n  }\n\n  // Merge pending videos (from socket) with API videos\n  // Server-side filtering and sorting is already handled by the API\n  const displayVideos = useMemo(() => {\n    console.log(' Recalculating displayVideos:', {\n      pendingVideosCount: pendingVideos.length,\n      apiVideosCount: videos.length\n    })\n\n    // Start with API videos (already filtered, sorted, and paginated by server)\n    const allVideos = [...videos]\n\n    // Add loading cards for each pending video (processing videos from socket)\n    if (pendingVideos.length > 0) {\n      console.log(` Adding ${pendingVideos.length} loading card(s) to video list`)\n      \n      // Create loading cards for each pending video\n      const loadingCards: VideoCard[] = pendingVideos.map((video) => ({\n        id: video.id,\n        videoId: video.id,\n        title: video.title,\n        status: 'processing',\n        createdAt: video.timestamp,\n        updatedAt: video.timestamp,\n        downloadUrl: null,\n        metadata: {\n          duration: 0,\n          size: 0,\n          format: 'processing'\n        }\n      }))\n\n      // Separate processing videos from completed videos\n      const processingVideos = allVideos.filter(video => video.status === 'processing')\n      const completedVideos = allVideos.filter(video => video.status !== 'processing')\n\n      // Sort processing videos by creation date (newest first) for consistent display\n      const sortedProcessingVideos = processingVideos.sort((a, b) => {\n        const dateA = new Date(a.createdAt).getTime()\n        const dateB = new Date(b.createdAt).getTime()\n        return dateB - dateA\n      })\n\n      // Always show pending videos first, then processing videos from API, then completed videos\n      return [...loadingCards, ...sortedProcessingVideos, ...completedVideos]\n    }\n\n    // If no pending videos, return API videos as-is (already sorted by server)\n    return allVideos\n  }, [videos, pendingVideos])\n\n  const handleSortChange = (newSortOrder: SortOrder) => {\n    setSortOrder(newSortOrder)\n    setIsSortDropdownOpen(false)\n  }\n\n  if (error) {\n    return (\n      <div className={`w-full ${className}`}>\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <p className=\"text-red-500 text-lg mb-4\">{error}</p>\n            <button\n              onClick={fetchVideos}\n              className=\"bg-[#5046E5] text-white px-6 py-2 rounded-full hover:bg-[#4338CA] transition-colors\"\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`w-full ${className}`}>\n      {/* Shimmer animation styles - added once for all videos */}\n      {loadingVideos.size > 0 && (\n        <style dangerouslySetInnerHTML={{\n          __html: `\n            @keyframes shimmer {\n              0% {\n                transform: translateX(-100%);\n              }\n              100% {\n                transform: translateX(100%);\n              }\n            }\n          `\n        }} />\n      )}\n\n      {/* Search, Sort Controls and Create Button */}\n      <div className=\"flex flex-col md:flex-row md:justify-between justify-end gap-4 mb-8\">\n        {/* Left side: Search Bar */}\n        <div className=\"relative flex-1 md:max-w-[447px] max-w-full\">\n          <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M9.5 16C7.68333 16 6.146 15.3707 4.888 14.112C3.63 12.8533 3.00067 11.316 3 9.5C2.99933 7.684 3.62867 6.14667 4.888 4.888C6.14733 3.62933 7.68467 3 9.5 3C11.3153 3 12.853 3.62933 14.113 4.888C15.373 6.14667 16.002 7.684 16 9.5C16 10.2333 15.8833 10.925 15.65 11.575C15.4167 12.225 15.1 12.8 14.7 13.3L20.3 18.9C20.4833 19.0833 20.575 19.3167 20.575 19.6C20.575 19.8833 20.4833 20.1167 20.3 20.3C20.1167 20.4833 19.8833 20.575 19.6 20.575C19.3167 20.575 19.0833 20.4833 18.9 20.3L13.3 14.7C12.8 15.1 12.225 15.4167 11.575 15.65C10.925 15.8833 10.2333 16 9.5 16ZM9.5 14C10.75 14 11.8127 13.5627 12.688 12.688C13.5633 11.8133 14.0007 10.7507 14 9.5C13.9993 8.24933 13.562 7.187 12.688 6.313C11.814 5.439 10.7513 5.00133 9.5 5C8.24867 4.99867 7.18633 5.43633 6.313 6.313C5.43967 7.18967 5.002 8.252 5 9.5C4.998 10.748 5.43567 11.8107 6.313 12.688C7.19033 13.5653 8.25267 14.0027 9.5 14Z\" fill=\"#5F5F5F\" />\n            </svg>\n          </div>\n          <input\n            type=\"text\"\n            placeholder=\"Search\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            style={{\n              boxShadow: \"0px -1.5px 0px 0px #FFFFFF52 inset, 0px 0.5px 0px 0px #FFFFFF52 inset\"\n            }}\n            className=\"w-full pr-10 pl-4 py-[7.4px] bg-transparent hover:bg-[#F5F5F5] rounded-[39px] text-[#5F5F5F] placeholder-[#5F5F5F] transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] focus:bg-white border-2 border-[#5F5F5F] text-[20px] font-semibold\"\n          />\n        </div>\n\n        {/* Right side: Sort Dropdown, Refresh Button and Create Button */}\n        <div className=\"flex gap-4 justify-end\">\n          {/* Refresh Button */}\n          <button\n            onClick={fetchVideos}\n            disabled={loading}\n            className=\"px-4 py-[7.4px] bg-[#5046E5] text-white rounded-[39px] transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] flex items-center gap-2 min-w-[120px] justify-center text-[20px] font-semibold hover:bg-[#4338CA] disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M4 4V10H4.58152M19.9381 11C19.446 7.05369 16.0796 4 12 4C8.64262 4 5.76829 6.06817 4.58152 9M4.58152 9H10M20 20V14H19.4185M19.4185 14C18.2317 16.9318 15.3574 19 12 19C7.92038 19 4.55399 15.9463 4.06189 12M19.4185 14H14\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n            </svg>\n            Refresh\n          </button>\n\n          {/* Sort Dropdown */}\n          <div className=\"relative\">\n            <button\n              type=\"button\"\n              onClick={() => setIsSortDropdownOpen(!isSortDropdownOpen)}\n              className=\"px-4 py-[7.4px] bg-transparent cursor-pointer border-2 border-[#5F5F5F] rounded-[39px] text-[#5F5F5F] transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] focus:bg-white flex items-center gap-2 min-w-[154px] justify-center text-[20px] font-semibold\"\n              style={{\n                boxShadow: \"0px -1.5px 0px 0px #FFFFFF52 inset, 0px 0.5px 0px 0px #FFFFFF52 inset\"\n              }}\n            >\n              <span>\n                {sortOrder === 'newest' ? 'Newest' : 'Oldest'}\n              </span>\n              <IoMdArrowDropdown\n                className={`w-7 h-7 transition-transform text-[#5F5F5F] duration-300 ${isSortDropdownOpen ? 'rotate-180' : ''}`}\n              />\n            </button>\n\n            {isSortDropdownOpen && (\n              <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-[8px] shadow-lg\">\n                <button\n                  type=\"button\"\n                  onClick={() => handleSortChange('newest')}\n                  className={`w-full px-4 py-3 text-left cursor-pointer hover:bg-[#F5F5F5] transition-colors duration-200 rounded-t-[8px] text-[18px] font-semibold ${sortOrder === 'newest' ? 'bg-[#F5F5F5] text-[#5046E5]' : 'text-[#282828]'\n                    }`}\n                >\n                  Newest\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => handleSortChange('oldest')}\n                  className={`w-full px-4 py-3 cursor-pointer text-left hover:bg-[#F5F5F5] transition-colors duration-200 rounded-b-[8px] text-[18px] font-semibold ${sortOrder === 'oldest' ? 'bg-[#F5F5F5] text-[#5046E5]' : 'text-[#282828]'\n                    }`}\n                >\n                  Oldest\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Video Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7\">\n        {loading ? (\n          <div className=\"col-span-full text-center py-12\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5046E5] mx-auto mb-4\"></div>\n              <p className=\"text-gray-500 text-lg\">Loading your videos...</p>\n            </div>\n          </div>\n        ) : displayVideos.length === 0 ? (\n          <div className=\"col-span-full text-center py-12\">\n            <p className=\"text-gray-500 text-lg\">\n              {debouncedSearchQuery ? 'No videos found matching your search.' : 'No videos available.'}\n            </p>\n          </div>\n        ) : (\n          displayVideos.map((video) => (\n            <div\n              key={video.id}\n              className=\"bg-[#EEEEEE] rounded-[12px] overflow-hidden transition-all duration-300 group min-h-[240px] relative h-[384px]\"\n            >\n              \n              {/* Video Player Container */}\n              <div className=\"relative aspect-video max-h-[200px] w-full bg-[#EEEEEE] px-3 pt-3 rounded-[8px] group\">\n                {/* Video Player */}\n                {video.status === 'ready' && video.downloadUrl ? (\n                  <>\n                    <video\n                      src={video.downloadUrl}\n                      className=\"w-full h-[200px] object-cover rounded-[6px]\"\n                      preload=\"metadata\"\n                      poster=\"\"\n                      muted\n                      loop\n                      playsInline\n                      webkit-playsinline=\"true\"\n                      onError={(e) => {\n                        console.error('Video load error:', e)\n                        setLoadingVideos(prev => {\n                          const newSet = new Set(prev)\n                          newSet.delete(video.id)\n                          return newSet\n                        })\n                      }}\n                      onLoadStart={() => {\n                        setLoadingVideos(prev => new Set(prev).add(video.id))\n                      }}\n                      onLoadedMetadata={(e) => {\n                        const videoElement = e.currentTarget;\n                        if (videoElement) {\n                          videoElement.currentTime = 1;\n                        }\n                        setLoadingVideos(prev => {\n                          const newSet = new Set(prev)\n                          newSet.delete(video.id)\n                          return newSet\n                        })\n                      }}\n                    >\n                      Your browser does not support the video tag.\n                    </video>\n                    {/* Shimmer overlay - shows while video thumbnail is loading */}\n                    {loadingVideos.has(video.id) && (\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 rounded-[6px] overflow-hidden z-10\">\n                        <div \n                          className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent\"\n                          style={{\n                            animation: 'shimmer 1.5s infinite'\n                          }}\n                        />\n                      </div>\n                    )}\n                    {/* View Video Button Overlay - Only visible on hover */}\n                    <div className=\"absolute inset-0 flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-grey100 bg-opacity-30 rounded-[6px]\" style={{ zIndex: 0 }}>\n                      <button\n                        onClick={() => handleViewVideo(video)}\n                        className=\"bg-[#5046E5] text-white px-6 py-3 rounded-full font-semibold text-[16px] hover:bg-[#4338CA]/80 transition-colors duration-300 flex items-center justify-center gap-2 shadow-lg\"\n                      >\n                        View Video\n                      </button>\n                      <button\n                        onClick={() => handleDeleteVideo(video)}\n                        className=\"bg-[#FF0000] text-white px-6 py-3 rounded-full font-semibold text-[16px] hover:bg-[#FF0000]/80 transition-colors duration-300 flex items-center justify-center gap-2 shadow-lg\"\n                      >\n                        Delete Video\n                      </button>\n                    </div>\n                  </>\n                ) : video.id.startsWith('loading-') ? (\n                  /* Professional Loading Video Card with Advanced Skeleton */\n                  <div className=\"w-full h-[200px] bg-gradient-to-br from-slate-50 to-gray-100 rounded-[6px] relative overflow-hidden border border-gray-200/50\">\n                    {/* Animated Background Pattern */}\n                    <div className=\"absolute inset-0 opacity-30\">\n                      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-blue-500/10 to-transparent animate-pulse\"></div>\n                      <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-transparent via-purple-500/5 to-transparent\"></div>\n                    </div>\n\n                    {/* Main Content Container */}\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center p-6\">\n\n                      {/* Processing Text with Typing Animation */}\n                      <div className=\"text-center mb-4\">\n                        <div>\n                          <div className=\"text-sm font-semibold text-gray-700 mb-2\">\n                            <span className=\"inline-block animate-pulse\">Processing</span>\n                            <span className=\"inline-block animate-bounce ml-1\">.</span>\n                            <span className=\"inline-block animate-bounce ml-0.5\" style={{ animationDelay: '0.1s' }}>.</span>\n                            <span className=\"inline-block animate-bounce ml-0.5\" style={{ animationDelay: '0.2s' }}>.</span>\n                          </div>\n                          <div className=\"text-xs text-gray-500\">\n                            It usually takes 1015 minutes to generate a video.\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Spinner */}\n                      <div className=\"flex justify-center items-center\">\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5046E5]\"></div>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"w-full h-[200px] bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center rounded-[6px]\">\n                    <div className=\"text-center\">\n                      <div className=\"text-gray-400 text-sm mb-2\">\n                        {video.status === 'processing' ? 'Processing...' :\n                          video.status === 'failed' ? 'Failed to load' :\n                            video.status === 'ready' && !video.downloadUrl ? 'No download URL' : 'Video not ready'}\n                      </div>\n                      {video.status === 'processing' && (\n                        <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#5046E5] mx-auto\"></div>\n                      )}\n                      {video.status === 'ready' && !video.downloadUrl && (\n                        <div className=\"text-red-400 text-xs\">Missing download URL</div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Content */}\n              <div className=\"p-4 flex flex-col justify-between h-[160px]\">\n                {/* Video Title */}\n                {video.id.startsWith('loading-') ? (\n                  /* Professional Skeleton Title */\n                  <div className=\"my-3\">\n                    <div className=\"w-3/4 h-5 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg animate-pulse mb-2 shadow-sm\"></div>\n                    <div className=\"w-1/2 h-5 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg animate-pulse shadow-sm\"></div>\n                  </div>\n                ) : (\n                  /* Regular Title */\n                  <div className=\"my-3\">\n                    <h3 className=\"text-[18px] font-medium text-[#171717] line-clamp-1\">\n                      {video.title}\n                    </h3>\n                    {/* Note Display */}\n                    {videoNotes[video.videoId || video.id] ? (\n                      <div className=\"mt-2 p-2 min-h-[60px] bg-white border border-blue-100 hover:border-blue-200 rounded-[6px] relative transition-all duration-300\">\n                        <div className=\"flex items-start gap-1 relative z-10 pr-[24px]\">\n                          <p className=\"text-sm text-[#5F5F5F] line-clamp-2 flex-1\">\n                           <span className=\"font-medium text-[#5F5F5F]\">Note:</span> {videoNotes[video.videoId || video.id]}\n                          </p>\n                        </div>\n                        {!video.id.startsWith('loading-') && (\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleOpenNoteModal(video)\n                            }}\n                            className=\"absolute top-2 right-2 z-10 transition-all duration-200 flex items-center justify-center group/note\"\n                            title={videoNotes[video.videoId || video.id] ? 'Edit note' : 'Add note'}\n                          >\n                            <PencilLine \n                              className={`w-5 h-5 transition-colors duration-200 ${\n                                videoNotes[video.videoId || video.id] \n                                  ? 'text-[#5F5F5F] hover:text-[#5046E5] ' \n                                  : 'text-[#5F5F5F] group-hover/note:text-[#5046E5]'\n                              }`} \n                            />\n                          </button>\n                        )}\n                      </div>\n                    ) : (\n                      <div className=\"mt-2 p-2 min-h-[60px] bg-white border border-blue-50 hover:border-blue-200 rounded-[6px] relative transition-all duration-300\">\n                        <div className=\"flex items-start gap-1\">\n                          <p className=\"text-sm font-normal text-[#9C9B9B]\">Add a note</p>\n                          {!video.id.startsWith('loading-') && (\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                handleOpenNoteModal(video)\n                              }}\n                              className=\"absolute top-2 right-2 z-10 transition-all duration-200 flex items-center justify-center group/note\"\n                              title={videoNotes[video.videoId || video.id] ? 'Edit note' : 'Add note'}\n                            >\n                              <PencilLine \n                                className={`w-5 h-5 transition-colors duration-200 ${\n                                  videoNotes[video.videoId || video.id] \n                                    ? 'text-[#5046E5] ' \n                                    : 'text-[#5F5F5F] hover:text-[#5046E5]'\n                                }`} \n                              />\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                )}\n                {/* Buttons Container */}\n                {video.id.startsWith('loading-') ? (\n                  /* Professional Skeleton Buttons */\n                  <div className=\"flex gap-2\">\n                    <div className=\"flex-1 py-[3px] px-4 rounded-full\">\n                      <div className=\"w-full h-8 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full animate-pulse shadow-sm border border-gray-200/50\"></div>\n                    </div>\n                    <div className=\"flex-1 py-[3px] px-4 rounded-full\">\n                      <div className=\"w-full h-8 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full animate-pulse shadow-sm border border-gray-200/50\"></div>\n                    </div>\n                  </div>\n                ) : (\n                  /* Regular Buttons - Two buttons in a row */\n                  <div className=\"flex gap-2\">\n                    {!video.autoGenerated && (\n                      <button\n                        onClick={() => handlePostVideo(video)}\n                        disabled={video.status !== 'ready'}\n                        className={`flex-1 py-[3px] px-4 rounded-full font-semibold text-[16px] transition-colors duration-300 flex items-center justify-center gap-2 group/btn cursor-pointer ${video.status === 'ready'\n                          ? 'bg-[#5046E5] text-white hover:bg-transparent hover:text-[#5046E5] border-2 border-[#5046E5]'\n                          : 'bg-gray-300 text-gray-500 cursor-not-allowed border-2 border-gray-300'\n                          }`}\n                      >\n                        Post Video\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Pagination Controls */}\n      {totalPages > 1 && (\n        <div className=\"flex items-center justify-center gap-4 mt-8\">\n          <button\n            onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n            disabled={currentPage === 1 || loading}\n            className=\"px-4 py-2 bg-[#5046E5] text-white rounded-[39px] transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[#4338CA] text-[16px] font-semibold\"\n          >\n            Previous\n          </button>\n          \n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-[#5F5F5F] text-[16px] font-semibold\">\n              Page {currentPage} of {totalPages}\n            </span>\n            {totalCount > 0 && (\n              <span className=\"text-[#9C9B9B] text-[14px]\">\n                ({totalCount} {totalCount === 1 ? 'video' : 'videos'})\n              </span>\n            )}\n          </div>\n          \n          <button\n            onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n            disabled={currentPage === totalPages || loading}\n            className=\"px-4 py-2 bg-[#5046E5] text-white rounded-[39px] transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[#4338CA] text-[16px] font-semibold\"\n          >\n            Next\n          </button>\n        </div>\n      )}\n\n      {/* Click outside to close dropdown */}\n      {isSortDropdownOpen && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => setIsSortDropdownOpen(false)}\n        />\n      )}\n\n      {/* Create Video Modal */}\n      <CreateVideoModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        videoTitle={selectedVideoForCreation}\n        startAtComplete={true}\n        videoData={selectedVideoData}\n      />\n\n      {/* Connect Accounts Modal */}\n      <ConnectAccountsModal\n        isOpen={isConnectAccountsModalOpen}\n        onClose={() => setIsConnectAccountsModalOpen(false)}\n        onNext={() => {\n          setIsConnectAccountsModalOpen(false)\n          // Handle the next step after connecting accounts\n          console.log('Accounts connected, proceeding to next step')\n        }}\n        video={selectedVideoData ? {\n          id: selectedVideoData.title,\n          title: selectedVideoData.title,\n          status: 'ready',\n          url: selectedVideoData.youtubeUrl,\n          thumbnail: selectedVideoData.thumbnail,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        } : undefined}\n        onCreatePost={handleCreatePost}\n      />\n\n      {/* Create Post Modal */}\n      {selectedVideoData && (\n        <CreatePostModal\n          isOpen={isCreatePostModalOpen}\n          onClose={() => setIsCreatePostModalOpen(false)}\n          onPost={handlePostSubmit}\n          selectedAccounts={selectedAccountsForPost}\n          video={{\n            id: selectedVideoData.title,\n            title: selectedVideoData.title,\n            status: 'ready',\n            videoUrl: selectedVideoData.videoUrl,\n            url: selectedVideoData.youtubeUrl,\n            thumbnail: selectedVideoData.thumbnail,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n            socialMediaCaptions: selectedVideoData.socialMediaCaptions,\n          }}\n        />\n      )}\n\n      <DeleteVideoConfirmationModal\n        isOpen={isDeleteVideoModalOpen}\n        onClose={handleCancelDelete}\n        onConfirm={handleConfirmDelete}\n        videoTitle={videoToDelete?.title}\n        isDeleting={isDeleting}\n      />\n\n      {/* Note Modal */}\n      {isNoteModalOpen && selectedVideoForNote && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4\">\n          <div className=\"bg-white rounded-xl max-w-md w-full shadow-xl\">\n            <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200\">\n              <h2 className=\"text-xl font-semibold text-black\">\n                {videoNotes[selectedVideoForNote.videoId || selectedVideoForNote.id] ? 'Edit Note' : 'Add Note'}\n              </h2>\n              <button\n                type=\"button\"\n                onClick={handleCancelNote}\n                className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors duration-200\"\n              >\n                <X className=\"w-5 h-5 text-black\" />\n              </button>\n            </div>\n            \n            <div className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Note for: <span className=\"text-gray-500 font-normal\">{selectedVideoForNote.title}</span>\n                </label>\n                <textarea\n                  value={currentNoteText}\n                  onChange={(e) => handleNoteTextChange(e.target.value)}\n                  required={true}\n                  placeholder=\"Enter your note here...\"\n                  className={`w-full h-32 px-4 py-3 bg-[#EEEEEE] border-0 rounded-[8px] text-gray-800 placeholder-[#11101066] resize-none focus:outline-none focus:ring-2 focus:ring-[#5046E5] focus:bg-white transition-colors duration-200 ${noteError ? 'ring-2 ring-red-500' : ''}`}\n                  autoFocus\n                />\n                {noteError && (\n                  <p className=\"text-red-500 text-sm mt-1 flex items-center gap-1\">\n                    <AlertCircle className=\"w-4 h-4\" />\n                    {noteError}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex gap-3 justify-end\">\n                <button\n                  type=\"button\"\n                  onClick={handleCancelNote}\n                  className=\"px-6 py-2 rounded-full font-semibold text-[16px] border-2 border-gray-300 hover:border-gray-700 text-gray-700 hover:bg-gray-700 hover:text-white transition-colors duration-200\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleSaveNote}\n                  disabled={!!noteError || !currentNoteText.trim() || currentNoteText.trim().split(/\\s+/).filter(word => word.length > 0).length === 0}\n                  className={`px-6 py-2 rounded-full font-semibold text-[16px] border-2 border-[#5046E5] transition-colors duration-200 ${\n                    noteError || !currentNoteText.trim() || currentNoteText.trim().split(/\\s+/).filter(word => word.length > 0).length === 0\n                      ? 'opacity-50 cursor-not-allowed bg-[#5046E5] text-white'\n                      : 'bg-[#5046E5] text-white hover:bg-transparent hover:text-[#5046E5]'\n                  }`}\n                >\n                  Save\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;;;AAbA;;;;;;;;;;;;AA+Ce,SAAS,sBAAsB,EAAE,SAAS,EAA8B;;IACrF,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,6LAAQ,EAAC;IAC3D,MAAM,CAAC,4BAA4B,8BAA8B,GAAG,IAAA,6LAAQ,EAAC;IAC7E,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,6LAAQ,EAAC;IACnE,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,6LAAQ,EAAQ,EAAE;IAChF,MAAM,CAAC,0BAA0B,4BAA4B,GAAG,IAAA,6LAAQ,EAAS;IACjF,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,6LAAQ,EAAC;IACrE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6LAAQ,EAAmB;IACrE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6LAAQ,EAAC;IAC7C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,6LAAQ,EAShD;IACV,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6LAAQ,EAAC;IAC/C,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,6LAAQ,EAAC;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6LAAQ,EAAY;IACtD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,6LAAQ,EAAC;IAC7D,mBAAmB;IACnB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6LAAQ,EAAC;IAC/C,MAAM,CAAC,MAAM,GAAG,IAAA,6LAAQ,EAAC,IAAI,8CAA8C;;IAC3E,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6LAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6LAAQ,EAAC;IAC7C,qBAAqB;IACrB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,6LAAQ,EAAc,EAAE;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6LAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6LAAQ,EAAgB;IAClD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6LAAQ,EAAc,IAAI;IACpE,qBAAqB;IACrB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6LAAQ,EAAyB,CAAC;IACtE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,6LAAQ,EAAC;IACvD,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,6LAAQ,EAAmB;IACnF,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,6LAAQ,EAAC;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6LAAQ,EAAS;IAEnD,oBAAoB;IACpB,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,iMAAoB;IAEjD,6CAA6C;IAC7C,MAAM,cAAc,IAAA,+LAAW;0DAAC,CAAC,QAAqB,MAAM,IAAI,CAAC,WAAW;;IAC5E,MAAM,cAAc,IAAA,+LAAW;0DAAC,CAAC,QAAqB,MAAM,IAAI,CAAC,IAAI;;IAErE,6BAA6B;IAC7B,MAAM,EACJ,iBAAiB,EACjB,aAAa,EACd,GAAG,IAAA,0MAAuB;IAE3B,sDAAsD;IACtD,MAAM,iBAAiB,IAAA,2LAAM,EAA+B;IAE5D,0DAA0D;IAC1D,MAAM,cAAc,IAAA,gMAAW;0DAAC;YAC9B,IAAI,CAAC,aAAa;gBAChB,SAAS;gBACT,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,WAAW;gBACX,SAAS;gBAET,MAAM,SAAS,MAAM,iKAAU,CAAC,eAAe,CAAC;oBAC9C,MAAM;oBACN,OAAO;oBACP,MAAM;oBACN,QAAQ,wBAAwB;gBAClC;gBAEA,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;oBACjC,4CAA4C;oBAC5C,MAAM,UAAU,OAAO,IAAI;oBAmB3B,qEAAqE;oBACrE,MAAM,eAAe,QAAQ,MAAM,CAChC,GAAG;uFAAC,CAAC;4BACJ,OAAO;gCACL,GAAG,KAAK;gCACR,uEAAuE;gCACvE,UAAU,MAAM,QAAQ,IAAI,MAAM,WAAW,IAAI;4BACnD;wBACF;;oBACF,UAAU;oBAEV,IAAI,QAAQ,KAAK,EAAE,eAAe,WAAW;wBAC3C,cAAc,QAAQ,KAAK,CAAC,UAAU;oBACxC;oBACA,IAAI,QAAQ,UAAU,EAAE,eAAe,WAAW;wBAChD,cAAc,QAAQ,UAAU,CAAC,UAAU;oBAC7C,OAAO,IAAI,QAAQ,UAAU,EAAE,UAAU,WAAW;wBAClD,cAAc,KAAK,IAAI,CAAC,QAAQ,UAAU,CAAC,KAAK,GAAG;oBACrD,OAAO,IAAI,QAAQ,KAAK,EAAE,eAAe,WAAW;wBAClD,cAAc,KAAK,IAAI,CAAC,QAAQ,KAAK,CAAC,UAAU,GAAG;oBACrD;oBAEA,MAAM,eAAuC,CAAC;oBAC9C,QAAQ,MAAM,CAAC,OAAO;0EAAC,CAAC;4BACtB,MAAM,UAAU,MAAM,OAAO,IAAI,MAAM,EAAE;4BACzC,IAAI,WAAW,MAAM,IAAI,EAAE;gCACzB,YAAY,CAAC,QAAQ,GAAG,MAAM,IAAI;4BACpC;wBACF;;oBACA,cAAc;gBAChB,OAAO;oBACL,MAAM,IAAI,MAAM,OAAO,OAAO,IAAI;gBACpC;YACF,EAAE,OAAO,KAAU;gBACjB,MAAM,eAAe,IAAI,OAAO,IAAI;gBACpC,SAAS;YACX,SAAU;gBACR,WAAW;YACb;QACF;yDAAG;QAAC;QAAa;QAAa;QAAO;QAAW;KAAqB;IAErE,qDAAqD;IACrD,IAAA,8LAAS;2CAAC;YACR,MAAM,QAAQ;yDAAW;oBACvB,wBAAwB;oBACxB,sCAAsC;oBACtC,eAAe;gBACjB;wDAAG,KAAK,uBAAuB;;YAE/B;mDAAO,IAAM,aAAa;;QAC5B;0CAAG;QAAC;KAAY;IAEhB,0CAA0C;IAC1C,IAAA,8LAAS;2CAAC;YACR,eAAe;QACjB;0CAAG;QAAC;KAAU;IAEd,sCAAsC;IACtC,IAAA,8LAAS;2CAAC;YACR,eAAe,OAAO,GAAG;QAC3B;0CAAG;QAAC;KAAY;IAEhB,+DAA+D;IAC/D,IAAA,8LAAS;2CAAC;YACR,eAAe,OAAO;QACxB;0CAAG;QAAC;QAAa;QAAa;QAAW;KAAqB,GAAE,kDAAkD;IAElH,kFAAkF;IAElF,+DAA+D;IAC/D,IAAA,8LAAS;2CAAC;YACR,IAAI,CAAC,eAAe,CAAC,mBAAmB;YAExC,MAAM,EAAE,MAAM,EAAE,GAAG;YACnB,QAAQ,GAAG,CAAC,qCAAqC;gBAAE;gBAAQ,SAAS,kBAAkB,OAAO;YAAC;YAE9F,IAAI,WAAW,eAAe,WAAW,WAAW;gBAClD,QAAQ,GAAG,CAAC;gBACZ,+CAA+C;gBAC/C,MAAM,YAAY;iEAAW;wBAC3B,eAAe,OAAO;oBACxB;gEAAG;gBAEH;uDAAO,IAAM,aAAa;;YAC5B;QACF;0CAAG;QAAC;QAAmB;KAAY;IAEnC,MAAM,kBAAkB,CAAC;QACvB,QAAQ,GAAG,CAAC,cAAc;QAC1B,QAAQ,GAAG,CAAC,mBAAmB;QAC/B,IAAI,MAAM,MAAM,KAAK,SAAS;YAC5B;QACF;QAEA,IAAI,CAAC,MAAM,WAAW,EAAE;YACtB;QACF;QAEA,4BAA4B,MAAM,KAAK;QACvC,qBAAqB;YACnB,OAAO,MAAM,KAAK;YAClB,UAAU,MAAM,QAAQ,IAAI;YAC5B,YAAY,MAAM,WAAW;YAC7B,WAAW;YACX,qBACE,OAAO,MAAM,mBAAmB,KAAK,WACjC,KAAK,KAAK,CAAC,MAAM,mBAAmB,IACpC,MAAM,mBAAmB,IAAI,CAAC;QACtC;QACA,qBAAqB;IACvB;IAEA,MAAM,kBAAkB,CAAC;QACvB,QAAQ,GAAG,CAAC,mBAAmB;QAC/B,IAAI,MAAM,MAAM,KAAK,SAAS;YAC5B;QACF;QAEA,4BAA4B,MAAM,KAAK;QACvC,qBAAqB;YACnB,OAAO,MAAM,KAAK;YAClB,UAAU,MAAM,QAAQ,IAAI;YAC5B,YAAY,MAAM,WAAW,IAAI;YACjC,WAAW;YACX,qBACE,OAAO,MAAM,mBAAmB,KAAK,WACjC,KAAK,KAAK,CAAC,MAAM,mBAAmB,IACpC,MAAM,mBAAmB,IAAI,CAAC;QACtC;QACA,8BAA8B;IAChC;IAEA,MAAM,mBAAmB,CAAC;QACxB,2BAA2B;QAC3B,8BAA8B;QAC9B,yBAAyB;IAC3B;IAEA,MAAM,mBAAmB,CAAC;QAOxB,QAAQ,GAAG,CAAC,mBAAmB;QAC/B,0DAA0D;QAC1D,yBAAyB;QACzB,2BAA2B,EAAE;IAC/B;IAEA,MAAM,oBAAoB,CAAC;QACzB,iBAAiB;QACjB,0BAA0B;IAC5B;IAEA,MAAM,sBAAsB;QAC1B,IAAI,CAAC,eAAe;QAEpB,MAAM,UAAU,cAAc,OAAO,IAAI,cAAc,EAAE;QACzD,IAAI,CAAC,SAAS;YACZ,iBAAiB,sBAAsB;YACvC;QACF;QAEA,IAAI;YACF,cAAc;YACd,MAAM,SAAS,MAAM,iKAAU,CAAC,WAAW,CAAC;YAE5C,IAAI,OAAO,OAAO,EAAE;gBAClB,UAAU,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,QAC5B,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,MAAM;gBAElC,iBAAiB,8BAA8B;gBAC/C,0BAA0B;gBAC1B,iBAAiB;YACnB,OAAO;gBACL,MAAM,IAAI,MAAM,OAAO,OAAO,IAAI;YACpC;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,2BAA2B;YACzC,iBAAiB,IAAI,OAAO,IAAI,0BAA0B;QAC5D,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,qBAAqB;QACzB,0BAA0B;QAC1B,iBAAiB;IACnB;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,cAAc,KAAK,IAAI;QAC7B,IAAI,YAAY,MAAM,KAAK,GAAG;YAC5B,OAAO;QACT;QACA,MAAM,QAAQ,YAAY,KAAK,CAAC,OAAO,MAAM,CAAC,CAAA,OAAQ,KAAK,MAAM,GAAG;QACpE,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,OAAO;QACT;QACA,OAAO;IACT;IAEA,wBAAwB;IACxB,MAAM,sBAAsB,CAAC;QAC3B,MAAM,UAAU,MAAM,OAAO,IAAI,MAAM,EAAE;QACzC,wBAAwB;QACxB,mBAAmB,UAAU,CAAC,QAAQ,IAAI;QAC1C,aAAa;QACb,mBAAmB;IACrB;IAEA,MAAM,iBAAiB;QACrB,IAAI,CAAC,sBAAsB;QAE3B,MAAM,UAAU,qBAAqB,OAAO,IAAI,qBAAqB,EAAE;QACvE,IAAI,CAAC,SAAS;YACZ,iBAAiB,sBAAsB;YACvC;QACF;QAEA,8BAA8B;QAC9B,MAAM,kBAAkB,aAAa;QACrC,IAAI,iBAAiB;YACnB,aAAa;YACb;QACF;QAEA,IAAI;YACF,MAAM,WAAW,gBAAgB,IAAI;YACrC,MAAM,SAAS,MAAM,iKAAU,CAAC,eAAe,CAAC,SAAS;YAEzD,IAAI,OAAO,OAAO,EAAE;gBAClB,cAAc,CAAA,OAAQ,CAAC;wBACrB,GAAG,IAAI;wBACP,CAAC,QAAQ,EAAE;oBACb,CAAC;gBACD,iBAAiB,2BAA2B;gBAC5C,cAAc;gBACd,mBAAmB;gBACnB,wBAAwB;gBACxB,mBAAmB;gBACnB,aAAa;YACf,OAAO;gBACL,iBAAiB,OAAO,OAAO,IAAI,uBAAuB;YAC5D;QACF,EAAE,OAAO,OAAY;YACnB,MAAM,eAAe,MAAM,OAAO,IAAI;YACtC,iBAAiB,cAAc;QACjC;IACF;IAEA,MAAM,mBAAmB;QACvB,mBAAmB;QACnB,wBAAwB;QACxB,mBAAmB;QACnB,aAAa;IACf;IAEA,MAAM,uBAAuB,CAAC;QAC5B,mBAAmB;QACnB,kCAAkC;QAClC,MAAM,QAAQ,aAAa;QAC3B,aAAa;IACf;IAEA,qDAAqD;IACrD,kEAAkE;IAClE,MAAM,gBAAgB,IAAA,4LAAO;wDAAC;YAC5B,QAAQ,GAAG,CAAC,mCAAmC;gBAC7C,oBAAoB,cAAc,MAAM;gBACxC,gBAAgB,OAAO,MAAM;YAC/B;YAEA,4EAA4E;YAC5E,MAAM,YAAY;mBAAI;aAAO;YAE7B,2EAA2E;YAC3E,IAAI,cAAc,MAAM,GAAG,GAAG;gBAC5B,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,cAAc,MAAM,CAAC,8BAA8B,CAAC;gBAE5E,8CAA8C;gBAC9C,MAAM,eAA4B,cAAc,GAAG;iFAAC,CAAC,QAAU,CAAC;4BAC9D,IAAI,MAAM,EAAE;4BACZ,SAAS,MAAM,EAAE;4BACjB,OAAO,MAAM,KAAK;4BAClB,QAAQ;4BACR,WAAW,MAAM,SAAS;4BAC1B,WAAW,MAAM,SAAS;4BAC1B,aAAa;4BACb,UAAU;gCACR,UAAU;gCACV,MAAM;gCACN,QAAQ;4BACV;wBACF,CAAC;;gBAED,mDAAmD;gBACnD,MAAM,mBAAmB,UAAU,MAAM;qFAAC,CAAA,QAAS,MAAM,MAAM,KAAK;;gBACpE,MAAM,kBAAkB,UAAU,MAAM;oFAAC,CAAA,QAAS,MAAM,MAAM,KAAK;;gBAEnE,gFAAgF;gBAChF,MAAM,yBAAyB,iBAAiB,IAAI;2FAAC,CAAC,GAAG;wBACvD,MAAM,QAAQ,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;wBAC3C,MAAM,QAAQ,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;wBAC3C,OAAO,QAAQ;oBACjB;;gBAEA,2FAA2F;gBAC3F,OAAO;uBAAI;uBAAiB;uBAA2B;iBAAgB;YACzE;YAEA,2EAA2E;YAC3E,OAAO;QACT;uDAAG;QAAC;QAAQ;KAAc;IAE1B,MAAM,mBAAmB,CAAC;QACxB,aAAa;QACb,sBAAsB;IACxB;IAEA,IAAI,OAAO;QACT,qBACE,iNAAC;YAAI,WAAW,CAAC,OAAO,EAAE,WAAW;sBACnC,cAAA,iNAAC;gBAAI,WAAU;0BACb,cAAA,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAC1C,iNAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;IAOX;IAEA,qBACE,iNAAC;QAAI,WAAW,CAAC,OAAO,EAAE,WAAW;;YAElC,cAAc,IAAI,GAAG,mBACpB,iNAAC;gBAAM,yBAAyB;oBAC9B,QAAQ,CAAC;;;;;;;;;UAST,CAAC;gBACH;;;;;;0BAIF,iNAAC;gBAAI,WAAU;;kCAEb,iNAAC;wBAAI,WAAU;;0CACb,iNAAC;gCAAI,WAAU;0CACb,cAAA,iNAAC;oCAAI,OAAM;oCAAK,QAAO;oCAAK,SAAQ;oCAAY,MAAK;oCAAO,OAAM;8CAChE,cAAA,iNAAC;wCAAK,GAAE;wCAAq3B,MAAK;;;;;;;;;;;;;;;;0CAGt4B,iNAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,OAAO;oCACL,WAAW;gCACb;gCACA,WAAU;;;;;;;;;;;;kCAKd,iNAAC;wBAAI,WAAU;;0CAEb,iNAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;;kDAEV,iNAAC;wCAAI,OAAM;wCAAK,QAAO;wCAAK,SAAQ;wCAAY,MAAK;wCAAO,OAAM;kDAChE,cAAA,iNAAC;4CAAK,GAAE;4CAA6N,QAAO;4CAAe,aAAY;4CAAI,eAAc;4CAAQ,gBAAe;;;;;;;;;;;oCAC5S;;;;;;;0CAKR,iNAAC;gCAAI,WAAU;;kDACb,iNAAC;wCACC,MAAK;wCACL,SAAS,IAAM,sBAAsB,CAAC;wCACtC,WAAU;wCACV,OAAO;4CACL,WAAW;wCACb;;0DAEA,iNAAC;0DACE,cAAc,WAAW,WAAW;;;;;;0DAEvC,iNAAC,0LAAiB;gDAChB,WAAW,CAAC,yDAAyD,EAAE,qBAAqB,eAAe,IAAI;;;;;;;;;;;;oCAIlH,oCACC,iNAAC;wCAAI,WAAU;;0DACb,iNAAC;gDACC,MAAK;gDACL,SAAS,IAAM,iBAAiB;gDAChC,WAAW,CAAC,sIAAsI,EAAE,cAAc,WAAW,gCAAgC,kBACzM;0DACL;;;;;;0DAGD,iNAAC;gDACC,MAAK;gDACL,SAAS,IAAM,iBAAiB;gDAChC,WAAW,CAAC,sIAAsI,EAAE,cAAc,WAAW,gCAAgC,kBACzM;0DACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAUX,iNAAC;gBAAI,WAAU;0BACZ,wBACC,iNAAC;oBAAI,WAAU;8BACb,cAAA,iNAAC;wBAAI,WAAU;;0CACb,iNAAC;gCAAI,WAAU;;;;;;0CACf,iNAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;;;;;2BAGvC,cAAc,MAAM,KAAK,kBAC3B,iNAAC;oBAAI,WAAU;8BACb,cAAA,iNAAC;wBAAE,WAAU;kCACV,uBAAuB,0CAA0C;;;;;;;;;;2BAItE,cAAc,GAAG,CAAC,CAAC,sBACjB,iNAAC;wBAEC,WAAU;;0CAIV,iNAAC;gCAAI,WAAU;0CAEZ,MAAM,MAAM,KAAK,WAAW,MAAM,WAAW,iBAC5C;;sDACE,iNAAC;4CACC,KAAK,MAAM,WAAW;4CACtB,WAAU;4CACV,SAAQ;4CACR,QAAO;4CACP,KAAK;4CACL,IAAI;4CACJ,WAAW;4CACX,sBAAmB;4CACnB,SAAS,CAAC;gDACR,QAAQ,KAAK,CAAC,qBAAqB;gDACnC,iBAAiB,CAAA;oDACf,MAAM,SAAS,IAAI,IAAI;oDACvB,OAAO,MAAM,CAAC,MAAM,EAAE;oDACtB,OAAO;gDACT;4CACF;4CACA,aAAa;gDACX,iBAAiB,CAAA,OAAQ,IAAI,IAAI,MAAM,GAAG,CAAC,MAAM,EAAE;4CACrD;4CACA,kBAAkB,CAAC;gDACjB,MAAM,eAAe,EAAE,aAAa;gDACpC,IAAI,cAAc;oDAChB,aAAa,WAAW,GAAG;gDAC7B;gDACA,iBAAiB,CAAA;oDACf,MAAM,SAAS,IAAI,IAAI;oDACvB,OAAO,MAAM,CAAC,MAAM,EAAE;oDACtB,OAAO;gDACT;4CACF;sDACD;;;;;;wCAIA,cAAc,GAAG,CAAC,MAAM,EAAE,mBACzB,iNAAC;4CAAI,WAAU;sDACb,cAAA,iNAAC;gDACC,WAAU;gDACV,OAAO;oDACL,WAAW;gDACb;;;;;;;;;;;sDAKN,iNAAC;4CAAI,WAAU;4CAAmK,OAAO;gDAAE,QAAQ;4CAAE;;8DACnM,iNAAC;oDACC,SAAS,IAAM,gBAAgB;oDAC/B,WAAU;8DACX;;;;;;8DAGD,iNAAC;oDACC,SAAS,IAAM,kBAAkB;oDACjC,WAAU;8DACX;;;;;;;;;;;;;mDAKH,MAAM,EAAE,CAAC,UAAU,CAAC,cACtB,0DAA0D,iBAC1D,iNAAC;oCAAI,WAAU;;sDAEb,iNAAC;4CAAI,WAAU;;8DACb,iNAAC;oDAAI,WAAU;;;;;;8DACf,iNAAC;oDAAI,WAAU;;;;;;;;;;;;sDAIjB,iNAAC;4CAAI,WAAU;;8DAGb,iNAAC;oDAAI,WAAU;8DACb,cAAA,iNAAC;;0EACC,iNAAC;gEAAI,WAAU;;kFACb,iNAAC;wEAAK,WAAU;kFAA6B;;;;;;kFAC7C,iNAAC;wEAAK,WAAU;kFAAmC;;;;;;kFACnD,iNAAC;wEAAK,WAAU;wEAAqC,OAAO;4EAAE,gBAAgB;wEAAO;kFAAG;;;;;;kFACxF,iNAAC;wEAAK,WAAU;wEAAqC,OAAO;4EAAE,gBAAgB;wEAAO;kFAAG;;;;;;;;;;;;0EAE1F,iNAAC;gEAAI,WAAU;0EAAwB;;;;;;;;;;;;;;;;;8DAO3C,iNAAC;oDAAI,WAAU;8DACb,cAAA,iNAAC;wDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;yDAKrB,iNAAC;oCAAI,WAAU;8CACb,cAAA,iNAAC;wCAAI,WAAU;;0DACb,iNAAC;gDAAI,WAAU;0DACZ,MAAM,MAAM,KAAK,eAAe,kBAC/B,MAAM,MAAM,KAAK,WAAW,mBAC1B,MAAM,MAAM,KAAK,WAAW,CAAC,MAAM,WAAW,GAAG,oBAAoB;;;;;;4CAE1E,MAAM,MAAM,KAAK,8BAChB,iNAAC;gDAAI,WAAU;;;;;;4CAEhB,MAAM,MAAM,KAAK,WAAW,CAAC,MAAM,WAAW,kBAC7C,iNAAC;gDAAI,WAAU;0DAAuB;;;;;;;;;;;;;;;;;;;;;;0CAQhD,iNAAC;gCAAI,WAAU;;oCAEZ,MAAM,EAAE,CAAC,UAAU,CAAC,cACnB,+BAA+B,iBAC/B,iNAAC;wCAAI,WAAU;;0DACb,iNAAC;gDAAI,WAAU;;;;;;0DACf,iNAAC;gDAAI,WAAU;;;;;;;;;;;+CAGjB,iBAAiB,iBACjB,iNAAC;wCAAI,WAAU;;0DACb,iNAAC;gDAAG,WAAU;0DACX,MAAM,KAAK;;;;;;4CAGb,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC,iBACpC,iNAAC;gDAAI,WAAU;;kEACb,iNAAC;wDAAI,WAAU;kEACb,cAAA,iNAAC;4DAAE,WAAU;;8EACZ,iNAAC;oEAAK,WAAU;8EAA6B;;;;;;gEAAY;gEAAE,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC;;;;;;;;;;;;oDAGlG,CAAC,MAAM,EAAE,CAAC,UAAU,CAAC,6BACpB,iNAAC;wDACC,SAAS,CAAC;4DACR,EAAE,eAAe;4DACjB,oBAAoB;wDACtB;wDACA,WAAU;wDACV,OAAO,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC,GAAG,cAAc;kEAE7D,cAAA,iNAAC,uPAAU;4DACT,WAAW,CAAC,uCAAuC,EACjD,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC,GACjC,yCACA,kDACJ;;;;;;;;;;;;;;;;qEAMV,iNAAC;gDAAI,WAAU;0DACb,cAAA,iNAAC;oDAAI,WAAU;;sEACb,iNAAC;4DAAE,WAAU;sEAAqC;;;;;;wDACjD,CAAC,MAAM,EAAE,CAAC,UAAU,CAAC,6BACpB,iNAAC;4DACC,SAAS,CAAC;gEACR,EAAE,eAAe;gEACjB,oBAAoB;4DACtB;4DACA,WAAU;4DACV,OAAO,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC,GAAG,cAAc;sEAE7D,cAAA,iNAAC,uPAAU;gEACT,WAAW,CAAC,uCAAuC,EACjD,UAAU,CAAC,MAAM,OAAO,IAAI,MAAM,EAAE,CAAC,GACjC,oBACA,uCACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;oCAUjB,MAAM,EAAE,CAAC,UAAU,CAAC,cACnB,iCAAiC,iBACjC,iNAAC;wCAAI,WAAU;;0DACb,iNAAC;gDAAI,WAAU;0DACb,cAAA,iNAAC;oDAAI,WAAU;;;;;;;;;;;0DAEjB,iNAAC;gDAAI,WAAU;0DACb,cAAA,iNAAC;oDAAI,WAAU;;;;;;;;;;;;;;;;+CAInB,0CAA0C,iBAC1C,iNAAC;wCAAI,WAAU;kDACZ,CAAC,MAAM,aAAa,kBACnB,iNAAC;4CACC,SAAS,IAAM,gBAAgB;4CAC/B,UAAU,MAAM,MAAM,KAAK;4CAC3B,WAAW,CAAC,2JAA2J,EAAE,MAAM,MAAM,KAAK,UACtL,gGACA,yEACA;sDACL;;;;;;;;;;;;;;;;;;uBArNJ,MAAM,EAAE;;;;;;;;;;YAkOpB,aAAa,mBACZ,iNAAC;gBAAI,WAAU;;kCACb,iNAAC;wBACC,SAAS,IAAM,eAAe,CAAA,OAAQ,KAAK,GAAG,CAAC,GAAG,OAAO;wBACzD,UAAU,gBAAgB,KAAK;wBAC/B,WAAU;kCACX;;;;;;kCAID,iNAAC;wBAAI,WAAU;;0CACb,iNAAC;gCAAK,WAAU;;oCAA2C;oCACnD;oCAAY;oCAAK;;;;;;;4BAExB,aAAa,mBACZ,iNAAC;gCAAK,WAAU;;oCAA6B;oCACzC;oCAAW;oCAAE,eAAe,IAAI,UAAU;oCAAS;;;;;;;;;;;;;kCAK3D,iNAAC;wBACC,SAAS,IAAM,eAAe,CAAA,OAAQ,KAAK,GAAG,CAAC,YAAY,OAAO;wBAClE,UAAU,gBAAgB,cAAc;wBACxC,WAAU;kCACX;;;;;;;;;;;;YAOJ,oCACC,iNAAC;gBACC,WAAU;gBACV,SAAS,IAAM,sBAAsB;;;;;;0BAKzC,iNAAC,sLAAgB;gBACf,QAAQ;gBACR,SAAS,IAAM,qBAAqB;gBACpC,YAAY;gBACZ,iBAAiB;gBACjB,WAAW;;;;;;0BAIb,iNAAC,0LAAoB;gBACnB,QAAQ;gBACR,SAAS,IAAM,8BAA8B;gBAC7C,QAAQ;oBACN,8BAA8B;oBAC9B,iDAAiD;oBACjD,QAAQ,GAAG,CAAC;gBACd;gBACA,OAAO,oBAAoB;oBACzB,IAAI,kBAAkB,KAAK;oBAC3B,OAAO,kBAAkB,KAAK;oBAC9B,QAAQ;oBACR,KAAK,kBAAkB,UAAU;oBACjC,WAAW,kBAAkB,SAAS;oBACtC,WAAW,IAAI,OAAO,WAAW;oBACjC,WAAW,IAAI,OAAO,WAAW;gBACnC,IAAI;gBACJ,cAAc;;;;;;YAIf,mCACC,iNAAC,qLAAe;gBACd,QAAQ;gBACR,SAAS,IAAM,yBAAyB;gBACxC,QAAQ;gBACR,kBAAkB;gBAClB,OAAO;oBACL,IAAI,kBAAkB,KAAK;oBAC3B,OAAO,kBAAkB,KAAK;oBAC9B,QAAQ;oBACR,UAAU,kBAAkB,QAAQ;oBACpC,KAAK,kBAAkB,UAAU;oBACjC,WAAW,kBAAkB,SAAS;oBACtC,WAAW,IAAI,OAAO,WAAW;oBACjC,WAAW,IAAI,OAAO,WAAW;oBACjC,qBAAqB,kBAAkB,mBAAmB;gBAC5D;;;;;;0BAIJ,iNAAC,sMAA4B;gBAC3B,QAAQ;gBACR,SAAS;gBACT,WAAW;gBACX,YAAY,eAAe;gBAC3B,YAAY;;;;;;YAIb,mBAAmB,sCAClB,iNAAC;gBAAI,WAAU;0BACb,cAAA,iNAAC;oBAAI,WAAU;;sCACb,iNAAC;4BAAI,WAAU;;8CACb,iNAAC;oCAAG,WAAU;8CACX,UAAU,CAAC,qBAAqB,OAAO,IAAI,qBAAqB,EAAE,CAAC,GAAG,cAAc;;;;;;8CAEvF,iNAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CAEV,cAAA,iNAAC,wNAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAIjB,iNAAC;4BAAI,WAAU;;8CACb,iNAAC;;sDACC,iNAAC;4CAAM,WAAU;;gDAA+C;8DACpD,iNAAC;oDAAK,WAAU;8DAA6B,qBAAqB,KAAK;;;;;;;;;;;;sDAEnF,iNAAC;4CACC,OAAO;4CACP,UAAU,CAAC,IAAM,qBAAqB,EAAE,MAAM,CAAC,KAAK;4CACpD,UAAU;4CACV,aAAY;4CACZ,WAAW,CAAC,+MAA+M,EAAE,YAAY,wBAAwB,IAAI;4CACrQ,SAAS;;;;;;wCAEV,2BACC,iNAAC;4CAAE,WAAU;;8DACX,iNAAC,0PAAW;oDAAC,WAAU;;;;;;gDACtB;;;;;;;;;;;;;8CAKP,iNAAC;oCAAI,WAAU;;sDACb,iNAAC;4CACC,MAAK;4CACL,SAAS;4CACT,WAAU;sDACX;;;;;;sDAGD,iNAAC;4CACC,MAAK;4CACL,SAAS;4CACT,UAAU,CAAC,CAAC,aAAa,CAAC,gBAAgB,IAAI,MAAM,gBAAgB,IAAI,GAAG,KAAK,CAAC,OAAO,MAAM,CAAC,CAAA,OAAQ,KAAK,MAAM,GAAG,GAAG,MAAM,KAAK;4CACnI,WAAW,CAAC,0GAA0G,EACpH,aAAa,CAAC,gBAAgB,IAAI,MAAM,gBAAgB,IAAI,GAAG,KAAK,CAAC,OAAO,MAAM,CAAC,CAAA,OAAQ,KAAK,MAAM,GAAG,GAAG,MAAM,KAAK,IACnH,0DACA,qEACJ;sDACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjB;GA16BwB;;QAyCO,iMAAoB;QAG7B,+LAAW;QACX,+LAAW;QAM3B,0MAAuB;;;KAnDL"}},
    {"offset": {"line": 3447, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/features/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useRef } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useAppSelector } from '@/store/hooks'\nimport { useNotificationStore } from '@/components/ui/global-notification'\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode\n  fallback?: React.ReactNode\n}\n\nexport default function ProtectedRoute({ children, fallback }: ProtectedRouteProps) {\n  const { isAuthenticated, isLoading } = useAppSelector((state) => state.user)\n  const router = useRouter()\n  const [authCheckComplete, setAuthCheckComplete] = useState(false)\n  const { showNotification } = useNotificationStore()\n  const hasShownToast = useRef(false)\n\n  useEffect(() => {\n    // Only mark auth check complete when loading is done AND we have a definitive auth status\n    if (!isLoading) {\n      setAuthCheckComplete(true)\n    }\n  }, [isLoading])\n\n  useEffect(() => {\n    // Only redirect after auth check is complete and user is not authenticated\n    if (authCheckComplete && !isAuthenticated) {\n      // Show toast notification before redirecting (only once per component instance)\n      if (!hasShownToast.current) {\n        showNotification('Please log in to access this page.', 'info')\n        hasShownToast.current = true\n      }\n      router.push('/')\n    }\n  }, [authCheckComplete, isAuthenticated, router, showNotification])\n\n  // Show loading state while checking authentication OR if auth check is complete but user is not authenticated\n  // This prevents the protected content from rendering before redirect\n  if (isLoading || !authCheckComplete || (authCheckComplete && !isAuthenticated)) {\n    return fallback || (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Checking authentication...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // If not authenticated, don't render children (will redirect)\n  if (!isAuthenticated) {\n    return null\n  }\n\n  // If authenticated, render children\n  return <>{children}</>\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAYe,SAAS,eAAe,EAAE,QAAQ,EAAE,QAAQ,EAAuB;;IAChF,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,IAAA,8JAAc;yCAAC,CAAC,QAAU,MAAM,IAAI;;IAC3E,MAAM,SAAS,IAAA,sKAAS;IACxB,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,6LAAQ,EAAC;IAC3D,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,iMAAoB;IACjD,MAAM,gBAAgB,IAAA,2LAAM,EAAC;IAE7B,IAAA,8LAAS;oCAAC;YACR,0FAA0F;YAC1F,IAAI,CAAC,WAAW;gBACd,qBAAqB;YACvB;QACF;mCAAG;QAAC;KAAU;IAEd,IAAA,8LAAS;oCAAC;YACR,2EAA2E;YAC3E,IAAI,qBAAqB,CAAC,iBAAiB;gBACzC,gFAAgF;gBAChF,IAAI,CAAC,cAAc,OAAO,EAAE;oBAC1B,iBAAiB,sCAAsC;oBACvD,cAAc,OAAO,GAAG;gBAC1B;gBACA,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAmB;QAAiB;QAAQ;KAAiB;IAEjE,8GAA8G;IAC9G,qEAAqE;IACrE,IAAI,aAAa,CAAC,qBAAsB,qBAAqB,CAAC,iBAAkB;QAC9E,OAAO,0BACL,iNAAC;YAAI,WAAU;sBACb,cAAA,iNAAC;gBAAI,WAAU;;kCACb,iNAAC;wBAAI,WAAU;;;;;;kCACf,iNAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,8DAA8D;IAC9D,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,oCAAoC;IACpC,qBAAO;kBAAG;;AACZ;GA9CwB;;QACiB,8JAAc;QACtC,sKAAS;QAEK,iMAAoB;;;KAJ3B"}},
    {"offset": {"line": 3561, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/app/create-video/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/store\";\nimport { useNotificationStore } from \"@/components/ui/global-notification\";\nimport { useSubscription } from \"@/hooks/useSubscription\";\nimport { useUnifiedSocketContext } from \"@/components/providers/UnifiedSocketProvider\";\nimport AvatarCreationModal from \"@/components/ui/avatar-creation/AvatarCreationModal\";\nimport PendingPaymentToast from \"@/components/ui/pending-payment-toast\";\nimport SubscriptionRequiredToast from \"@/components/ui/subscription-required-toast\";\nimport PreviousVideosGallery from \"@/components/ui/previous-videos-gallery\";\nimport ProtectedRoute from \"@/components/features/auth/ProtectedRoute\";\nimport Link from \"next/link\";\n\nexport default function CreateVideoPage() {\n  const [isAvatarModalOpen, setIsAvatarModalOpen] = useState(false);\n  const [showPendingPaymentToast, setShowPendingPaymentToast] = useState(false);\n  const [pendingPaymentMessage, setPendingPaymentMessage] = useState('');\n  const [paymentContext, setPaymentContext] = useState<'video' | 'avatar'>('avatar');\n  const [showSubscriptionRequiredToast, setShowSubscriptionRequiredToast] = useState(false);\n  const [subscriptionRequiredMessage, setSubscriptionRequiredMessage] = useState('');\n  const [subscriptionContext, setSubscriptionContext] = useState<'video' | 'avatar'>('avatar');\n\n  const { user } = useSelector((state: RootState) => state.user);\n  const { showNotification } = useNotificationStore();\n  const { checkVideoUsageLimit } = useSubscription();\n  const { isAvatarProcessing, isVideoAvatarProcessing } = useUnifiedSocketContext();\n  const isAnyAvatarProcessing = isAvatarProcessing || isVideoAvatarProcessing;\n\n  const handleCustomAvatarClick = async () => {\n    if (isAnyAvatarProcessing) {\n      showNotification('Please wait for your current avatar to finish processing', 'warning');\n      return;\n    }\n    if (user?.id) {\n      try {\n        const usageCheck = await checkVideoUsageLimit();\n        \n        if (!usageCheck.canCreateVideo) {\n          if (usageCheck.message?.includes('payment is still being processed')) {\n            setPaymentContext('avatar');\n            setPendingPaymentMessage(usageCheck.message);\n            setShowPendingPaymentToast(true);\n            return;\n          } else if (usageCheck.message?.includes('No active subscription found') || usageCheck.message?.includes('Please subscribe')) {\n            setSubscriptionContext('avatar');\n            setSubscriptionRequiredMessage(usageCheck.message);\n            setShowSubscriptionRequiredToast(true);\n            return;\n          } else {\n            showNotification(usageCheck.message || 'Unable to create avatar', 'error');\n            return;\n          }\n        }\n        \n        setIsAvatarModalOpen(true);\n      } catch (error) {\n        console.error('Failed to check subscription status:', error);\n        showNotification('Unable to verify subscription status. Please try again.', 'error');\n      }\n    } else {\n      showNotification('Please log in to create a custom avatar', 'warning');\n    }\n  };\n\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-white\">\n        <div className=\"max-w-[1260px] mx-auto xl:px-0 px-3 lg:py-20 py-10\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-[37px] md:text-4xl leading-[40px] lg:text-[42px] font-semibold text-[#171717] mb-4\">\n              Create Videos Effortlessly\n            </h1>\n            <p className=\"text-lg md:text-[20px] text-[#5F5F5F] max-w-3xl mx-auto leading-[24px]\">\n              Custom AI videos for agents & loan officersjust fill one form, <br className=\"hidden md:block\" /> hit submit, and we handle the rest.\n            </p>\n          </div>\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center mb-10\">\n            <button \n              onClick={handleCustomAvatarClick}\n              disabled={isAnyAvatarProcessing}\n              className={`inline-flex items-center md:w-fit w-full justify-center px-4 py-[9.4px] md:text-[20px] text-[18px] font-semibold rounded-full transition-all !duration-300 border-2 ${\n                isAnyAvatarProcessing \n                  ? 'bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed' \n                  : 'bg-[#5046E5] text-white cursor-pointer hover:bg-transparent hover:text-[#5046E5] border-[#5046E5]'\n              }`}>\n              {isAnyAvatarProcessing ? 'Processing...' : 'Custom Avatar'}\n            </button>\n            <Link\n              href=\"/create-video/new\"\n              className=\"inline-flex items-center md:max-w-[167px] max-w-full w-full justify-center gap-2 px-6 py-[9.4px] bg-[#5046E5] text-white rounded-full md:text-[20px] text-[18px] hover:bg-transparent hover:text-[#5046E5] border-2 border-[#5046E5] transition-all duration-300 font-semibold whitespace-nowrap\"\n            >\n              Create Video\n            </Link>\n          </div>\n\n          <div className=\"pt-4\">\n            <PreviousVideosGallery />\n          </div>\n        </div>\n\n        <AvatarCreationModal \n          isOpen={isAvatarModalOpen}\n          onClose={() => setIsAvatarModalOpen(false)}\n        />\n\n        <PendingPaymentToast\n          isVisible={showPendingPaymentToast}\n          message={pendingPaymentMessage}\n          context={paymentContext}\n          onClose={() => setShowPendingPaymentToast(false)}\n          onRefresh={async () => {\n            try {\n              const usageCheck = await checkVideoUsageLimit();\n              if (usageCheck.canCreateVideo) {\n                setShowPendingPaymentToast(false);\n                showNotification('Payment confirmed! You can now create avatars.', 'success');\n              } else if (usageCheck.message?.includes('payment is still being processed')) {\n                setPendingPaymentMessage(usageCheck.message);\n              } else {\n                setShowPendingPaymentToast(false);\n                showNotification(usageCheck.message || 'Unable to create content', 'error');\n              }\n            } catch (error) {\n              console.error('Failed to refresh subscription status:', error);\n              showNotification('Unable to verify payment status. Please try again.', 'error');\n            }\n          }}\n        />\n\n        <SubscriptionRequiredToast\n          isVisible={showSubscriptionRequiredToast}\n          message={subscriptionRequiredMessage}\n          context={subscriptionContext}\n          onClose={() => setShowSubscriptionRequiredToast(false)}\n          onSubscribe={() => {\n            window.location.href = '/#pricing'\n          }}\n        />\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}