{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/task2/src/components/ui/create-video-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback, useRef } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { Check, AlertCircle } from 'lucide-react'\nimport ScheduleInterface from './schedule-interface'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { AppDispatch, RootState } from '@/store'\nimport { setVideoLoading, setVideoError, createVideoRequest, clearVideoError, VideoRequest } from '@/store/slices/videoSlice'\nimport CreateVideoModal from './create-video-modal'\nimport { apiService } from '@/lib/api-service'\nimport { useSearchParams } from 'next/navigation'\nimport { Avatar, Trend } from '@/lib/api-service'\nimport { useAvatarStorage, type SelectedAvatars } from '@/hooks/useAvatarStorage'\nimport { useSubscription } from '@/hooks/useSubscription'\nimport { useUserSettings } from '@/hooks/useUserSettings'\nimport { useSchedule } from '@/hooks/useSchedule'\nimport HybridTopicInput from './hybrid-topic-input'\nimport FormInput from './form-input'\nimport FormHeader from './form-header'\nimport FormFieldRow from './form-field-row'\nimport FormDropdown from './form-dropdown'\nimport SubmitButton from './submit-button'\nimport SchedulePostModal from './schedule-post-modal'\nimport ConnectAccountsModal from './connect-accounts-modal'\nimport FormLoadingOverlay from './form-loading-overlay'\nimport AvatarSelectionStatus from './avatar-selection-status'\nimport { row2Fields, row3Fields } from './form-field-configs'\nimport { createVideoSchema, type CreateVideoFormData } from './form-validation-schema'\nimport UsageLimitToast from './usage-limit-toast'\nimport PendingPaymentToast from './pending-payment-toast'\nimport SubscriptionRequiredToast from './subscription-required-toast'\nimport { useUnifiedSocketContext } from '../providers/UnifiedSocketProvider'\nimport VoiceSelectorWrapper from './voice-selector-wrapper'\nimport { Voice, VoiceType } from './voice-selector/types'\nimport MusicSelectorWrapper from './music-selector-wrapper'\nimport { useVoicesAndMusic } from '@/hooks/useVoicesAndMusic'\nimport { useNotificationStore } from './global-notification'\n\nconst promptOptions = [\n  { value: 'Shawheen V1', label: 'Shawheen V1' },\n]\n\n// Original avatar options for simple dropdown\nconst avatarOptions = [\n  { value: 'Gorilla-1', label: 'Gorilla 1' },\n  { value: 'Shawheen', label: 'Shawheen' },\n  { value: 'Verified HeyGen Avatar', label: 'Verified HeyGen Avatar' },\n  { value: 'Varied', label: 'Varied' }\n]\n\n// Extended avatar options for big dropdown (includes all options)\nconst extendedAvatarOptions = [\n  { value: 'Gorilla-1', label: 'Gorilla 1' },\n  { value: 'Shawheen', label: 'Shawheen' },\n  { value: 'Verified HeyGen Avatar', label: 'Verified HeyGen Avatar' },\n  { value: 'Varied', label: 'Varied' },\n  { value: 'SHF34020', label: 'SHF34020' },\n  { value: 'FRM89034', label: 'FRM89034' },\n  { value: 'VAL77889', label: 'VAL77889' },\n  { value: 'PIP34567', label: 'PIP34567' },\n  { value: 'PN100234', label: 'PN100234' },\n  { value: 'CON11223', label: 'CON11223' },\n  { value: 'XTR12340', label: 'XTR12340' },\n  { value: 'DRV34567', label: 'DRV34567' },\n  { value: 'BLD67543', label: 'BLD67543' },\n  { value: 'Account', label: 'Account' },\n  { value: 'FRM11223', label: 'FRM11223' },\n  { value: 'SHF56789', label: 'SHF56789' }\n]\n\nconst positionOptions = [\n  { value: 'Real Estate Agent', label: 'Real Estate Agent' },\n  { value: 'Real Estate Broker', label: 'Real Estate Broker' },\n  { value: 'Loan Broker', label: 'Loan Broker' },\n  { value: 'Loan Officer', label: 'Loan Officer' }\n]\n\nconst presetOptions = [\n  { value: 'Low', label: 'Low' },\n  { value: 'Medium', label: 'Medium' },\n  { value: 'High', label: 'High' }\n]\n\nconst languageOptions = [\n  { value: 'English', label: 'English' },\n  { value: 'Spanish', label: 'Spanish' },\n]\n\nconst videoCaptionOptions = [\n  { value: 'yes', label: 'Yes' },\n  { value: 'no', label: 'No' }\n]\n\ninterface CreateVideoFormProps {\n  className?: string\n}\n\nexport default function CreateVideoForm({ className }: CreateVideoFormProps) {\n  const dispatch = useDispatch<AppDispatch>()\n  const { isLoading, error } = useSelector((state: RootState) => state.video)\n  const { user } = useSelector((state: RootState) => state.user)\n  const searchParams = useSearchParams()\n  const { latestAvatarUpdate } = useUnifiedSocketContext()\n  const { saveSelectedAvatars } = useAvatarStorage()\n  const { checkVideoUsageLimit } = useSubscription()\n\n  const [showSuccessToast] = useState(false)\n  const [openDropdown, setOpenDropdown] = useState<string | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [formDataForModal] = useState<CreateVideoFormData | null>(null)\n  const [showScheduleModal, setShowScheduleModal] = useState(false)\n  const [showConnectAccountsModal, setShowConnectAccountsModal] = useState(false)\n  const [scheduleData, setScheduleData] = useState<any>(null)\n  const [autoFilling, setAutoFilling] = useState(false)\n  const [isFormReady, setIsFormReady] = useState(false)\n  const [isScheduleMode, setIsScheduleMode] = useState(false)\n  const [webhookResponse, setWebhookResponse] = useState<{\n    prompt?: string\n    description?: string\n    conclusion?: string\n    company_name?: string\n    social_handles?: string\n    license?: string\n    avatar?: string\n    email?: string\n    voice_id?: string\n  } | null>(null)\n  const [isFromDefaultAvatar, setIsFromDefaultAvatar] = useState(false)\n  const [avatars, setAvatars] = useState<{ custom: Avatar[], default: Avatar[] }>({ custom: [], default: [] })\n  const [avatarsLoading, setAvatarsLoading] = useState(false)\n  const [avatarsError, setAvatarsError] = useState<string | null>(null)\n  \n  // City trends state\n  const [cityTrends, setCityTrends] = useState<Trend[]>([])\n  const [cityTrendsLoading, setCityTrendsLoading] = useState(false)\n  const [cityTrendsError, setCityTrendsError] = useState<string | null>(null)\n  const [lastFetchedCity, setLastFetchedCity] = useState<string | null>(null)\n  const [lastFetchedPosition, setLastFetchedPosition] = useState<string | null>(null)\n  const [missingFieldsError, setMissingFieldsError] = useState<string | null>(null)\n  const [realEstateValidationError, setRealEstateValidationError] = useState<string | null>(null)\n  // Use schedule hook\n  const { scheduleData: autoScheduleData, scheduleLoading, fetchSchedule } = useSchedule()\n  const safeCityTrends = Array.isArray(cityTrends) ? cityTrends : []\n  \n  // Use only city trends for the dropdown\n  const allTrends = safeCityTrends\n\n  // Drag and drop state\n  const [selectedAvatars, setSelectedAvatars] = useState<{\n    title: Avatar | null,\n    body: Avatar | null,\n    conclusion: Avatar | null\n  }>({\n    title: null,\n    body: null,\n    conclusion: null\n  })\n  const [draggedAvatar, setDraggedAvatar] = useState<Avatar | null>(null)\n  \n  // Usage limit toast state\n  const [showUsageToast, setShowUsageToast] = useState(false)\n  const [usageToastMessage, setUsageToastMessage] = useState('')\n  \n  // Pending payment toast state\n  const [showPendingPaymentToast, setShowPendingPaymentToast] = useState(false)\n  const [pendingPaymentMessage, setPendingPaymentMessage] = useState('')\n  \n  // Subscription required toast state\n  const [showSubscriptionRequiredToast, setShowSubscriptionRequiredToast] = useState(false)\n  const [subscriptionRequiredMessage, setSubscriptionRequiredMessage] = useState('')\n\n  // Custom topic state\n  const [showCustomTopicInput, setShowCustomTopicInput] = useState(false)\n  const [customTopicValue, setCustomTopicValue] = useState('')\n  const [lastApiTriggeredValue, setLastApiTriggeredValue] = useState<string>('')\n  \n  // User settings loading state\n  const [userSettingsLoaded, setUserSettingsLoaded] = useState(false)\n  const [savedVideoTopic, setSavedVideoTopic] = useState<string | null>(null)\n  \n  // Custom topic key points generation state\n  const [keyPointsLoading, setKeyPointsLoading] = useState(false)\n  const [keyPointsError, setKeyPointsError] = useState<string | null>(null)\n  \n  // Track if form has been manually touched to avoid showing validation errors on prefilled forms\n  const [formManuallyTouched, setFormManuallyTouched] = useState(false)\n  // Track if form submission was attempted (using state to trigger re-renders)\n  const [submitAttempted, setSubmitAttempted] = useState(false)\n  const { showNotification } = useNotificationStore()\n  \n  // Voice selection state\n  const [selectedVoice, setSelectedVoice] = useState<Voice | null>(null)\n  const [draggedVoice, setDraggedVoice] = useState<Voice | null>(null)\n  const [isVoiceManuallySelected, setIsVoiceManuallySelected] = useState(false)\n\n  // Music selection state\n  const [selectedMusic, setSelectedMusic] = useState<Voice | null>(null)\n  const [draggedMusic, setDraggedMusic] = useState<Voice | null>(null)\n\n\n  // Check if user came from Default Avatar button\n  useEffect(() => {\n    const source = searchParams.get('source')\n    if (source === 'defaultAvatar') {\n      setIsFromDefaultAvatar(true)\n    }\n  }, [searchParams])\n\n\n\n  // Fetch avatars function - extracted to be reusable\n  const fetchAvatars = useCallback(async () => {\n    try {\n      setAvatarsLoading(true)\n      setAvatarsError(null)\n      const response = await apiService.getAvatars()\n\n      if (response.success) {\n        // Handle both response structures: direct response or nested under data\n        const avatarData = (response as any).data || response;\n\n        const customAvatars = (avatarData as any).custom || (response as any).custom || [];\n        const defaultAvatars = (avatarData as any).default || (response as any).default || [];\n        \n\n        setAvatars({\n          custom: customAvatars,\n          default: defaultAvatars\n        })\n\n        // Explicitly clear any previous errors\n        setAvatarsError(null)\n      } else {\n        setAvatarsError(response.message || 'Failed to fetch avatars')\n      }\n    } catch (error: any) {\n      // If API endpoint doesn't exist (404), show a more user-friendly message\n      if (error.message?.includes('Not Found') || error.message?.includes('404')) {\n        setAvatarsError('Avatar API not yet implemented. Using fallback options.')\n      } else {\n        setAvatarsError(error.message || 'Failed to load avatars')\n      }\n    } finally {\n      setAvatarsLoading(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    fetchAvatars()\n    fetchSchedule()\n  }, [fetchAvatars, fetchSchedule])\n\n  useEffect(() => {\n    if (latestAvatarUpdate) {\n      const isAvatarComplete = (latestAvatarUpdate.step === 'complete' || latestAvatarUpdate.step === 'ready') &&\n        latestAvatarUpdate.status === 'success' &&\n        (latestAvatarUpdate.data?.message?.toLowerCase().includes('avatar') ||\n          latestAvatarUpdate.data?.message?.toLowerCase().includes('ready'))\n\n      if (isAvatarComplete) {\n        setTimeout(() => {\n          fetchAvatars()\n        }, 1000)\n      }\n    }\n  }, [latestAvatarUpdate, fetchAvatars])\n\n  // Helper function to check if avatar is pending\n  const isAvatarPending = (avatar: Avatar) => {\n    // Only check pending status for custom avatars, default avatars should always be selectable\n    const isCustomAvatar = avatars.custom.some(customAvatar => customAvatar.avatar_id === avatar.avatar_id)\n    return isCustomAvatar && (avatar.status === 'pending' || avatar.status === 'processing' || avatar.status === 'creating')\n  }\n\n  // Helper function to determine if avatar is custom or default\n  const getAvatarType = (avatar: Avatar): 'custom' | 'default' => {\n    return avatars.custom.some(customAvatar => customAvatar.avatar_id === avatar.avatar_id) ? 'custom' : 'default'\n  }\n\n  // All avatar types are allowed to mix (custom image, custom video, default)\n  const isAvatarTypeAllowed = (_avatar: Avatar): boolean => {\n      return true\n  }\n\n  // Drag and drop handlers\n  const handleDragStart = (e: React.DragEvent, avatar: Avatar) => {\n    e.stopPropagation()\n    setDraggedAvatar(avatar)\n    e.dataTransfer.effectAllowed = 'move'\n    e.dataTransfer.setData('text/plain', avatar.avatar_id)\n\n    // Add visual feedback to the dragged element\n    const target = e.target as HTMLElement\n    target.classList.add('dragging')\n  }\n\n  const handleDragEnd = (e: React.DragEvent) => {\n    e.stopPropagation()\n    // Remove visual feedback\n    const target = e.target as HTMLElement\n    target.classList.remove('dragging')\n    setDraggedAvatar(null)\n  }\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    e.dataTransfer.dropEffect = 'move'\n\n    // Add visual feedback to drop zone\n    const target = e.currentTarget as HTMLElement\n    target.classList.add('drag-over')\n  }\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.stopPropagation()\n    // Remove visual feedback from drop zone\n    const target = e.currentTarget as HTMLElement\n    target.classList.remove('drag-over')\n  }\n\n  const handleDrop = (e: React.DragEvent, dropZone: 'title' | 'body' | 'conclusion') => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    // Remove visual feedback\n    const target = e.currentTarget as HTMLElement\n    target.classList.remove('drag-over')\n\n    if (draggedAvatar) {\n      // Check if avatar type is allowed based on existing selections\n      if (!isAvatarTypeAllowed(draggedAvatar)) {\n        setDraggedAvatar(null)\n        return // Don't allow drop if avatar type doesn't match existing selections\n      }\n\n      setSelectedAvatars(prev => ({\n        ...prev,\n        [dropZone]: draggedAvatar\n      }))\n\n      // Update the form field with the selected avatar\n      setValue('avatar', draggedAvatar.avatar_id)\n      trigger('avatar')\n    }\n    setDraggedAvatar(null)\n  }\n\n  const handleRemoveAvatar = (dropZone: 'title' | 'body' | 'conclusion') => {\n\n\n    setSelectedAvatars(prev => ({\n      ...prev,\n      [dropZone]: null\n    }))\n\n    // Update form field - use the first remaining avatar or clear if none\n    const remainingAvatars = Object.values({\n      ...selectedAvatars,\n      [dropZone]: null\n    }).filter(Boolean) as Avatar[]\n\n    if (remainingAvatars.length > 0) {\n      setValue('avatar', remainingAvatars[0].avatar_id)\n    } else {\n      setValue('avatar', '')\n      console.log('ðŸ”„ Cleared form field - no avatars remaining')\n    }\n    trigger('avatar')\n  }\n\n  const handleClearAllAvatars = () => {\n    setSelectedAvatars({\n      title: null,\n      body: null,\n      conclusion: null\n    })\n    setValue('avatar', '')\n    trigger('avatar')\n  }\n\n  // Voice handlers\n  const handleVoiceClick = (voice: Voice) => {\n    console.log('ðŸŽ¤ create-video-form - handleVoiceClick called:', voice.name, voice.id, voice.type)\n    \n    // Mark that user has manually selected a voice (prevents auto-select from overriding)\n    setIsVoiceManuallySelected(true)\n    \n    // Update selected voice FIRST (this is the source of truth)\n    setSelectedVoice(voice)\n    \n    // Then update form value to match selected voice\n    setValue('voice', voice.id, { shouldValidate: true, shouldDirty: true })\n    trigger('voice')\n    \n    // Update voice type to match selected voice\n    setCurrentVoiceType(voice.type)\n    \n    console.log('ðŸŽ¤ create-video-form - Updated selectedVoice to:', voice.name, voice.id, 'Form value updated to:', voice.id)\n  }\n\n  const handleVoiceDragStart = (e: React.DragEvent, voice: Voice) => {\n    setDraggedVoice(voice)\n    e.dataTransfer.effectAllowed = 'move'\n    e.dataTransfer.setData('text/plain', voice.id)\n    const target = e.target as HTMLElement\n    target.classList.add('dragging')\n  }\n\n  const handleVoiceDragEnd = (e: React.DragEvent) => {\n    const target = e.target as HTMLElement\n    target.classList.remove('dragging')\n    setDraggedVoice(null)\n  }\n\n  const handleVoiceDragOver = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    e.dataTransfer.dropEffect = 'move'\n    const target = e.currentTarget as HTMLElement\n    target.classList.add('drag-over')\n  }\n\n  const handleVoiceDragLeave = (e: React.DragEvent) => {\n    e.stopPropagation()\n    const target = e.currentTarget as HTMLElement\n    target.classList.remove('drag-over')\n  }\n\n  const handleVoiceDrop = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    \n    const target = e.currentTarget as HTMLElement\n    target.classList.remove('drag-over')\n    \n    if (draggedVoice) {\n      handleVoiceClick(draggedVoice)\n    }\n    setDraggedVoice(null)\n  }\n\n  // Music handlers (reusing same structure as voice)\n  const handleMusicClick = (music: Voice) => {\n    // Ensure we're setting the correct music - use the music object passed from the click\n    setSelectedMusic(music)\n    setValue('music', music.id, { shouldValidate: true })\n    trigger('music')\n    // Don't sync voice - voice and music are independent\n  }\n\n  const handleMusicDragStart = (e: React.DragEvent, music: Voice) => {\n    setDraggedMusic(music)\n    e.dataTransfer.effectAllowed = 'move'\n    e.dataTransfer.setData('text/plain', music.id)\n    const target = e.target as HTMLElement\n    target.classList.add('dragging')\n  }\n\n  const handleMusicDragEnd = (e: React.DragEvent) => {\n    const target = e.target as HTMLElement\n    target.classList.remove('dragging')\n    setDraggedMusic(null)\n  }\n\n  const handleMusicDragOver = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    e.dataTransfer.dropEffect = 'move'\n    const target = e.currentTarget as HTMLElement\n    target.classList.add('drag-over')\n  }\n\n  const handleMusicDragLeave = (e: React.DragEvent) => {\n    e.stopPropagation()\n    const target = e.currentTarget as HTMLElement\n    target.classList.remove('drag-over')\n  }\n\n  const handleMusicDrop = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    \n    const target = e.currentTarget as HTMLElement\n    target.classList.remove('drag-over')\n    \n    if (draggedMusic) {\n      handleMusicClick(draggedMusic)\n    }\n    setDraggedMusic(null)\n  }\n\n  // Click-to-select functionality - automatically assigns to drag & drop slots\n  const handleAvatarClick = (avatar: Avatar) => {\n    if (isAvatarPending(avatar)) {\n      return // Don't allow selection of pending avatars\n    }\n    \n    const isSelected = isAvatarSelected(avatar)\n    \n    if (isSelected) {\n      // Remove from selection and clear corresponding drag & drop slot\n      if (selectedAvatars.title?.avatar_id === avatar.avatar_id) {\n        setSelectedAvatars(prev => ({ ...prev, title: null }))\n      } else if (selectedAvatars.body?.avatar_id === avatar.avatar_id) {\n        setSelectedAvatars(prev => ({ ...prev, body: null }))\n      } else if (selectedAvatars.conclusion?.avatar_id === avatar.avatar_id) {\n        setSelectedAvatars(prev => ({ ...prev, conclusion: null }))\n      }\n      \n      // Update form field - use the first remaining avatar or clear if none\n      const remainingAvatars = Object.values({\n        ...selectedAvatars,\n        title: selectedAvatars.title?.avatar_id === avatar.avatar_id ? null : selectedAvatars.title,\n        body: selectedAvatars.body?.avatar_id === avatar.avatar_id ? null : selectedAvatars.body,\n        conclusion: selectedAvatars.conclusion?.avatar_id === avatar.avatar_id ? null : selectedAvatars.conclusion\n      }).filter(Boolean) as Avatar[]\n      \n      if (remainingAvatars.length > 0) {\n        setValue('avatar', remainingAvatars[0].avatar_id)\n      } else {\n        setValue('avatar', '')\n      }\n      trigger('avatar')\n    } else {\n      // Check if avatar type is allowed based on existing selections\n      if (!isAvatarTypeAllowed(avatar)) {\n        return // Don't allow selection if avatar type doesn't match existing selections\n      }\n      \n      // Check if we can add more avatars (max 3)\n      const totalSelected = [selectedAvatars.title, selectedAvatars.body, selectedAvatars.conclusion].filter(Boolean).length\n      \n      if (totalSelected < 3) {\n        // Auto-assign to next available slot\n        if (!selectedAvatars.title) {\n          setSelectedAvatars(prev => ({ ...prev, title: avatar }))\n          setValue('avatar', avatar.avatar_id)\n        } else if (!selectedAvatars.body) {\n          setSelectedAvatars(prev => ({ ...prev, body: avatar }))\n          setValue('avatar', avatar.avatar_id)\n        } else if (!selectedAvatars.conclusion) {\n          setSelectedAvatars(prev => ({ ...prev, conclusion: avatar }))\n          setValue('avatar', avatar.avatar_id)\n        }\n        trigger('avatar')\n      } else {\n        console.log('ðŸš« Maximum avatars (3) already selected')\n      }\n    }\n  }\n\n  // Helper function to get selection number for an avatar (based on drag & drop slots)\n  const getAvatarSelectionNumber = (avatar: Avatar) => {\n    if (selectedAvatars.title?.avatar_id === avatar.avatar_id) return 1\n    if (selectedAvatars.body?.avatar_id === avatar.avatar_id) return 2\n    if (selectedAvatars.conclusion?.avatar_id === avatar.avatar_id) return 3\n    return null\n  }\n\n  // Helper function to check if avatar is selected (unified check)\n  const isAvatarSelected = (avatar: Avatar) => {\n    return selectedAvatars.title?.avatar_id === avatar.avatar_id ||\n           selectedAvatars.body?.avatar_id === avatar.avatar_id ||\n           selectedAvatars.conclusion?.avatar_id === avatar.avatar_id\n  }\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    setValue,\n    watch,\n    trigger\n  } = useForm<CreateVideoFormData>({\n    resolver: zodResolver(createVideoSchema),\n    mode: 'onSubmit',\n    defaultValues: {\n      prompt: 'Shawheen V1',\n      avatar: '',\n      name: '',\n      position: '',\n      companyName: '',\n      license: '',\n      tailoredFit: '',\n      socialHandles: '',\n      videoTopic: '',\n      topicKeyPoints: '',\n      city: '',\n      preferredTone: '',\n      callToAction: '',\n      email: '',\n      preset: '',\n      voice: '',\n      music: '',\n      language: '',\n      gender: '',\n      videoCaption: ''\n    }\n  })\n\n  // Voice and Music state - using hook\n  const preset = watch('preset')\n  const gender = watch('gender') || null\n  const {\n    voices,  // Filtered voices based on preset\n    voicesLoading,\n    voicesError,\n    musicList,  // Filtered music based on preset\n    musicLoading,\n    musicError,\n    allVoices,  // All voices (low, medium, high)\n    allMusic  // All music (low, medium, high)\n  } = useVoicesAndMusic({\n    preset,\n    selectedAvatars,\n    gender\n  })\n  \n  // Track current filter type for voice/music dropdowns\n  const [currentVoiceType, setCurrentVoiceType] = useState<VoiceType | null>(null)\n  const [currentMusicType, setCurrentMusicType] = useState<'low' | 'medium' | 'high' | null>(null)\n\n  // Mark form as manually touched when any form field changes\n  const handleFormFieldChange = () => {\n    setFormManuallyTouched(true)\n  }\n  \n  // Show errors when form submission is attempted and validation fails\n  useEffect(() => {\n    if (submitAttempted && Object.keys(errors).length > 0 && !formManuallyTouched) {\n      setFormManuallyTouched(true)\n    }\n  }, [errors, formManuallyTouched, submitAttempted])\n  \n  // Store user settings data for voice/music selection\n  const [userSettingsData, setUserSettingsData] = useState<{\n    selectedVoiceId?: string\n    selectedMusicTrackId?: string\n    selectedVoicePreset?: string\n    selectedMusicPreset?: string\n    gender?: string\n    preset?: string\n  } | null>(null)\n  const [isApplyingUserSettings, setIsApplyingUserSettings] = useState(false)\n  const [hasUserSettingsWithGender, setHasUserSettingsWithGender] = useState(false)\n  const presetFromUserSettingsRef = useRef<boolean>(false)\n  const hasUserVoiceMusicPresetsRef = useRef<boolean>(false) // Track if user-settings has specific voice/music presets\n\n  // User settings hook\n  const { fetchUserSettings, saveUserSettings } = useUserSettings({\n    userEmail: user?.email,\n    avatars,\n    setSelectedAvatars,\n    setValue\n  })\n\n  // Generate key points for custom topic\n  const generateCustomTopicKeyPoints = useCallback(async (description: string) => {\n    if (!description || description.trim() === '') {\n      return\n    }\n\n    try {\n      setKeyPointsLoading(true)\n      setKeyPointsError(null)\n      // Clear topicKeyPoints field when API call starts\n      setValue('topicKeyPoints', '', { shouldValidate: false, shouldDirty: true })\n      const response = await apiService.getDescriptionKeypoints(description.trim())\n      \n      if (response.success && response.data) {\n        const keypoints = response.data.keypoints || ''\n        if (keypoints.trim()) {\n          console.log('ðŸŽ¯ Auto-generated key points for custom topic:', keypoints)\n          setValue('topicKeyPoints', keypoints, { shouldValidate: true, shouldDirty: true })\n          trigger('topicKeyPoints')\n        }\n        // Set videoTopic field AFTER API confirmation\n        setValue('videoTopic', description.trim(), { shouldValidate: true, shouldDirty: true })\n        // Track the value that triggered this API call\n        setLastApiTriggeredValue(description.trim())\n      } else {\n        setKeyPointsError(response.message || 'Failed to generate key points')\n      }\n    } catch (error: any) {\n      console.error('Key points generation error:', error)\n      setKeyPointsError(error.message || 'Failed to generate key points')\n    } finally {\n      setKeyPointsLoading(false)\n    }\n  }, [setValue, trigger])\n\n  // Fetch city trends function\n  const fetchCityTrends = useCallback(async (city: string, position?: string) => {\n    const cityValue = city?.trim() || ''\n    const positionValue = position?.trim() || watch('position')?.trim() || ''\n    \n    // Check if both city and position are provided\n    if (!cityValue || !positionValue) {\n      setCityTrends([])\n      setLastFetchedCity(null)\n      setLastFetchedPosition(null)\n      setMissingFieldsError('Please select the position and city first')\n      setCityTrendsError(null)\n      return\n    }\n\n    // Clear missing fields error if both are present\n    setMissingFieldsError(null)\n    \n    // Create cache key from both city and position\n    const cacheKey = `${cityValue}|${positionValue}`\n    const lastCacheKey = lastFetchedCity && lastFetchedPosition \n      ? `${lastFetchedCity}|${lastFetchedPosition}` \n      : null\n    \n    // Don't fetch if we already have trends for this city and position combination\n    if (cacheKey === lastCacheKey) {\n      return\n    }\n\n    try {\n      setCityTrendsLoading(true)\n      setCityTrendsError(null)\n      setMissingFieldsError(null)\n      const response = await apiService.getCityTrends(cityValue, positionValue)\n      \n      if (response.success && response.data) {\n        const trendsData = response.data.trends || []\n        \n        if (Array.isArray(trendsData)) {\n          setCityTrends(trendsData)\n          setCityTrendsError(null)\n          setMissingFieldsError(null)\n          setRealEstateValidationError(null)\n          setLastFetchedCity(cityValue)\n          setLastFetchedPosition(positionValue)\n          \n          // Pre-select saved video topic if it exists in the fetched trends\n          if (savedVideoTopic && savedVideoTopic.trim()) {\n            const matchingTrend = trendsData.find(trend => trend.description === savedVideoTopic)\n            if (matchingTrend) {\n              console.log('ðŸŽ¯ Pre-selecting saved video topic from city trends:', savedVideoTopic)\n              setValue('videoTopic', savedVideoTopic)\n              setValue('topicKeyPoints', matchingTrend.keypoints)\n              trigger('videoTopic')\n            }\n          }\n        } else {\n          console.error('City trends data is not an array:', trendsData)\n          setCityTrendsError('Invalid city trends data format')\n          setCityTrends([])\n        }\n      } else {\n        const errorMessage = response.message || response.error || 'Failed to fetch city trends'\n        \n        // Check if this is a real estate validation error\n        const isRealEstateValidationError = errorMessage.includes('must be related to real estate topics') ||\n          errorMessage.includes('Required categories:') ||\n          errorMessage.includes('Real Estate') ||\n          errorMessage.includes('Examples include')\n        \n        if (isRealEstateValidationError) {\n          setRealEstateValidationError(errorMessage)\n          setCityTrendsError(null)\n        } else {\n          setCityTrendsError(errorMessage)\n          setRealEstateValidationError(null)\n        }\n        setCityTrends([])\n      }\n    } catch (error: any) {\n      console.error('City trends fetch error:', error)\n      const errorMessage = error.message || 'Failed to load city trends'\n      \n      // Check if this is a real estate validation error\n      const isRealEstateValidationError = errorMessage.includes('must be related to real estate topics') ||\n        errorMessage.includes('Required categories:') ||\n        errorMessage.includes('Real Estate') ||\n        errorMessage.includes('Examples include')\n      \n      if (isRealEstateValidationError) {\n        setRealEstateValidationError(errorMessage)\n        setCityTrendsError(null)\n      } else {\n        setCityTrendsError(errorMessage)\n        setRealEstateValidationError(null)\n      }\n      setCityTrends([])\n    } finally {\n      setCityTrendsLoading(false)\n    }\n  }, [lastFetchedCity, lastFetchedPosition, savedVideoTopic, setValue, trigger, watch])\n\n  // Watch position changes and trigger city trends fetch\n  const watchedPosition = watch('position')\n  useEffect(() => {\n    const cityValue = watch('city')\n    if (watchedPosition && watchedPosition.trim() && cityValue && cityValue.trim()) {\n      console.log('ðŸ¢ Position changed, fetching city trends with position:', watchedPosition)\n      fetchCityTrends(cityValue, watchedPosition)\n    } else if (watchedPosition && watchedPosition.trim()) {\n      // Position is set but city is not - show error message\n      setMissingFieldsError('Please select the position and city first')\n    }\n  }, [watchedPosition, fetchCityTrends, watch])\n\n  // Auto-select random voice and music when preset is selected and data is loaded\n  // When preset changes, ALWAYS update both voice and music to match the preset\n  // Skip if we're applying user settings OR if preset was initially set from user settings (to preserve saved selections)\n  // Allow random selection if user manually changes preset after initial load\n  useEffect(() => {\n    // Only skip random selection if:\n    // 1. We're currently applying user settings, OR\n    // 2. Preset was set from user settings AND we have user settings with gender (initial load only, before user manually changes preset)\n    // 3. We have user settings data waiting to be applied (prevents race condition)\n    // 4. Preset came from user-settings AND user-settings has specific voice/music presets (don't override saved energy levels)\n    const shouldSkipRandomSelection = isApplyingUserSettings || \n      (presetFromUserSettingsRef.current && hasUserSettingsWithGender) ||\n      (userSettingsData !== null) ||\n      (presetFromUserSettingsRef.current && hasUserVoiceMusicPresetsRef.current)\n    \n    if (preset && allVoices.length > 0 && allMusic.length > 0 && !shouldSkipRandomSelection) {\n      const presetLower = preset.toLowerCase().trim()\n      \n      // Only proceed if preset is valid (low, medium, high)\n      if (presetLower === 'low' || presetLower === 'medium' || presetLower === 'high') {\n        // Always update type filters to match preset when preset changes\n        // BUT: Don't override if we have user settings with specific voice/music presets\n        // Only set voice type if user settings don't have a specific voice preset\n        type UserSettingsType = {\n          selectedVoiceId?: string\n          selectedMusicTrackId?: string\n          selectedVoicePreset?: string\n          selectedMusicPreset?: string\n          gender?: string\n          preset?: string\n        }\n        \n        if (userSettingsData === null) {\n          setCurrentVoiceType(presetLower as 'low' | 'medium' | 'high')\n          setCurrentMusicType(presetLower as 'low' | 'medium' | 'high')\n        } else {\n          // User settings exist - only set type if no specific preset is saved\n          const settings = userSettingsData as UserSettingsType\n          if (!settings.selectedVoicePreset) {\n            setCurrentVoiceType(presetLower as 'low' | 'medium' | 'high')\n          }\n          if (!settings.selectedMusicPreset) {\n            setCurrentMusicType(presetLower as 'low' | 'medium' | 'high')\n          }\n        }\n      \n        // Always update voice to match preset (regardless of previous selection)\n        const matchingVoices = allVoices.filter(v => v.type === presetLower)\n        if (matchingVoices.length > 0) {\n          const randomVoice = matchingVoices[Math.floor(Math.random() * matchingVoices.length)]\n          if (randomVoice) {\n            setSelectedVoice(randomVoice)\n            setValue('voice', randomVoice.id, { shouldValidate: true })\n            trigger('voice')\n        }\n      }\n      \n        // Always update music to match preset (regardless of previous selection)\n        const matchingMusic = allMusic.filter(m => m.type === presetLower)\n        if (matchingMusic.length > 0) {\n          const randomMusic = matchingMusic[Math.floor(Math.random() * matchingMusic.length)]\n          if (randomMusic) {\n            setSelectedMusic(randomMusic)\n            setValue('music', randomMusic.id, { shouldValidate: true })\n            trigger('music')\n          }\n        }\n      }\n    }\n  }, [preset, allVoices, allMusic, setValue, trigger, isApplyingUserSettings, hasUserSettingsWithGender, userSettingsData])\n\n  // Apply voice and music from user settings after they are loaded\n  // This ensures saved selections are restored instead of random selection\n  // Use a small delay to ensure this runs after preset auto-select\n  useEffect(() => {\n    if (userSettingsData && !voicesLoading && !musicLoading && allVoices.length > 0 && allMusic.length > 0) {\n      // Use setTimeout to ensure this runs after preset auto-select\n      const timeoutId = setTimeout(() => {\n        setIsApplyingUserSettings(true)\n        \n        // Find and set selected voice by ID from user settings FIRST\n        // This allows us to check if the voice is custom before setting voice energy\n        let foundVoiceForEnergyCheck: Voice | null = null\n        if (userSettingsData.selectedVoiceId) {\n          const foundVoice = allVoices.find(voice => voice.id === userSettingsData.selectedVoiceId)\n          if (foundVoice) {\n            foundVoiceForEnergyCheck = foundVoice\n            setSelectedVoice(foundVoice)\n            setValue('voice', foundVoice.id, { shouldValidate: true })\n            trigger('voice')\n            console.log('ðŸŽ¤ Voice loaded from user settings by ID:', foundVoice.name, foundVoice.id)\n          } else {\n            console.warn('âš ï¸ Voice ID from user settings not found:', userSettingsData.selectedVoiceId)\n          }\n        }\n\n        // Set voice type filter based on selectedVoicePreset from user settings\n        // This should override any preset-based selection\n        // Handle 'low', 'medium', 'high', and 'custom' voice energy levels\n        // Priority: If voice is custom (isCustom: true) > selectedVoicePreset > voice energy field\n        if (foundVoiceForEnergyCheck?.isCustom === true) {\n          // If the selected voice is custom, always set voice energy to 'custom'\n          setCurrentVoiceType('custom')\n          console.log('ðŸŽ¤ Voice is custom, setting voice energy to \"custom\"')\n        } else if (userSettingsData.selectedVoicePreset) {\n          const voicePreset = userSettingsData.selectedVoicePreset.toLowerCase() as 'low' | 'medium' | 'high' | 'custom'\n          if (voicePreset === 'low' || voicePreset === 'medium' || voicePreset === 'high' || voicePreset === 'custom') {\n            setCurrentVoiceType(voicePreset)\n            console.log('ðŸŽ¤ Voice preset loaded from user settings:', voicePreset, '(overriding preset-based selection)')\n          }\n        } else if (foundVoiceForEnergyCheck?.energy) {\n          // Fallback: Use the voice's energy field if no preset is provided\n          const voiceEnergy = foundVoiceForEnergyCheck.energy.toLowerCase() as 'low' | 'medium' | 'high'\n          if (voiceEnergy === 'low' || voiceEnergy === 'medium' || voiceEnergy === 'high') {\n            setCurrentVoiceType(voiceEnergy)\n            console.log('ðŸŽ¤ Voice energy loaded from voice object:', voiceEnergy)\n          }\n        }\n\n        // Set music type filter based on selectedMusicPreset from user settings\n        // This should override any preset-based selection\n        if (userSettingsData.selectedMusicPreset) {\n          const musicPreset = userSettingsData.selectedMusicPreset.toLowerCase() as 'low' | 'medium' | 'high'\n          if (musicPreset === 'low' || musicPreset === 'medium' || musicPreset === 'high') {\n            setCurrentMusicType(musicPreset)\n            console.log('ðŸŽµ Music preset loaded from user settings:', musicPreset, '(overriding preset-based selection)')\n          }\n        }\n\n        // Find and set selected music by ID from user settings\n        if (userSettingsData.selectedMusicTrackId) {\n          const foundMusic = allMusic.find(music => \n            music.id === userSettingsData.selectedMusicTrackId || \n            music._id === userSettingsData.selectedMusicTrackId\n          )\n          if (foundMusic) {\n            setSelectedMusic(foundMusic)\n            // Use the ID format that matches the music object (prefer id, fallback to _id)\n            const musicId = foundMusic.id || foundMusic._id || userSettingsData.selectedMusicTrackId\n            setValue('music', musicId, { shouldValidate: true })\n            trigger('music')\n            console.log('ðŸŽµ Music loaded from user settings by ID:', foundMusic.name, musicId)\n          } else {\n            console.warn('âš ï¸ Music ID from user settings not found:', userSettingsData.selectedMusicTrackId, 'Available music IDs:', allMusic.map(m => m.id || m._id).slice(0, 5))\n          }\n        }\n\n        // Clear user settings data after applying to prevent re-applying\n        setUserSettingsData(null)\n        // Reset flag after a short delay to allow form updates to complete\n        setTimeout(() => {\n          setIsApplyingUserSettings(false)\n        }, 100)\n      }, 50) // Small delay to ensure this runs after preset auto-select\n      \n      return () => clearTimeout(timeoutId)\n    }\n  }, [userSettingsData, voicesLoading, musicLoading, allVoices, allMusic, setValue, trigger, setCurrentVoiceType, setCurrentMusicType])\n  \n  // Handle voice type change from VoiceSelector (when user clicks low/medium/high buttons)\n  const handleVoiceTypeChange = useCallback((type: VoiceType) => {\n    console.log('ðŸŽ¤ create-video-form - handleVoiceTypeChange called with type:', type)\n    \n    // Mark that user has manually changed voice type (prevents auto-select from overriding)\n    setIsVoiceManuallySelected(true)\n    \n    // Update voice type filter\n    setCurrentVoiceType(type)\n    \n    // Filter voices - handle custom type specially\n    if (type === 'custom') {\n      // For custom voices, filter by isCustom property\n      const filteredVoices = allVoices.filter(v => v.isCustom === true)\n      if (filteredVoices.length > 0) {\n        const randomVoice = filteredVoices[Math.floor(Math.random() * filteredVoices.length)]\n        setSelectedVoice(randomVoice)\n        setValue('voice', randomVoice.id, { shouldValidate: true })\n        trigger('voice')\n      }\n    } else {\n      // For low/medium/high, filter voices only\n      // Don't update music type or music selection - music should remain independent\n      const filteredVoices = allVoices.filter(v => v.type === type)\n      if (filteredVoices.length > 0) {\n        const randomVoice = filteredVoices[Math.floor(Math.random() * filteredVoices.length)]\n        setSelectedVoice(randomVoice)\n        setValue('voice', randomVoice.id, { shouldValidate: true })\n        trigger('voice')\n      }\n      \n      // Don't update music when voice type changes - music and voice are independent\n    }\n  }, [allVoices, setValue, trigger])\n  \n  // Handle music type change from MusicSelector (when user clicks low/medium/high buttons)\n  const handleMusicTypeChange = useCallback((type: VoiceType) => {\n    // Music only supports low/medium/high, not custom\n    if (type === 'custom') {\n      return // Ignore custom type for music\n    }\n    // Update music type filter only (don't sync voice)\n    setCurrentMusicType(type as 'low' | 'medium' | 'high')\n    \n    // Filter music\n    const filteredMusic = allMusic.filter(m => m.type === type)\n    \n    // Auto-select random music from the filtered list\n    if (filteredMusic.length > 0) {\n      const randomMusic = filteredMusic[Math.floor(Math.random() * filteredMusic.length)]\n      setSelectedMusic(randomMusic)\n      setValue('music', randomMusic.id, { shouldValidate: true })\n      trigger('music')\n    } else {\n      setSelectedMusic(null)\n      setValue('music', '', { shouldValidate: true })\n      trigger('music')\n    }\n  }, [allMusic, setValue, trigger])\n\n  // Auto-fill form when avatars are loaded and user has settings\n  useEffect(() => {\n    if (!avatarsLoading && (avatars.custom.length > 0 || avatars.default.length > 0) && user?.email) {\n      setAutoFilling(true)\n      fetchUserSettings().then((result) => {\n        // Auto-trigger city trends if city is loaded from settings\n        if (result && !userSettingsLoaded && result.data) {\n          const cityValue = watch('city')\n          const videoTopicValue = watch('videoTopic')\n          \n          // Save the video topic for later pre-selection\n          if (videoTopicValue && videoTopicValue.trim()) {\n            setSavedVideoTopic(videoTopicValue)\n          }\n          \n          // Auto-trigger city trends if both city and position exist\n          const positionValue = watch('position')\n          if (cityValue && cityValue.trim() && positionValue && positionValue.trim()) {\n            console.log('ðŸ™ï¸ Auto-triggering city trends for saved city and position:', cityValue, positionValue)\n            fetchCityTrends(cityValue, positionValue)\n          }\n          \n          // Store voice/music settings for later application\n          if (result.data.gender || result.data.selectedVoiceId || result.data.selectedMusicTrackId) {\n            setUserSettingsData({\n              selectedVoiceId: result.data.selectedVoiceId,\n              selectedMusicTrackId: result.data.selectedMusicTrackId,\n              selectedVoicePreset: result.data.selectedVoicePreset,\n              selectedMusicPreset: result.data.selectedMusicPreset,\n              gender: result.data.gender,\n              preset: result.data.preset\n            })\n            \n            // Mark that we have user settings with gender - this prevents random selection on initial load\n            if (result.data.gender) {\n              setHasUserSettingsWithGender(true)\n              // Track if preset comes from user settings\n              if (result.data.preset) {\n                presetFromUserSettingsRef.current = true\n              }\n              // Track if user-settings has specific voice/music presets (not from preset)\n              if (result.data.selectedVoicePreset || result.data.selectedMusicPreset) {\n                hasUserVoiceMusicPresetsRef.current = true\n              }\n            }\n          }\n          \n          setUserSettingsLoaded(true)\n        }\n      }).finally(() => {\n        setAutoFilling(false)\n        setIsFormReady(true)\n      })\n    } else if (!avatarsLoading && (avatars.custom.length > 0 || avatars.default.length > 0) && !user?.email) {\n      // If avatars are loaded but no user email, form is ready\n      setIsFormReady(true)\n    }\n  }, [avatarsLoading, avatars.custom.length, avatars.default.length, user?.email, fetchUserSettings, userSettingsLoaded, watch])\n\n  // Check if all data is loaded (used for other components)\n  // const isDataLoading = avatarsLoading || scheduleLoading || autoFilling || !isFormReady\n\n  // Toggle schedule mode\n  const handleToggleScheduleMode = () => {\n    setIsScheduleMode(!isScheduleMode)\n  }\n\n\n  useEffect(() => {\n    if (user?.email) {\n      setValue('email', user.email)\n    }\n  }, [user?.email, setValue])\n\n  // Set default language to English if not set (only after user-settings have been checked)\n  useEffect(() => {\n    // Only set default if user-settings have been loaded (or if no user email, meaning no settings to load)\n    if (userSettingsLoaded || !user?.email) {\n      const currentLanguage = watch('language')\n      if (!currentLanguage || currentLanguage.trim() === '') {\n        setValue('language', 'English', { shouldValidate: false, shouldDirty: false })\n      }\n    }\n  }, [watch, setValue, userSettingsLoaded, user?.email])\n\n  // Reset preset, voice, and music fields when gender changes and APIs are called\n  // Use a ref to track previous gender to avoid resetting on initial mount\n  const prevGenderRef = useRef<string | null>(null)\n  \n  useEffect(() => {\n    const currentGender = gender && String(gender).trim().length > 0 ? String(gender).trim() : null\n    \n    // Only reset if gender actually changed (not on initial mount when gender is set from user settings)\n    if (currentGender && currentGender !== prevGenderRef.current) {\n      console.log('ðŸ”„ Resetting preset, voice, and music fields due to gender change:', {\n        previousGender: prevGenderRef.current,\n        newGender: currentGender\n      })\n      setValue('preset', '', { shouldValidate: false, shouldDirty: false })\n      setValue('voice', '', { shouldValidate: false, shouldDirty: false })\n      setValue('music', '', { shouldValidate: false, shouldDirty: false })\n      setCurrentVoiceType(null)\n      setCurrentMusicType(null)\n      // Also reset the selected voice and music state\n      setSelectedVoice(null)\n      setSelectedMusic(null)\n      setIsVoiceManuallySelected(false)\n    }\n    \n    // Update ref to track current gender\n    prevGenderRef.current = currentGender\n  }, [gender, setValue])\n\n  // Focus custom topic input when it becomes visible\n  useEffect(() => {\n    if (showCustomTopicInput) {\n      // Small delay to ensure the input is rendered\n      setTimeout(() => {\n        const customTopicInput = document.querySelector('input[placeholder=\"Enter your custom topic\"]') as HTMLInputElement\n        if (customTopicInput) {\n          customTopicInput.focus()\n        }\n      }, 100)\n    }\n  }, [showCustomTopicInput])\n\n  // Auto-dismiss error after 10 seconds\n  useEffect(() => {\n    if (error) {\n      const timeoutId = setTimeout(() => {\n        dispatch(clearVideoError())\n      }, 10000) // 10 seconds\n      \n      return () => {\n        clearTimeout(timeoutId)\n      }\n    }\n  }, [error, dispatch])\n\n  const onSubmit = async (data: CreateVideoFormData) => {\n    console.log('selectedAvatars', selectedAvatars)\n    if (!selectedAvatars.title || !selectedAvatars.body || !selectedAvatars.conclusion) {\n      dispatch(setVideoError('Please select 3 avatars before submitting'))\n      return\n    }\n\n     // Validate that either videoTopic or custom topic is provided\n     if (showCustomTopicInput) {\n       if (!customTopicValue.trim()) {\n         dispatch(setVideoError('Please enter a custom topic'))\n         return\n       }\n       // Use custom topic value for submission\n       data.videoTopic = customTopicValue.trim()\n     } else {\n       // Ensure videoTopic is provided when not using custom topic\n       if (!data.videoTopic || !data.videoTopic.trim()) {\n         dispatch(setVideoError('Please select a video topic'))\n         return\n       }\n     }\n\n     // Set default prompt value if not provided (since field was removed from UI)\n     if (!data.prompt || !data.prompt.trim()) {\n       data.prompt = 'Shawheen V1'\n     }\n\n     // Debug: Log form data before submission\n     console.log('ðŸš€ Form submission starting...', {\n       hasAvatars: !!(selectedAvatars.title && selectedAvatars.body && selectedAvatars.conclusion),\n       hasVideoTopic: !!(data.videoTopic?.trim() || customTopicValue.trim()),\n       prompt: data.prompt,\n       formData: data\n     })\n\n    // Check video usage limit and payment status before proceeding\n    try {\n      const usageCheck = await checkVideoUsageLimit()\n      \n      if (!usageCheck.canCreateVideo) {\n        // Check if it's a pending payment issue\n        if (usageCheck.message?.includes('payment is still being processed')) {\n          setPendingPaymentMessage(usageCheck.message)\n          setShowPendingPaymentToast(true)\n        } else if (usageCheck.message?.includes('No active subscription found') || usageCheck.message?.includes('Please subscribe')) {\n          setSubscriptionRequiredMessage(usageCheck.message)\n          setShowSubscriptionRequiredToast(true)\n        } else {\n          setUsageToastMessage(usageCheck.message || 'Video limit reached')\n          setShowUsageToast(true)\n        }\n        return\n      }\n    } catch (error) {\n      console.error('Failed to check video usage:', error)\n      dispatch(setVideoError('Unable to verify subscription status. Please try again.'))\n      return\n    }\n\n    // Save selected avatars using custom hook\n    try {\n      const avatarsToSave: SelectedAvatars = {\n        title: {\n          avatar_id: selectedAvatars.title.avatar_id,\n          avatar_name: selectedAvatars.title.avatar_name || selectedAvatars.title.name || '',\n          preview_image_url: selectedAvatars.title.preview_image_url || selectedAvatars.title.imageUrl || '',\n          avatarType: selectedAvatars.title.avatarType || (selectedAvatars.title.preview_video_url ? 'video_avatar' : 'photo_avatar')\n        },\n        body: {\n          avatar_id: selectedAvatars.body.avatar_id,\n          avatar_name: selectedAvatars.body.avatar_name || selectedAvatars.body.name || '',\n          preview_image_url: selectedAvatars.body.preview_image_url || selectedAvatars.body.imageUrl || '',\n          avatarType: selectedAvatars.body.avatarType || (selectedAvatars.body.preview_video_url ? 'video_avatar' : 'photo_avatar')\n        },\n        conclusion: {\n          avatar_id: selectedAvatars.conclusion.avatar_id,\n          avatar_name: selectedAvatars.conclusion.avatar_name || selectedAvatars.conclusion.name || '',\n          preview_image_url: selectedAvatars.conclusion.preview_image_url || selectedAvatars.conclusion.imageUrl || '',\n          avatarType: selectedAvatars.conclusion.avatarType || (selectedAvatars.conclusion.preview_video_url ? 'video_avatar' : 'photo_avatar')\n        }\n      }\n      \n      saveSelectedAvatars(avatarsToSave)\n    } catch (error) {\n      console.error('Failed to save avatars:', error)\n      dispatch(setVideoError('Failed to save avatar selection. Please try again.'))\n      return\n    }\n\n    dispatch(setVideoLoading(true))\n    try\n    {\n      // Ensure language is included in the data\n      const videoData = {\n        ...data,\n        language: data.language || watch('language') || 'English'\n      };\n      \n      // Make API call using apiService\n      const result = await apiService.createVideo(videoData);\n\n      if (!result.success)\n      {\n        throw new Error(result.message || 'Failed to create video');\n      }\n\n      // Extract webhook response data\n      const webhookData = result.data.webhookResponse;\n\n      // Use the original form data for fields that weren't returned by webhook\n      const decodedResponse = {\n        prompt: decodeURIComponent(webhookData?.hook || ''),\n        description: decodeURIComponent(webhookData?.body || ''),\n        conclusion: decodeURIComponent(webhookData?.conclusion || ''),\n        company_name: webhookData?.company_name || webhookData?.companyName || data.companyName,\n        social_handles: webhookData?.social_handles || webhookData?.socialHandles || data.socialHandles,\n        license: webhookData?.license || data.license,\n        avatar: webhookData?.avatar || data.avatar,\n        email: webhookData?.email || data.email,\n        voice_id: selectedVoice?.id || data.voice || '',\n        music_url: selectedMusic?.s3FullTrackUrl || ''\n      }\n      setWebhookResponse(decodedResponse)\n\n      // Create video request object for Redux\n      const videoRequest: VideoRequest = {\n        requestId: result.data.requestId,\n        prompt: data.prompt,\n        avatar: data.avatar,\n        name: data.name,\n        position: data.position,\n        companyName: data.companyName,\n        license: data.license,\n        tailoredFit: data.tailoredFit,\n        socialHandles: data.socialHandles,\n        videoTopic: data.videoTopic,\n        topicKeyPoints: data.topicKeyPoints,\n        city: data.city,\n        preferredTone: data.preferredTone,\n        callToAction: data.callToAction,\n        email: data.email,\n        timestamp: result.data.timestamp,\n        status: result.data.status,\n        webhookResponse: result.data.webhookResponse\n      }\n\n      // Store in Redux (this will also save videoTopic to state)\n      dispatch(createVideoRequest(videoRequest))\n\n      // Call user-settings API to store video information\n      const userSettingsPayload = {\n        prompt: data.prompt,\n        avatar: [\n          selectedAvatars.title?.avatar_id || '',\n          selectedAvatars.body?.avatar_id || '',\n          selectedAvatars.conclusion?.avatar_id || ''\n        ].filter(id => id !== ''), // Filter out empty strings\n        // Add the three selected avatars separately with avatar_id and avatarType in single structure\n        titleAvatar: {\n          avatar_id: selectedAvatars.title?.avatar_id || '',\n          avatarType: selectedAvatars.title?.avatarType || (selectedAvatars.title?.preview_video_url ? 'video_avatar' : 'photo_avatar')\n        },\n        bodyAvatar: {\n          avatar_id: selectedAvatars.body?.avatar_id || '',\n          avatarType: selectedAvatars.body?.avatarType || (selectedAvatars.body?.preview_video_url ? 'video_avatar' : 'photo_avatar')\n        },\n        conclusionAvatar: {\n          avatar_id: selectedAvatars.conclusion?.avatar_id || '',\n          avatarType: selectedAvatars.conclusion?.avatarType || (selectedAvatars.conclusion?.preview_video_url ? 'video_avatar' : 'photo_avatar')\n        },\n        name: data.name,\n        position: data.position,\n        language: data.language || watch('language') || 'English',\n        preset: data.preset || '',\n        companyName: data.companyName,\n        license: data.license,\n        tailoredFit: data.tailoredFit,\n        socialHandles: data.socialHandles,\n        city: data.city,\n        preferredTone: data.preferredTone,\n        callToAction: data.callToAction,\n        email: data.email,\n        gender: data.gender,\n        voice: data.voice,\n        selectedVoiceId: selectedVoice?.id || data.voice || '',\n        selectedMusicTrackId: selectedMusic?._id || selectedMusic?.id || data.music || '',\n        selectedVoicePreset: (selectedVoice as any)?.energy || selectedVoice?.type || '',\n        selectedMusicPreset: (selectedMusic as any)?.energyCategory || selectedMusic?.type || '',\n        videoCaption: data.videoCaption || ''\n      }\n\n      const userSettingsResult = await saveUserSettings(userSettingsPayload)\n      if (!userSettingsResult.success) {\n        console.error('Failed to store user settings:', userSettingsResult.error)\n      } else {\n        console.log('âœ… User settings stored successfully with all avatar IDs')\n      }\n\n      setIsModalOpen(true)\n\n      dispatch(clearVideoError())\n\n      // Note: Form fields are NOT reset to preserve user data for next submission\n      // setTimeout(() => {\n      //   reset()\n      // }, 100)\n    } catch (error: any) {\n      dispatch(setVideoError(error.message || 'Failed to create video'))\n    } finally {\n      dispatch(setVideoLoading(false))\n    }\n  }\n\n  const handleDropdownSelect = (field: keyof CreateVideoFormData, value: string) => {\n    setOpenDropdown(null)\n    setTimeout(() => {\n      if (field === 'avatar') {\n        setValue('avatar', '')\n      setValue('avatar', value)\n      } else if (field === 'preset') {\n        // When preset is manually changed, reset the refs to allow random selection\n        presetFromUserSettingsRef.current = false\n        hasUserVoiceMusicPresetsRef.current = false // Reset when user manually changes preset\n        setValue('preset', value, { shouldValidate: true, shouldDirty: true })\n        trigger('preset')\n      } else if (field === 'gender') {\n        // When gender is selected, update the form value\n        // The useVoicesAndMusic hook will automatically detect the change and trigger API calls\n        console.log('ðŸŽµ Gender selected from dropdown:', value)\n        setValue('gender', value, { shouldValidate: true, shouldDirty: true })\n        trigger('gender')\n        // Force re-render by updating the watched value\n        // The watch('gender') in the hook will detect this change\n      } else if (field === 'voice') {\n        const voice = voices.find(v => v.id === value)\n        if (voice) {\n          // Mark that user has manually selected a voice (prevents auto-select from overriding)\n          setIsVoiceManuallySelected(true)\n          setSelectedVoice(voice)\n          // Don't sync music - voice and music are independent\n        }\n        setValue('voice', value)\n        trigger('voice')\n      } else if (field === 'music') {\n        const music = musicList.find(m => m.id === value)\n        if (music) {\n          setSelectedMusic(music)\n          // Don't sync voice - voice and music are independent\n        }\n        setValue('music', value)\n        trigger('music')\n      } else if (field === 'videoTopic') {\n      setValue('videoTopic', value, { shouldValidate: true, shouldDirty: true })\n      \n      // Hide custom topic field when a trend is selected\n      setShowCustomTopicInput(false)\n      setCustomTopicValue('')\n      \n      // Clear key points loading and error states\n      setKeyPointsLoading(false)\n      setKeyPointsError(null)\n      \n      const selectedTrend = allTrends.find(trend => trend.description === value)\n      if (selectedTrend) {\n        setValue('topicKeyPoints', selectedTrend.keypoints, { shouldValidate: true, shouldDirty: true })\n      }\n      } else {\n      setValue(field, value)\n    }\n      trigger(field)\n    }, 50)\n  }\n\n\n   // Handle custom topic button click\n   const handleCustomTopicClick = () => {\n     setShowCustomTopicInput(true)\n     setCustomTopicValue('')\n     setLastApiTriggeredValue('')\n     // Close the Video Topic dropdown immediately\n     setOpenDropdown(null)\n     // Clear the Video Topic field value\n     setValue('videoTopic', '', { shouldValidate: false, shouldDirty: true })\n     // Clear the topic key points when switching to custom mode\n     setValue('topicKeyPoints', '', { shouldValidate: false, shouldDirty: true })\n   }\n\n  // Handle custom topic input change\n  const handleCustomTopicChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value\n    setCustomTopicValue(value)\n    // Mark form as manually touched\n    setFormManuallyTouched(true)\n    if (!value || !value.trim()) {\n      setValue('topicKeyPoints', '', { shouldValidate: false, shouldDirty: true })\n      setKeyPointsLoading(false)\n      setKeyPointsError(null)\n      setLastApiTriggeredValue('')\n    }\n  }\n\n  // Handle custom topic blur - generate key points\n  const handleCustomTopicBlur = () => {\n    if (customTopicValue && customTopicValue.trim()) {\n      // Don't trigger API if value hasn't changed since last API call\n      if (customTopicValue.trim() === lastApiTriggeredValue) return\n      // Don't update videoTopic immediately - wait for API confirmation\n      generateCustomTopicKeyPoints(customTopicValue)\n    }\n  }\n\n  const handleDropdownToggle = (field: keyof CreateVideoFormData) => {\n    const isOpen = openDropdown === field\n    setOpenDropdown(isOpen ? null : field)\n  }\n\n  const renderDropdown = (\n    field: keyof CreateVideoFormData,\n    options: { value: string; label: string }[],\n    placeholder: string\n  ) => {\n    const currentValue = watch(field) || ''\n    const isOpen = openDropdown === field\n    // Filter errors for consistency - only show errors after manual interaction or submit attempt\n    // Check both formManuallyTouched and submitAttempted to ensure errors show on first submit\n    const shouldShowErrors = formManuallyTouched || submitAttempted\n    const filteredErrors = shouldShowErrors ? errors : {}\n    const hasError = filteredErrors[field]\n\n    return (\n      <FormDropdown\n        field={field}\n        options={options}\n        placeholder={placeholder}\n        currentValue={currentValue}\n        isOpen={isOpen}\n        hasError={hasError}\n        register={register}\n        errors={filteredErrors}\n        onToggle={handleDropdownToggle}\n        onSelect={handleDropdownSelect}\n        onBlur={() => {}}\n        // Avatar-specific props\n        isAvatarField={field === 'avatar'}\n        isFromDefaultAvatar={isFromDefaultAvatar}\n        extendedAvatarOptions={extendedAvatarOptions}\n        avatars={avatars}\n        avatarsLoading={avatarsLoading}\n        avatarsError={avatarsError}\n        selectedAvatars={selectedAvatars}\n        onFetchAvatars={fetchAvatars}\n        onAvatarClick={handleAvatarClick}\n        onDragStart={handleDragStart}\n                                    onDragEnd={handleDragEnd}\n                        onDragOver={handleDragOver}\n                        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        onRemoveAvatar={handleRemoveAvatar}\n        onClearAllAvatars={handleClearAllAvatars}\n        isAvatarSelected={isAvatarSelected}\n        isAvatarTypeAllowed={isAvatarTypeAllowed}\n        isAvatarPending={isAvatarPending}\n        getAvatarSelectionNumber={getAvatarSelectionNumber}\n        getAvatarType={getAvatarType}\n      />\n    )\n  }\n\n  const renderVoiceSelector = (\n    field: keyof CreateVideoFormData,\n    placeholder: string\n  ) => {\n    // Pass ALL voices to VoiceSelector - it will filter internally based on voiceType\n    // VoiceSelector has its own voiceType state that controls filtering\n    // Filter errors for consistency - only show errors after manual interaction or submit attempt\n    // Check both formManuallyTouched and submitAttempted to ensure errors show on first submit\n    const shouldShowErrors = formManuallyTouched || submitAttempted\n    const filteredErrors = shouldShowErrors ? errors : {}\n    return (\n      <VoiceSelectorWrapper\n        field={field}\n        placeholder={placeholder}\n        watch={watch}\n        register={register}\n        errors={filteredErrors}\n        trigger={trigger}\n        openDropdown={openDropdown}\n        selectedVoice={selectedVoice}\n        voices={allVoices.length > 0 ? allVoices : voices}  // Pass all voices, let VoiceSelector filter\n        voicesLoading={voicesLoading}\n        voicesError={voicesError}\n        preset={preset}\n        initialVoiceType={currentVoiceType}\n        onToggle={handleDropdownToggle}\n        onSelect={handleDropdownSelect}\n        onVoiceClick={handleVoiceClick}\n        onVoiceTypeChange={handleVoiceTypeChange}\n        onDragStart={handleVoiceDragStart}\n        onDragEnd={handleVoiceDragEnd}\n        onDragOver={handleVoiceDragOver}\n        onDragLeave={handleVoiceDragLeave}\n        onDrop={handleVoiceDrop}\n      />\n    )\n  }\n\n  const renderMusicSelector = (\n    field: keyof CreateVideoFormData,\n    placeholder: string\n  ) => {\n    // Pass ALL music to MusicSelector - it will filter internally based on voiceType (used for music too)\n    // VoiceSelector component (used for music) has its own voiceType state that controls filtering\n    // Filter errors for consistency - only show errors after manual interaction or submit attempt\n    // Check both formManuallyTouched and submitAttempted to ensure errors show on first submit\n    const shouldShowErrors = formManuallyTouched || submitAttempted\n    const filteredErrors = shouldShowErrors ? errors : {}\n    return (\n      <MusicSelectorWrapper\n        field={field}\n        placeholder={placeholder}\n        watch={watch}\n        register={register}\n        errors={filteredErrors}\n        trigger={trigger}\n        openDropdown={openDropdown}\n        selectedMusic={selectedMusic}\n        musicList={allMusic.length > 0 ? allMusic : musicList}  // Pass all music, let VoiceSelector filter\n        musicLoading={musicLoading}\n        musicError={musicError}\n        preset={preset}\n        initialMusicType={currentMusicType}\n        onToggle={handleDropdownToggle}\n        onSelect={handleDropdownSelect}\n        onMusicClick={handleMusicClick}\n        onMusicTypeChange={handleMusicTypeChange}\n        onDragStart={handleMusicDragStart}\n        onDragEnd={handleMusicDragEnd}\n        onDragOver={handleMusicDragOver}\n        onDragLeave={handleMusicDragLeave}\n        onDrop={handleMusicDrop}\n      />\n    )\n  }\n\n  const renderTrendsDropdown = (\n    field: keyof CreateVideoFormData,\n    placeholder: string\n  ) => {\n    const currentValue = watch(field)\n    \n    // Filter layer: Only show dropdown value if it exists in the options\n    const isValidDropdownValue = allTrends.some(trend => trend.description === currentValue)\n    const displayValue = isValidDropdownValue ? currentValue : ''\n    \n    const selectedTrend = allTrends.find(trend => trend.description === displayValue)\n    const isOpen = openDropdown === field\n    // Filter errors for consistency - only show errors after manual interaction or submit attempt\n    // Check both formManuallyTouched and submitAttempted to ensure errors show on first submit\n    const shouldShowErrors = formManuallyTouched || submitAttempted\n    const filteredErrors = shouldShowErrors ? errors : {}\n    // Hide error for videoTopic when custom topic input is shown\n    const hasError = showCustomTopicInput && field === 'videoTopic' ? null : filteredErrors[field]\n    \n    // Use only city trends loading states\n    const isLoading = cityTrendsLoading\n    // Show missing fields error in videoTopic dropdown\n    const combinedError = field === 'videoTopic' && missingFieldsError \n      ? missingFieldsError \n      : cityTrendsError\n\n    // Check if both city and position are filled to show \"Add Custom Topic\" button\n    const cityValue = watch('city')\n    const positionValue = watch('position')\n    const canShowCustomTopic = cityValue && cityValue.trim() && positionValue && positionValue.trim()\n\n    return (\n      <HybridTopicInput\n        field={field}\n        placeholder={placeholder}\n        currentValue={displayValue || ''}\n        selectedTrend={selectedTrend}\n        isOpen={isOpen}\n        hasError={hasError}\n        trendsLoading={isLoading}\n        trendsError={combinedError}\n        safeTrends={allTrends}\n        onToggle={handleDropdownToggle}\n        onSelect={handleDropdownSelect}\n        onBlur={() => {}}\n        onRetry={() => {\n          if (cityValue && cityValue.trim() && positionValue && positionValue.trim()) {\n            fetchCityTrends(cityValue, positionValue)\n          }\n        }}\n        onCustomTopicClick={canShowCustomTopic ? handleCustomTopicClick : undefined}\n      />\n    )\n  }\n\n  const renderInput = (\n    field: keyof CreateVideoFormData,\n    placeholder: string,\n    type: string = 'text',\n    autoComplete?: string\n  ) => {\n    const isDisabled = field === 'email'\n    \n    // Filter errors for prefilled forms - only show errors after manual interaction or submit attempt\n    // Check both formManuallyTouched and submitAttempted to ensure errors show on first submit\n    const shouldShowErrors = formManuallyTouched || submitAttempted\n    const filteredErrors = shouldShowErrors ? errors : {}\n\n    return (\n      <FormInput\n        field={field}\n          placeholder={placeholder}\n        type={type}\n          autoComplete={autoComplete}\n        register={register}\n        errors={filteredErrors}\n          disabled={isDisabled}\n          onChange={handleFormFieldChange}\n      />\n    )\n  }\n\n  return (\n    <div className={`w-full max-w-[1260px] mx-auto ${className} relative`}>\n      <FormLoadingOverlay\n        avatarsLoading={avatarsLoading}\n        autoFilling={autoFilling}\n        isFormReady={isFormReady}\n        hasUserEmail={!!user?.email}\n      />\n      <FormHeader\n        title=\"Fill the details to create video\"\n        onSchedulePost={() => setShowScheduleModal(true)}\n        userEmail={user?.email}\n        isScheduleMode={isScheduleMode}\n        onToggleScheduleMode={handleToggleScheduleMode}\n      />\n      {showSuccessToast && (\n        <div className=\"fixed top-4 right-4 z-50 bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg max-w-sm\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n              <Check className=\"w-5 h-5 text-green-600\" />\n            </div>\n            <div>\n              <h3 className=\"text-green-800 font-semibold\">Success!</h3>\n              <p className=\"text-green-700 text-sm\">Your video request has been submitted successfully.</p>\n            </div>\n          </div>\n        </div>\n      )}\n        {isScheduleMode ? (\n          <ScheduleInterface \n            onStartScheduling={() => setShowScheduleModal(true)} \n            autoScheduleData={autoScheduleData}\n            onScheduleDeleted={fetchSchedule}\n          />\n        ) : (\n      <form onSubmit={handleSubmit(onSubmit, (errors) => {\n        try {\n          const summarized = Object.fromEntries(\n            Object.entries(errors).map(([key, value]) => [key, (value as any)?.message || ''])\n          )\n          console.log('Form errors summary:', summarized)\n        } catch {\n          // no-op\n        }\n        setSubmitAttempted(true)\n        if (Object.keys(errors).length > 0) {\n          setFormManuallyTouched(true)\n          const firstError = Object.values(errors)[0]\n          if (firstError && 'message' in firstError) {\n            const errorMessage = firstError.message as string || 'Please fix form errors'\n            showNotification(errorMessage, 'error')\n            dispatch(setVideoError(errorMessage))\n          }\n        }\n      })} className=\"space-y-7\">\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-red-600\" />\n              <div>\n                <h3 className=\"text-red-800 font-semibold\">Error</h3>\n                <p className=\"text-red-700 text-sm\">{error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Name <span className=\"text-red-500\">*</span>\n            </label>\n            {renderInput('name', 'e.g. John Smith', 'text', 'name')}\n          </div>\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Avatar <span className=\"text-red-500\">*</span>\n            </label>\n            {renderDropdown('avatar', avatarOptions, 'Select Option')}\n          </div>\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Position <span className=\"text-red-500\">*</span>\n            </label>\n            {renderDropdown('position', positionOptions, 'Select Option')}\n          </div>\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Company Name <span className=\"text-red-500\">*</span>\n            </label>\n            {renderInput('companyName', 'e.g. Keller Williams', 'text', 'organization')}\n          </div>\n        </div>\n        <FormFieldRow\n          fields={row2Fields}\n          register={register}\n          errors={errors}\n          columns=\"4\"\n          watch={watch}\n          trigger={trigger}\n          openDropdown={openDropdown}\n          onDropdownToggle={(field: string) => handleDropdownToggle(field as keyof CreateVideoFormData)}\n          onDropdownSelect={(field: string, value: string) => handleDropdownSelect(field as keyof CreateVideoFormData, value)}\n        />\n        <FormFieldRow\n          fields={row3Fields}\n          register={register}\n          errors={errors}\n          columns=\"4\"\n          watch={watch}\n          trigger={trigger}\n          openDropdown={openDropdown}\n          onDropdownToggle={(field: string) => handleDropdownToggle(field as keyof CreateVideoFormData)}\n          onDropdownSelect={(field: string, value: string) => handleDropdownSelect(field as keyof CreateVideoFormData, value)}\n          onCityBlur={(city: string) => {\n            const positionValue = watch('position')\n            fetchCityTrends(city, positionValue)\n          }}\n        />\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\n        {gender && (\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Preset <span className=\"text-red-500\">*</span>\n            </label>\n            {renderDropdown('preset', presetOptions, 'Select Preset')}\n          </div>\n        )}\n          {/* Voice field - only shown when preset is selected */}\n          {gender && watch('preset') && (\n            <div>\n              <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n                Voice <span className=\"text-red-500\">*</span>\n              </label>\n              {renderVoiceSelector('voice', 'Select Voice')}\n            </div>\n          )}\n          {/* Music dropdown - only shown when a voice is selected */}\n          {selectedVoice && (\n            <div>\n              <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n                Music\n              </label>\n              {renderMusicSelector('music', 'Select Music')}\n            </div>\n          )}\n           <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Language <span className=\"text-red-500\">*</span>\n            </label>\n            {renderDropdown('language', languageOptions, 'Select Language')}\n          </div>\n\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Video Topic <span className=\"text-red-500\">*</span>\n            </label>\n            {renderTrendsDropdown('videoTopic', 'Select a trend')}\n          </div>\n          \n\n          {showCustomTopicInput && (\n            <div>\n              <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n                Custom Topic <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={customTopicValue}\n                onChange={handleCustomTopicChange}\n                onBlur={handleCustomTopicBlur}\n                placeholder=\"Enter your custom topic\"\n                className={`w-full px-4 py-[10.5px] text-[18px] font-normal bg-[#EEEEEE] hover:bg-[#F5F5F5] border-0 rounded-[8px] text-left transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] focus:bg-white text-gray-800 ${!customTopicValue.trim() && formManuallyTouched ? 'ring-2 ring-red-500' : ''}`}\n              />\n               {!customTopicValue.trim() && formManuallyTouched && (\n                 <p className=\"text-red-500 text-sm mt-1 flex items-center gap-1\" role=\"alert\">\n                   <AlertCircle className=\"w-4 h-4\" />\n                   Please enter a custom topic\n                 </p>\n               )}\n               {keyPointsError && showCustomTopicInput && (\n              <p className=\"text-red-500 text-sm mt-1 flex items-center gap-1\" role=\"alert\">\n                <AlertCircle className=\"w-4 h-4\" />\n                {keyPointsError.length > 50 ? `${keyPointsError.substring(0, 50)}...` : keyPointsError}\n              </p>\n            )}\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Topic Key Points <span className=\"text-red-500\">*</span>\n              {keyPointsLoading && showCustomTopicInput && (\n                <span className=\"text-blue-600 text-sm ml-2\">Generating key points...</span>\n              )}\n            </label>\n            {(() => {\n              const isCustomTopic = showCustomTopicInput && customTopicValue && customTopicValue.trim()\n              const placeholder = isCustomTopic ? 'Key points will generate' : 'Key points will auto-fill';\n              const shouldShowErrors = formManuallyTouched || submitAttempted\n              const filteredErrors = shouldShowErrors ? errors : {}\n              const error = filteredErrors['topicKeyPoints'] as any\n              const { onChange: registerOnChange, ...registerProps } = register('topicKeyPoints')\n              const currentValue = watch('topicKeyPoints') || ''\n              const wordCount = (currentValue || '').trim().split(/\\s+/).filter(Boolean).length\n              const isShortContent = wordCount <= 3\n              \n              return (\n                <div className=\"relative\">\n                  <textarea\n                    {...registerProps}\n                    placeholder={placeholder}\n                    rows={isShortContent ? 1 : 2}\n                    onChange={(e) => {\n                      registerOnChange(e)\n                      handleFormFieldChange()\n                    }}\n                    aria-describedby={error ? 'topicKeyPoints-error' : undefined}\n                    aria-invalid={error ? 'true' : 'false'}\n                    className={`w-full px-4 py-[10.5px] ${isShortContent ? 'text-[18px]' : 'text-[14px]'} font-normal placeholder:text-[#11101066] border-0 rounded-[8px] text-gray-800 transition-all duration-300 focus:outline-none focus:ring focus:ring-[#5046E5] focus:bg-white resize-none\n                    ${error ? 'ring-2 ring-red-500' : ''}\n                    bg-[#EEEEEE] hover:bg-[#F5F5F5]`}\n                  />\n                  {error?.message && (\n                    <p\n                      id=\"topicKeyPoints-error\"\n                      className=\"text-red-500 text-sm mt-1 flex items-center gap-1\"\n                      role=\"alert\"\n                    >\n                      <AlertCircle className=\"w-4 h-4\" />\n                      {typeof error.message === 'string' ? error.message : String(error.message)}\n                    </p>\n                  )}\n                </div>\n              )\n            })()}\n            \n          </div>\n\n          <div>\n            <label className=\"block text-[16px] font-normal text-[#5F5F5F] mb-1\">\n              Video Caption\n            </label>\n            {renderDropdown('videoCaption', videoCaptionOptions, 'Please select an option')}\n            {watch('videoCaption') === 'yes' && (\n              <div className=\"flex items-start gap-3 ml-2 mt-1\">\n                <p className=\"text-gray-600 text-[10px] leading-[13px] max-w-[280px]\">\n                Video captions are generated using OpenAI, and may occasionally appear unexpected.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n        \n\n        \n        <AvatarSelectionStatus selectedAvatars={selectedAvatars} />\n        \n         <SubmitButton\n           isLoading={isLoading}\n           disabled={\n             !selectedAvatars.title || \n             !selectedAvatars.body || \n             !selectedAvatars.conclusion ||\n             (!watch('videoTopic')?.trim() && !customTopicValue.trim()) ||\n             !watch('preset') ||\n             !watch('voice') ||\n             !watch('music') ||\n             !watch('language')\n           }\n           loadingText=\"This Proccess will take up to 30-50 seconds\"\n           buttonText=\"Submit\"\n         />\n      </form>\n      )}\n      {openDropdown && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => {\n            setOpenDropdown(null)\n          }}\n        />\n      )}\n      <CreateVideoModal\n        isOpen={isModalOpen}\n        onClose={() => {\n          setIsModalOpen(false)\n          setWebhookResponse(null) // Clear webhookResponse when modal closes\n        }}\n        videoTitle={formDataForModal?.prompt || 'Custom Video'}\n        webhookResponse={webhookResponse}\n      />\n      <UsageLimitToast\n        isVisible={showUsageToast}\n        message={usageToastMessage}\n        onClose={() => setShowUsageToast(false)}\n        onUpgrade={() => {\n          // Handle upgrade action\n          console.log('User wants to upgrade subscription')\n        }}\n      />\n      <PendingPaymentToast\n        isVisible={showPendingPaymentToast}\n        message={pendingPaymentMessage}\n        context=\"video\"\n        onClose={() => setShowPendingPaymentToast(false)}\n        onRefresh={async () => {\n          // Refresh subscription status\n          try {\n            const usageCheck = await checkVideoUsageLimit()\n            if (usageCheck.canCreateVideo) {\n              setShowPendingPaymentToast(false)\n              // Optionally show success message\n            } else if (usageCheck.message?.includes('payment is still being processed')) {\n              setPendingPaymentMessage(usageCheck.message)\n            } else {\n              setShowPendingPaymentToast(false)\n              setUsageToastMessage(usageCheck.message || 'Video limit reached')\n              setShowUsageToast(true)\n            }\n          } catch (error) {\n            console.error('Failed to refresh subscription status:', error)\n          }\n        }}\n      />\n      <SubscriptionRequiredToast\n        isVisible={showSubscriptionRequiredToast}\n        message={subscriptionRequiredMessage}\n        context=\"video\"\n        onClose={() => setShowSubscriptionRequiredToast(false)}\n        onSubscribe={() => {\n          // Redirect to pricing page or scroll to pricing section\n          window.location.href = '/#pricing'\n        }}\n      />\n      <SchedulePostModal\n        isOpen={showScheduleModal}\n        onClose={() => setShowScheduleModal(false)}\n        onNext={(scheduleData) => {\n          console.log('Schedule data:', scheduleData)\n          setScheduleData(scheduleData)\n          setShowScheduleModal(false)\n          setShowConnectAccountsModal(true)\n        }}\n      />\n      <ConnectAccountsModal\n        isOpen={showConnectAccountsModal}\n        onClose={() => { fetchSchedule(); setShowConnectAccountsModal(false) }}\n        onNext={() => { setShowConnectAccountsModal(false) }}\n        buttonText=\"Schedule Post\"\n        scheduleData={scheduleData}\n        onCreatePost={() => {\n          setShowConnectAccountsModal(false)\n          // TODO: Implement post creation with schedule data\n        }}\n        onScheduleCreated={fetchSchedule}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}